/**
 * @fileOverview PortableCSSPad
 *
 * Currently testing as a user script for wikia.com
 * Demo - not intended for distribution or usage yet
 *
 * Testing / developer tool [ 12 August 2012 ]
 * Creates a tiny pad in which you can write/paste CSS rules
 * and have them be immediately applied to the page.
 * Uses prettydiff library - http://prettydiff.com/
 * Uses jQuery UI - http://jqueryui.com/
 *
 * @author Copyright (c) Jeff Bradford
 */
(function ($, P) {
	if ('view' != wgAction || P.initialized) return;
	P.initialized = true;

	// options
	if ("boolean" != typeof P.autoinit) {
		P.autoinit = true;
	}
	if ("string" != typeof P.key || P.key.length < 1) {
		P.key = "pp";
	}
	if ("number" != typeof P.width || P.width < 250) {
		P.width = 250;
	}
	if ("number" != typeof P.height || P.height < 110) {
		P.height = 110;
	}
	if ("number" != typeof P.top || P.top < 0) {
		P.top = 0;
	}
	if ("number" != typeof P.left || P.left < 0) {
		P.left = 0;
	}
	if ("number" == typeof P.bottom && P.bottom >= 0) {
		P.top = -1;
	}
	if ("number" == typeof P.right && P.right >= 0) {
		P.left = -1;
	}
	
	// insert stylesheet for resizing the pad with jQuery UI
	$(document.head).append('<style id="PortableCSSPad-resizable-css">/*!\n * jQuery UI Resizable 1.8.22\n *\n * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n *\n * http://docs.jquery.com/UI/Resizable#theming\n */\n.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}</style>');
	
	// insert placeholder styles
	$(document.head).prepend('<style id="PortableCSSPad-live-style"></style>');

	// insert stylesheet for the pad
	$(document.head).prepend('<style id="PortableCSSPad-stylesheet">#WikiaHeader{z-index:3}#PortableCSSPad-container{-webkit-border-radius:10px;-moz-border-radius:10px;background-color:lightblue;border-radius:10px;border:1px solid #74bbfb;cursor:move;padding:8px;position:fixed;resize:both;z-index:1000000}#PortableCSSPad-container table{background-color:lightblue}#PortableCSSPad-label{color:black;font-family:Fantasy;font-size:14px}#PortableCSSPad-top-icons{float:right}#PortableCSSPad-textarea{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;border:none;margin:0;outline:none;padding:3px;resize:none;tab-size:4;z-index:1000000}#PortableCSSPad-container .ui-icon-gripsmall-diagonal-se{background:center url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAB3RJTUUH3AgJFBIx1lUJ+gAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAARnQU1BAACxjwv8YQUAAABMSURBVHjaY/z//z8DuYCJbJ2DX/Pr16//qyqrYgYOKMDw4VevXv1XUVL5D6LR5YjWCKKJ1oyukWibsWkkymZiNWLVTKxGEGYcgckTAMWnDWBcieCHAAAAAElFTkSuQmCC);padding-bottom:3px;padding-right:3px}#PortableCSSPad-top-icons{padding-bottom:2px}#PortableCSSPad-left-icons{padding-right:3px}#PortableCSSPad-top-icons img{cursor:pointer;height:20px;margin-left:6px;width:20px}#PortableCSSPad-left-icons img{cursor:pointer;height:20px;margin-bottom:6px;vertical-align:top;width:20px}</style>');
	
	// include prettydiff library
	if (!window.prettydiff) {
		/*prettydiff.com api.topcoms: true, api.insize: 4, api.inchar: " " */
		/*global o, exports */
		/*
		 @source: http://prettydiff.com/documentation.php

		 @licstart  The following is the entire license notice for the
		 JavaScript code in this page.


		 Created by Austin Cheney originally on 3 Mar 2009.
		 This code may not be used or redistributed unless the following
		 conditions are met:

		 There is no licensing associated with diffview.css.  Please use,
		 redistribute, and alter to your content.  However, diffview.css
		 provided from Pretty Diff is different from and not aligned with
		 diffview.css originally from Snowtide Informatics.

		 * The use of diffview.js and prettydiff.js must contain the following
		 copyright:
		 Copyright (c) 2007, Snowtide Informatics Systems, Inc.
		 All rights reserved.

		 * Redistributions of source code must retain the above copyright
		 notice, this list of conditions and the following disclaimer.
		 * Redistributions in binary form must reproduce the above copyright
		 notice, this list of conditions and the following disclaimer in the
		 documentation and/or other materials provided with the
		 distribution.
		 * Neither the name of the Snowtide Informatics Systems nor the names
		 of its contributors may be used to endorse or promote products
		 derived from this software without specific prior written
		 permission.

		 - used as diffview function
		 <http://prettydiff.com/diffview.js>

		 * The author of fulljsmin.js and date of creation must be stated as:
		 Franck Marcia - 31 Aug 2006

		 - used as jsmin function:
		 <http://prettydiff.com/fulljsmin.js>

		 * The fulljsmin.js is used with permission from the author of jsminc.c
		 and such must be stated as:
		 Copyright (c) 2002 Douglas Crockford  (www.crockford.com)

		 * The author of js-beautify.js must be stated as:
		 Written by Einars Lielmanis, <einars@gmail.com>
		 http://elfz.laacz.lv/beautify/

		 Originally converted to javascript by Vital, <vital76@gmail.com>
		 http://my.opera.com/Vital/blog/2007/11/21/
		 javascript-beautify-on-javascript-translated

		 - used as js_beautify function
		 <http://prettydiff.com/js-beautify.js>

		 * cleanCSS.js is originally written by Anthony Lieuallen
		 http://tools.arantius.com/tabifier

		 - used as cleanCSS function
		 <http://prettydiff.com/cleanCSS.js>

		 * charDecoder.js is written by Austin Cheney.  Use of this function
		 requires that credit be given to Austin Cheney.
		 http://prettydiff.com/

		 - used as charDecoder function
		 <http://prettydiff.com/charDecoder.js>

		 * csvbeauty.js is written by Austin Cheney.  Use of this function
		 requires that credit be given to Austin Cheney.
		 http://prettydiff.com/

		 - used as csvbeauty function
		 <http://prettydiff.com/csvbeauty.js>

		 * csvmin.js is written by Austin Cheney.  Use of this function requires
		 that credit be given to Austin Cheney.
		 http://prettydiff.com/

		 - used as csvmin function
		 <http://prettydiff.com/csvmin.js>

		 * markupmin.js is written by Austin Cheney.  Use of this function
		 requires that credit be given to Austin Cheney.
		 http://prettydiff.com/

		 - used as markupmin function
		 <http://prettydiff.com/markupmin.js>

		 * markup_beauty.js is written by Austin Cheney.  Use of this function
		 requires that credit be given to Austin Cheney.
		 http://prettydiff.com/

		 - used as markup-beauty function
		 <http://prettydiff.com/markup_beauty.js>

		 * o object literal is in the pd.js file and exists to provide a one
		 time and external means of access to the DOM.

		 -----------------------------------------------------------------------
		 * The code mentioned above has significantly expanded documentation in
		 each of the respective function's external JS file as linked from the
		 documentation page:
		 <http://prettydiff.com/documentation.php>

		 * The compilation of cssClean, csvbeauty, csvmin, jsmin, jsdifflib,
		 markup_beauty, markupmin, and js-beautify in this manner is a result of
		 the prettydiff() function contained in prettydiff.js.  The per
		 character highlighting is the result of the charcomp() function also
		 contained in prettydiff.js. Any use or redistribution of these
		 functions must mention the following:
		 Prettydiff created by Austin Cheney originally on 3 Mar 2009.
		 <http://prettydiff.com/>

		 Join the Pretty Diff mailing list at:
		 https://groups.google.com/d/forum/pretty-diff

		 * In addition to the previously stated requirements any use of any
		 component, aside from directly using the full files in their entirety,
		 must restate the license mentioned at the top of each concerned file.


		 If each and all these conditions are met use and redistribution of
		 prettydiff and its required assets is unlimited without author
		 permission.

		 @licend  The above is the entire license notice for the JavaScript code
		 in this page.

		 */
		window.prettydiff=function(i){var d=(function(){var p=new Date(),n=p.getTime();return n}()),j,h=function(B){var w=0,t=0,C=0,q=0,p=0,u=B,s=[],A=[],v=[],r=(/u\+[0-9a-f]{4,5}\+/),D=(/u\![0-9a-f]{4,5}\+/),n=(/\&\#[0-9]{1,6}\;/),z=(/\&\![0-9]{1,6}\;/);if((!o.rh&&!o.rh.innerHTML)||(u.search(D)===-1&&u.search(r)===-1&&u.search(z)===-1&&u.search(n)===-1)){return B}q=B.length;for(w=0;w<q;w+=1){if(u.search(n)===-1||(u.search(r)<u.search(n)&&u.search(r)!==-1)){t=u.search(r);v.push(t+"|h");p=u.length;for(C=t;C<p;C+=1){if(u.charAt(C)==="+"&&u.charAt(C-1)==="u"){s=u.split("");s.splice(C,1,"!");u=s.join("")}if(u.charAt(C)==="+"&&u.charAt(C-1)!=="u"){C+=1;break}}A.push(u.slice(t+2,C-1));u=u.replace(D,"")}else{if(u.search(r)===-1||(u.search(n)<u.search(r)&&u.search(n)!==-1)){t=u.search(n);v.push(t+"|d");p=u.length;for(C=t;C<p;C+=1){if(u.charAt(C)==="#"){s=u.split("");s.splice(C,1,"!");u=s.join("")}if(u.charAt(C)===";"){C+=1;break}}A.push(u.slice(t+2,C-1));u=u.replace(z,"")}}if(u.search(r)===-1&&u.search(n)===-1){break}}u=u.replace(/u\![0-9a-f]{4,5}\+/g,"").replace(/\&\![0-9]{1,6}\;/g,"").split("");t=A.length;s=[];for(w=0;w<t;w+=1){v[w]=v[w].split("|");if(v[w][1]==="h"){A[w]=parseInt(A[w],16)}o.rh.innerHTML="&#"+parseInt(A[w],10)+";";A[w]=o.rh.innerHTML;s.push(A[w])}return s.join("")},b=function(t,r){var s="",p=0,n=0,u=[],q="Error: Unterminated string begging at character number ";(function(){var v=0,y=0,w=0,x="";t=t.replace(/"{2}/g,"{csvquote}");x=t;t=t.split("");w=t.length;for(p=0;p<w;p+=1){if(t[p]==='"'){y=t.length;for(v=p+1;v<y;v+=1){if(t[v]==='"'){u.push(x.slice(p,v+1));t[p]="{csvstring}";t[v]="";p=v+1;break}t[v]=""}if(v===t.length){s=t.join("").slice(p,p+9);t=q;return}}}t=t.join("").replace(/\{csvquote\}/g,'""')}());if(r===""){r=","}else{r=h(r)}if(r.length>t.length){return t}if(t===q){if(p!==t.length-1){return t+p+", '"+s+"'."}return t+p+"."}t=t.replace(/\n/g,"\n\n{-}\n\n");if(t.charAt(t.length-r.length)===r){t=t.slice(0,t.length+1-r.length)+"{|}"}do{t=t.replace(r,"\n")}while(t.indexOf(r)!==-1);n=u.length;for(p=0;p<n;p+=1){u[p]=u[p].replace(/\n/g,"{ }");t=t.replace("{csvstring}",u[p])}return t.replace(/\{csvquote\}/g,'"')},m=function(p,n){if(n===""){n=","}else{n=h(n)}(function(){var q=function(A){var B=[],D=0,C=A.length-2;if(A.length===2){return"{ }"}for(D=0;D<C;D+=1){B.push(n)}return B.join("")+"{ }"},z=0,x=[],v="",u=0,t=[],s=p.replace(/\n\n\{\-\}\n\n/g,"{-}").replace(/\n{2,}/g,q).split("\n"),y=s.length,r="",w="Error: Unterminated String begging at character number ";for(z=0;z<y;z+=1){x=[];if(typeof s[z]==="string"&&s[z].indexOf('"')!==-1){t=s[z].split("");u=t.length;for(y=0;y<u;y+=1){if(t[y]==='"'){x.push(y)}}if(x.length===1){v=w;s[z]=t.join("");r=s[z].slice(x[0],x[0]+9);return}if(x.length>2){u=x.length-1;for(v=1;v<u;v+=1){t[x[v]]='""'}}s[z]=t.join("")}}if(v===w){return w+(s.join(n).indexOf(s[z])+x[0])+" or value number "+(z+1)+", '"+r+"'."}if(s[s.length-1]==="{|}"){s[s.length-1]=""}p=s.join(n).replace(/\n/g,n)}());do{p=p.replace("{ }","\n")}while(p.indexOf("{ }")!==-1);p=p.replace(/\n{2}/g,"\n");if(p.indexOf("{|}")===p.length-3){p=p.slice(0,p.length-3)+n}return p.replace(/\{\-\}/g,"\n")},c=function(U){(function(){if(U.type==="javascript"){U.source=U.source.replace(/\/\/(\s)*-->/g,"//-->")}}());var q=(typeof U.source!=="string"||U.source==="")?"Error: no source supplied to jsmin.":U.source,w=(U.level===1||U.level===2||U.level===3)?U.level:2,ac=(U.type==="javascript"||U.type==="css")?U.type:"javascript",y=(U.alter===true)?true:false,O=(U.fcomment===true)?true:false,N="",s=q.match(/\@charset\s+("|')[\w\-]+("|');?/gi),K="",ab="",aa="",P=0,M=0,H=-1,Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",I="0123456789",R="",V="",n=[],v=false,z=H,A=function(ad){if(typeof ad==="string"){return ad!==H&&(V.indexOf(ad)>-1||ad.charCodeAt(0)>126)}},B=function(ad){if(ad.indexOf("\n")===-1){return ad}ad=ad.split("");ad[0]=ad[0]+";";return ad.join("")},J=function(ad){var ae=ad.replace(/\s+/,"");if(ad.indexOf("\n")>-1){return ae+";"}return ae+" "},r=function(aj){var al=0,am=aj.split(""),ak=am.length,ai=0,ah=0,ag="",af="",ae="",ad="";for(al=0;al<ak;al+=1){if(am[al]==="\\"){al+=1}else{if(am[al]==='"'&&af===""){af='"'}else{if(am[al]==="'"&&af===""){af="'"}else{if(am[al]==="/"&&af===""&&!A(am[al-1])&&am[al-1]!==")"&&am[al-1]!=="]"){if(am[al-1]===" "){am[al-1]="";if(!A(am[al-2])){af="/";am[al]="pd"}else{if(am[al+1]===" "){am[al+1]=""}}}else{af="/";am[al]="pd"}}else{if(am[al]==="/"&&af===""&&am[al+1]===" "&&A(am[al-1])){am[al+1]=""}else{if(am[al]==='"'&&af==='"'){af=""}else{if(am[al]==="'"&&af==="'"){af=""}else{if(am[al]==="/"&&af==="/"){af="";am[al]="pd"}else{if((af==="'"||af==='"')&&am[al-2]==="\\"&&am[al-1]===";"){am[al-1]="";am[al-2]=" "}else{if(af===""&&(am[al]==="}"||am[al]===")")){if((am[al+1]!=="("&&am[al+1]!=="["&&am[al+1]!==","&&am[al+1]!==";"&&am[al+1]!=="."&&am[al+1]!=="?"&&am[al+1]!=="*"&&am[al+1]!=="+"&&am[al+1]!=="-"&&(am[al+1]!=="\n"||(am[al+1]==="\n"&&am[al+2]!=="("&&am[al+2]!=="["&&am[al+2]!=="+"&&am[al+2]!=="-"&&am[al+2]!=="/"))&&typeof am[al-3]==="string"&&am[al-2]==="="&&am[al-1]==="{"&&am[al]==="}"&&(am[al+1]!=="\n"||(am[al+1]==="\n"&&am[al+2]!=="+"&&am[al+2]!=="-"))&&(A(am[al-3])||am[al-3]==="]"||am[al-3]===")"))){am[al]+=";"}else{ah=-1;ag="";ae="";if(am[al]==="}"){ae="}";ad="{"}else{ae=")";ad="("}for(ai=al-1;ai>-1;ai-=1){if((ai>1&&am[ai-1]==="\\"&&am[ai-2]!=="\\")||(ai===1&&am[ai-1]==="\\")){ai-=1}else{if(am[ai].charAt(0)===ae&&ag===""){ah-=1}else{if(am[ai]===ad&&ag===""){ah+=1}else{if(am[ai]==='"'&&ag===""){ag='"'}else{if(am[ai]==="'"&&ag===""){ag="'"}else{if(am[ai]==="pd"&&ag===""){ag="/"}else{if(am[ai]==='"'&&ag==='"'){ag=""}else{if(am[ai]==="'"&&ag==="'"){ag=""}else{if(am[ai]==="pd"&&ag==="/"){ag=""}}}}}}}}}if(ah===0&&(ai!==al-1||(ai===al-1&&typeof am[ai-1]==="string"&&am[ai-1]!==am[al]))){if(am[ai-1]===")"&&ae==="}"){ai-=2;ah=-1;ag="";for(ai;ai>-1;ai-=1){if((ai>1&&am[ai-1]==="\\"&&am[ai-2]!=="\\")||(ai===1&&am[ai-1]==="\\")){ai-=1}else{if(am[ai]===")"&&ag===""){ah-=1}else{if(am[ai]==="("&&ag===""){ah+=1}else{if(am[ai]==='"'&&ag===""){ag='"'}else{if(am[ai]==="'"&&ag===""){ag="'"}else{if(am[ai]==="pd"&&ag===""){ag="/"}else{if(am[ai]==='"'&&ag==='"'){ag=""}else{if(am[ai]==="'"&&ag==="'"){ag=""}else{if(am[ai]==="pd"&&ag==="/"){ag=""}}}}}}}}}if(ah===0){ai-=1;if(am[al+1]!=="("&&am[al+1]!=="["&&am[al+1]!==","&&am[al+1]!==";"&&am[al+1]!=="."&&am[al+1]!=="?"&&am[al+1]!=="*"&&am[al+1]!=="+"&&am[al+1]!=="-"&&typeof am[ai-9]==="string"&&am[ai-8]==="="&&am[ai-7]==="f"&&am[ai-6]==="u"&&am[ai-5]==="n"&&am[ai-4]==="c"&&am[ai-3]==="t"&&am[ai-2]==="i"&&am[ai-1]==="o"&&am[ai]==="n"&&(A(am[ai-9])||am[ai-9]==="]"||am[ai-9]===")")){am[al]+=";"}break}}break}else{if(typeof am[ai-2]==="string"&&am[ai-1]==="="&&(am[al-1].length===1||am[al-1]==="pd")&&(A(am[ai-2]||am[ai-2]==="]"||am[ai-2]===")"))){if(am[al+1]!=="("&&am[al+1]!=="["&&am[al+1]!==","&&am[al+1]!==";"&&am[al+1]!=="."&&am[al+1]!=="?"&&am[al+1]!=="*"&&am[al+1]!=="+"&&am[al+1]!=="-"&&(am[al+1]!=="\n"||(am[al+1]==="\n"&&am[al+2]!=="("&&am[al+2]!=="["&&am[al+2]!=="+"&&am[al+2]!=="-"&&am[al+2]!=="/"))&&(typeof am[al+1]!=="string"||am[al+1]!=="/")){am[al]+=";"}break}else{break}}}}}}else{if(af===""&&am[al]==="\n"){if((/\w/).test(am[al+1])&&am[al-1]!=="}"&&am[al-1]!==")"&&am[al-1].indexOf(";")===-1){am[al]=";"}else{am[al]=""}}}}}}}}}}}}}for(al=0;al<ak;al+=1){if(am[al]==="pd"){am[al]="/"}else{if(am[al]==="/"&&typeof am[al+1]==="string"&&am[al+1]===" "){am[al+1]=""}}}return am.join("").replace(/\"/g,'"').replace(/\'/g,"'")},u=function(aq){var ap=0,ak=0,aj=0,ai=-1,af=0,ae=0,ad=0,ao=aq.length,an=[],am=[],ah=[],ag=[],al=false,ar=function(av){var au=av.charAt(0),at=false;if(av.length===8||av.length===5){av=av.substr(1);at=true}av=av.toLowerCase();if(av.length===7&&av.charAt(1)===av.charAt(2)&&av.charAt(3)===av.charAt(4)&&av.charAt(5)===av.charAt(6)){av="#"+av.charAt(1)+av.charAt(3)+av.charAt(5)}if(at&&!(/\s/).test(au)&&au!==":"){av=au+" "+av}else{if(at&&au===":"){av=":PDpoundPD"+av}else{if(at&&(/\s/).test(au)){av=" "+av}}}return av};(function(){var aw=function(ay){if(ay.indexOf("\n")===-1){return ay}return ay.replace(/\s+/,";")},at=aq.length,ax=[],av=0,au="";for(ap=0;ap<at;ap+=1){ax.push(aq.charAt(ap));if(aq.charAt(ap)==="{"||aq.charAt(ap+1)==="}"){if(ax[0]==="}"){am.push("}");ax[0]=""}au=ax.join("");if(au.indexOf("{")>-1){av=Math.max(au.lastIndexOf("\n"),au.lastIndexOf(";"));am.push(au.substring(0,av+1).replace(/^(\s+)/,"").replace(/(\w|\)|"|')\s+/g,aw));am.push(au.substring(av+1))}else{am.push(au.replace(/^(\s+)/,"").replace(/\s+\w+(\-\w+)*:/g,aw))}ax=[]}}am.push("}")}());for(ao=ap-1;ao>0;ao-=1){if(aq.charAt(ao)==="/"&&aq.charAt(ao-1)&&aq.charAt(ao-1)==="*"){for(ak=ao-1;ak>0;ak-=1){if(aq.charAt(ak)==="/"&&aq.charAt(ak+1)==="*"){ao=ak;break}}}else{if(!/[\}\s]/.test(aq.charAt(ao))){break}}}(function(){var aB=0,aA=am.length,az=0,ax=0,aw=1,av=[],au=[],at=[],ay=false;for(aB=0;aB<aA;aB+=1){if(am[aB]==="}"){ax-=1;if(ax===aw-1&&av.length>0){au=am.slice(0,aB);at=am.slice(aB,am.length);am=[].concat(au,av,at);av=[];aB=au.length-1;aA=am.length}}else{if(am[aB].indexOf("{")>-1){ax+=1;if(ax>aw){ay=true;aw=ax-1;av.push(am[aB]);am[aB]="";for(az=aB+1;az<aA;az+=1){av.push(am[az]);if(am[az].indexOf("{")>-1){ax+=1;am[az]=""}else{if(am[az]==="}"){ax-=1;am[az]="";if(ax===aw){break}}else{am[az]=""}}}}}}}if(ay){aA=am.length;av=[];for(aB=0;aB<aA;aB+=1){if(av.length>0&&av[av.length-1].indexOf("{")===-1&&am[aB]!=="}"&&am[aB].indexOf("{")===-1){av[av.length-1]=av[av.length-1]+am[aB]}else{if(am[aB]!==""){av.push(am[aB])}}}am=[].concat(av)}}());ao=am.length;for(ap=0;ap<ao-1;ap+=1){if(am[ap].charAt(am[ap].length-1)!=="{"){if(am[ap].indexOf("url(")>-1){ah=am[ap].split("");aj=ah.length;for(ak=3;ak<aj;ak+=1){if(ah[ak-3]==="u"&&ah[ak-2]==="r"&&ah[ak-1]==="l"&&ah[ak]==="("){al=true}if(al){if(ah[ak-1]!=="\\"&&ah[ak]===")"){al=false}else{if(ah[ak]===";"){ah[ak]="~PrettyDiffSemi~"}else{if(ah[ak]===":"){ah[ak]="~PrettyDiffColon~"}}}}}am[ap]=ah.join("")}if(am[ap].charAt(am[ap].length-1)===";"){am[ap]=am[ap].substr(0,am[ap].length-1)}if(am[ap].indexOf("{")>-1||am[ap].indexOf(",")>am[ap].length-3){an=[am[ap]]}else{an=am[ap].replace(/(\w|\W)?#[a-fA-F0-9]{3,6}(?!(\w*\)))(?=(;|\s|\)\}|,))/g,ar).replace(/:/g,"~PDCSEP~").split(";").sort()}aj=an.length;ah=[];for(ak=0;ak<aj;ak+=1){if(an[ak].charAt(0)==="_"){an.push(an[ak]);an.splice(ak,1)}ah.push(an[ak].split("~PDCSEP~"))}an=[].concat(ah);aj=an.length;af=0;ae=0;ai=-1;for(ak=1;ak<aj;ak+=1){if(an[ak].length>1&&an[ak][0]===an[ak-1][0]){an[ak-1]=["",""]}}for(ak=0;ak<aj;ak+=1){if(an[ak-1]&&an[ak-1][0]===an[ak][0]&&(/\-[a-z]/).test(an[ak-1][1])===false&&(/\-[a-z]/).test(an[ak][1])===false){an[ak-1]=["",""]}if(an[ak][0]!=="margin"&&an[ak][0].indexOf("margin")!==-1){af+=1;if(af===4){ag=[an[ak][1]];ad=ak;do{ad-=1;if(an[ad].length>1&&an[ad][1]!==""){ag.push(an[ad][1]);an[ad]=["",""]}}while(ag.length<4&&ad>0);an[ak]=["margin",ag[0]+" "+ag[1]+" "+ag[3]+" "+ag[2]];af=0}}else{if(an[ak][0]!=="padding"&&an[ak][0].indexOf("padding")!==-1){ae+=1;if(ae===4){ag=[an[ak][1]];ad=ak;do{ad-=1;if(an[ad].length>1&&an[ad][1]!==""){ag.push(an[ad][1]);an[ad]=["",""]}}while(ag.length<4&&ad>0);an[ak]=["padding",ag[0]+" "+ag[1]+" "+ag[3]+" "+ag[2]];ae=0}}}if(ai===-1&&an[ak+1]&&an[ak][0].charAt(0)!=="-"&&(an[ak][0].indexOf("cue")!==-1||an[ak][0].indexOf("list-style")!==-1||an[ak][0].indexOf("outline")!==-1||an[ak][0].indexOf("overflow")!==-1||an[ak][0].indexOf("pause")!==-1)&&(an[ak][0]===an[ak+1][0].substring(0,an[ak+1][0].lastIndexOf("-"))||an[ak][0].substring(0,an[ak][0].lastIndexOf("-"))===an[ak+1][0].substring(0,an[ak+1][0].lastIndexOf("-")))){ai=ak;if(an[ai][0].indexOf("-")!==-1&&an[ai][0]!=="list-style"){an[ai][0]=an[ai][0].substring(0,an[ai][0].lastIndexOf("-"))}}else{if(ai!==-1&&an[ai][0]===an[ak][0].substring(0,an[ak][0].lastIndexOf("-"))){if(an[ai][0]==="cue"||an[ai][0]==="pause"){an[ai][1]=an[ak][1]+" "+an[ai][1]}else{an[ai][1]=an[ai][1]+" "+an[ak][1]}an[ak]=["",""]}else{if(ai!==-1){ai=-1}}}}for(ak=0;ak<aj;ak+=1){if(an[ak].length>1&&an[ak][0]!==""){for(ad=ak+1;ad<aj;ad+=1){if(an[ad].length>1&&an[ak][0]===an[ad][0]){an[ak]=["",""]}}}}ah=[];for(ak=0;ak<aj;ak+=1){if(typeof an[ak]!=="string"&&an[ak]!==undefined&&an[ak][0]!==""){ah[ak]=an[ak].join(":")}else{if(typeof an[ak]==="string"){ah[ak]=an[ak].replace(/~PDCSEP~/g,":")}}}am[ap]=ah.join(";").replace(/;+/g,";").replace(/^;/,"");if(am[ap]!=="}"&&typeof am[ap+1]==="string"&&am[ap+1]!=="}"&&am[ap+1].indexOf("{")>-1&&!(/(\,\s*)$/).test(am[ap])){am[ap]=am[ap]+";"}}am[ap]=am[ap].replace(/\)\s+\{/g,"){")}return am.join("").replace(/PDpoundPD#/g,"#")},T=function(aj){var af=0,ae=[],ai="",ad=aj.replace(/\\\)/g,"~PDpar~").split("url("),ah=ad.length,ag="";for(af=1;af<ah;af+=1){ag='"';if(ad[af].charAt(0)==='"'){ag=""}else{if(ad[af].charAt(0)==="'"){ad[af]=ad[af].substr(1,ad[af].length-1)}}ae=ad[af].split(")");ai=ae[0];if(ai.charAt(ai.length-1)!=='"'&&ai.charAt(ai.length-1)!=="'"){ai=ai+'"'}else{if(ai.charAt(ai.length-1)==="'"||ai.charAt(ai.length-1)==='"'){ai=ai.substr(0,ai.length-1)+'"'}}ae[0]=ai;ad[af]="url("+ag+ae.join(")")}return ad.join("").replace(/~PDpar~/g,"\\)")},D=function(ad){return ad.replace(/\-/," -")},S=function(ad){var ae,af=function(ag){ag=Number(ag).toString(16);if(ag.length===1){ag="0"+ag}return ag};ae="#"+ad.replace(/\d+/g,af).replace(/rgb\(/,"").replace(/,/g,"").replace(/\)/,"").replace(/\s*/g,"");return ae},Y=function(af){var ae=af.split(":"),ad=[];if(ae[0].indexOf("background")>-1||ae.length>2){return af}ad=ae[1].split(" ");if(ad.length===4){if(ad[0]===ad[1]&&ad[1]===ad[2]&&ad[2]===ad[3]){ad[1]="";ad[2]="";ad[3]=""}else{if(ad[0]===ad[2]&&ad[1]===ad[3]&&ad[0]!==ad[1]){ad[2]="";ad[3]=""}else{if(ad[0]!==ad[2]&&ad[1]===ad[3]){ad[3]=""}}}}else{if(ad.length===3&&ad[0]===ad[2]&&ad[0]!==ad[1]){ad[2]=""}else{if(ad.length===2&&ab!==" "&&ad[0]===ad[1]){ad[1]=""}}}return ae[0]+":"+ad.join(" ").replace(/\s+/g," ").replace(/\s+$/,"")},G=function(ad){var ae=ad.substr(0,ad.indexOf(":")+1);if(ae==="radius:"||ae==="shadow:"||ad.charAt(ad.length-1)!=="0"||(ad.charAt(ad.length-1)==="0"&&ad.charAt(ad.length-2)!==" ")){return ad}return ae+"0"},L=function(ad){var ae=ad.indexOf(".");return ad.substr(0,ae)},F=function(ad){var ae=ad.charAt(0);if(ae==="#"||ae==="."||/[a-f0-9]/.test(ae)){return ad}return ae+"0"},C=function(ad){var ae=ad.indexOf(".");return ad.charAt(0)+ad.substr(ae,ad.length)},E=function(ad){return ad.replace(/%/,"% ")},W=function(ad){if(ad.indexOf("\n")>-1){return");!"}return ad},Z=function(){var ad=z;if(P===M){return H}z=H;if(ad===H){ad=q.charAt(P);P+=1}if(ad>=" "||ad==="\n"){return ad}if(ad==="\r"){return"\n"}return" "},x=function(){z=Z();return z},t=function(){var ad=Z();if(ad==="/"&&(ac==="javascript"||(ac==="css"&&x()!=="/"))){switch(x()){case"/":for(;;){ad=Z();if(ad<="\n"){return ad}}break;case"*":Z();for(;;){switch(Z()){case"'":ad=Z().replace(/'/,"");break;case'"':ad=Z().replace(/"/,"");break;case"*":if(x()==="/"){Z();return" "}break;case H:K="Error: Unterminated block comment.";return K}}break;default:return ad}}return ad},p=function(ae){var ad=[];if(ae===1){ad.push(ab)}if(ae<3){ab=aa;if(ab==="'"||ab==='"'){if(ae===1&&(ad[0]===")"||ad[0]==="]")&&v){ab=";";return ad[0]}for(;;){ad.push(ab);ab=Z();if(ab===aa){break}if(ab<="\n"){if(ac==="css"){K="Error: This does not appear to be CSS."}else{K="Error: This does not appear to be JavaScript."}return K}if(ab==="\\"){ad.push(ab);ab=Z()}}}}aa=t();if(aa==="/"&&"(,=:[!&|".indexOf(ab)>-1&&ac!=="css"){ad.push(ab);ad.push(aa);for(;;){ab=Z();if(ab==="/"){break}else{if(ab==="\\"){ad.push(ab);ab=Z()}else{if(ab<="\n"){K="Error: unterminated JavaScript Regular Expression literal";return K}}}ad.push(ab)}aa=t()}return ad.join("")},X=function(){(function(){var aj=0,ai=q.length,ak="";if(O!==true||(/^\s*\/\*/.test(q)!==true&&/^\s*\/\//.test(q)!==true)){return}for(aj=0;aj<ai;aj+=1){if(ak===""){if(q.charAt(aj)==="/"&&q.charAt(aj+1)&&(q.charAt(aj+1)==="*"||q.charAt(aj+1)==="/")){ak=q.substr(aj,2);n.push(q.charAt(aj))}else{if(/\s/.test(q.charAt(aj))!==true){return}}}else{n.push(q.charAt(aj));if(q.charAt(aj)==="*"&&ak==="/*"&&q.charAt(aj+1)&&q.charAt(aj+1)==="/"){n.push("/\n");if(q.charAt(aj+2)&&q.charAt(aj+2)==="\n"){aj+=2}else{aj+=1}ak=""}else{if((q.charAt(aj)==="\n"||q.charAt(aj)==="\r")&&ak==="//"){ak=""}}}}}());var ag=[],af="",ae=0,ad=true,ah=false;if(K!==""){return K}ab="\n";ag.push(p(3));while(ab!==H){if(ab===" "&&!(ac==="css"&&aa==="#")){if(A(aa)){ag.push(p(1))}else{ag.push(p(2));if(v){af=ag[ag.length-1];if((A(af)||af==="'"||af==='"'||af==="]"||af===")")&&ab==="}"){ag.push(";")}}}}else{if(ab==="\n"){switch(aa){case"{":case"[":case"(":case"+":case"-":ag.push(p(1));break;case" ":ag.push(p(3));break;default:if(A(aa)){ag.push(p(1))}else{if(w===1&&aa!=="\n"){ag.push(p(1))}else{ag.push(p(2))}}}}else{switch(aa){case" ":if(A(ab)){ag.push(p(1));break}ag.push(p(3));break;case"\n":if(w===1&&ab!=="\n"){ag.push(p(1))}else{if(ab==="}"){ad=true;if(w===3){ag.push(p(3))}else{ag.push(p(1))}}else{if(A(ab)){ag.push(p(1));if(v){af=ag[ag.length-1];if(af===":"){ad=false}if(ad&&(A(af)||af==="]"||af===")")&&ab==="\n"&&(aa==="}"||aa===" ")){ag.push(";")}}}else{ag.push(p(3))}}}break;default:ag.push(p(1));if(v){af=ag[ag.length-1];if(af==="{"){ad=true}else{if(af.charAt(0)===":"){ad=false}else{if((ag[ag.length-3]+ag[ag.length-2]+ag[ag.length-1]==="if(")||(ag[ag.length-4]+ag[ag.length-3]+ag[ag.length-2]+ag[ag.length-1]==="for(")){ad=false;ah=true}else{if(ag[ag.length-1]==="("&&ag[ag.length-2]===""){ae=ag.length-2;do{ae-=1}while(ag[ae]==="");if((ag[ae-1]+ag[ae]+ag[ag.length-1]==="if(")||(ag[ae-2]+ag[ae-1]+ag[ae]+ag[ag.length-1]==="for(")){ad=false;ah=true}}}}}if(ad&&(((af==="]"||af===")")&&A(ab)&&ab!=="/")||(ab==="}"&&(A(af)||af==="'"||af==='"')))){ag.push(";")}if(ah&&af===")"){ad=true;ah=false}}break}}}}return ag.join("")};if(ac==="css"){R="-._\\"}else{if(y&&w===2){v=true;q=q.replace(/\r\n?/g,"\n").replace(/("|')\s+["'a-zA-Z_$]/g,B).replace(/\)\s+\!(?!\=)/g,W)}R="_$//"}if(ac==="css"&&y){q=u(q.replace(/; /g,";\n"))}V=Q+I+R;P=0;M=q.length;N=X(q);if(/\s/.test(N.charAt(0))){N=N.slice(1,N.length)}if(ac==="css"){N=N.replace(/\: #/g,":#").replace(/\; #/g,";#").replace(/\, #/g,",#").replace(/\s+/g," ").replace(/\} /g,"}").replace(/\{ /g,"{").replace(/\\\)/g,"~PDpar~").replace(/\)/g,") ").replace(/\) ;/g,");").replace(/\d%\.?[a-z0-9]/g,E);if(y){N=N.replace(/@charset("|')?[\w\-]+("|')?;?/gi,"").replace(/(#|\.)?[\w]*\{\}/gi,"").replace(/(\S|\s)0+/g,F).replace(/:[\w\s\!\.\-%]*\d+\.0*(?!\d)/g,L).replace(/(:| )0+\.\d+/g,C).replace(/\w+(\-\w+)*:((((\-?(\d*\.\d+)|\d+)[a-zA-Z]+)|0) )+(((\-?(\d*\.\d+)|\d+)[a-zA-Z]+)|0)/g,Y).replace(/\};/g,"}").replace(/^;/,"").replace(/ \}/g,"}");N=N.replace(/:\.?0(\%|px|in|cm|mm|em|ex|pt|pc)/g,":0").replace(/ \.?0(\%|px|in|cm|mm|em|ex|pt|pc)/g," 0").replace(/bottom:none/g,"bottom:0").replace(/top:none/g,"top:0").replace(/left:none/g,"left:0").replace(/right:none/,"right:0").replace(/:0 0 0 0/g,":0").replace(/:(\s*([0-9]+\.)?[0-9]+(%|in|cm|mm|em|ex|pt|pc|px)?)+\-([0-9]*\.)?[0-9]/g,D);N=N.replace(/[a-z]*:(0\s*)+\-?\.?\d?/g,G).replace(/ 0 0 0 0/g," 0").replace(/rgb\(\d+,\d+,\d+\)/g,S).replace(/background\-position:0;/gi,"background-position:0 0;").replace(/;+/g,";").replace(/\s*[\w\-]+:\s*\}/g,"}").replace(/\s*[\w\-]+:\s*;/g,"").replace(/;\}/g,"}").replace(/\{;/g,"{").replace(/\{\s+\}/g,"{}").replace(/\s+\)/g,")").replace(/\s+\,/g,",");if(s===null){s=[""]}else{if(s[0].charAt(s[0].length-1)!==";"){s[0]=s[0]+";"}}N=s[0].replace(/@charset/i,"@charset")+T(N).replace(/~PrettyDiffColon~/g,":").replace(/~PrettyDiffSemi~/g,";")}N=N.replace(/~PDpar~/g,"\\)")}else{if(v){N=N.replace(/(\s+)$/,"").replace(/((return)|(continue)|(break)|(throw))\s+/g,J).replace(/(\n+)!+(\+|\-)/g,";").replace(/\}\u003b(!=\))/g,"}").replace(/x{2}-->/g,"//-->");N=r(N);if(N.charAt(N.length-1)!==";"&&N.charAt(N.length-1)!=="}"){N=N+";"}}else{N=N.replace(/^\s+/,"").replace(/x{2}-->/g,"//-->")}}if(K!==""){return K}return n.join("")+N},k=function(v){var A=(typeof v.source!=="string"||v.source==="")?"Error: no source supplied to cleanCSS.":v.source,E=(typeof v.size!=="number"||v.size<0)?4:v.size,n=(typeof v.character!=="string")?" ":v.character,r=(v.comment==="noindent")?"noindent":"",p=(v.alter===true)?true:false,F=A.length,M=0,K=0,J=[],y=A.match(/\@charset\s+("|')[\w\-]+("|');?/gi),t="",B=Number(E),C=function(S){var O=0,N=[],R="",q=S.replace(/\\\)/g,"~PDpar~").split("url("),Q=q.length,P="";for(O=1;O<Q;O+=1){P='"';if(q[O].charAt(0)==='"'){P=""}else{if(q[O].charAt(0)==="'"){q[O]=q[O].substr(1,q[O].length-1)}}N=q[O].split(")");R=N[0];if(R.charAt(R.length-1)!=='"'&&R.charAt(R.length-1)!=="'"){R=R+'"'}else{if(R.charAt(R.length-1)==="'"||R.charAt(R.length-1)==='"'){R=R.substr(0,R.length-1)+'"'}}N[0]=R.replace(/\s*\/\s*/g,"/");q[O]="url("+P+N.join(")")}return q.join("").replace(/~PDpar~/g,"\\)")},I=function(q){var O=[],N=q.split(": ");if(N[0].indexOf("background")>-1||N.length>2){return q}O=N[1].split(" ");if(O.length===4){if(O[0]===O[1]&&O[1]===O[2]&&O[2]===O[3]){O[1]="";O[2]="";O[3]=""}else{if(O[0]===O[2]&&O[1]===O[3]&&O[0]!==O[1]){O[2]="";O[3]=""}else{if(O[0]!==O[2]&&O[1]===O[3]){O[3]=""}}}}else{if(O.length===3&&O[0]===O[2]&&O[0]!==O[1]){O[2]=""}else{if(O.length===2&&O[0]===O[1]){O[1]=""}}}return N[0]+": "+O.join(" ").replace(/\s+/g," ").replace(/\s+$/,"")},z=function(x){var q=x.indexOf(".");return x.substr(0,q)},w=function(x){var q=x.charAt(0);if(q==="#"||q==="."||/[a-f0-9]/.test(q)){return x}return q+"0;"},H=function(q){return q.replace(/ \./g," 0.")},L=function(N){var q=N.match(/^(\s*)/)[0],x=q.substr(0,q.length-t.length);if(N.charAt(N.length-1)==="}"){return x+"}"}return x.replace(/(\s+)$/,"")},G=function(q){return q.replace(/%/,"% ")},D=function(q){return q.replace(/\s*;\n/,"\n")},u=function(){var P=0,N=0,q=A.length,O=[],R="",x=[t],Q=A.split("");for(P=0;P<q;P+=1){if("{"===Q[P]){O.push(t);R=O.join("");x.push(" {\n"+R)}else{if("\n"===Q[P]){x.push("\n"+R)}else{if("}"===Q[P]){x[x.length-1]=x[x.length-1].replace(/\s*$/,"");O=O.slice(0,O.length-1);R=O.join("");if(Q[P+1]+Q[P+2]!=="*/"){x.push("\n"+R+"}\n"+R)}else{x.push("\n"+R+"}")}}else{if(Q[P-1]===","&&(/\s/).test(Q[P])===false){x.push(" ");x.push(Q[P])}else{if(";"===Q[P]&&"}"!==Q[P+1]){x.push(";\n"+R)}else{if(P>3&&Q[P-3]==="u"&&Q[P-2]==="r"&&Q[P-1]==="l"&&Q[P]==="("){for(N=P;N<q;N+=1){x.push(Q[N]);if(Q[N]===")"&&Q[N-1]!=="\\"){P=N;break}}}else{x.push(Q[P])}}}}}}}if(P>=q){x=[x.join("").replace(/^(\s*)/,"").replace(/(\s*)$/,"")];A=x.join("");O=[]}},s=function(O){var ae=0,aa=0,Z=0,X=-1,S=0,R=0,P=0,Q="",ad=O.length,ac=[],ab=[],W=[],U=[],Y=false,V=function(af){var x=af.charAt(0),q=false;if(af.length===8||af.length===5){af=af.substr(1);q=true}af=af.toLowerCase();if(af.length===7&&af.charAt(1)===af.charAt(2)&&af.charAt(3)===af.charAt(4)&&af.charAt(5)===af.charAt(6)){af="#"+af.charAt(1)+af.charAt(3)+af.charAt(5)}if(x===":"){af=x+"PDpoundPD"+af}else{if(q&&!(/\s/).test(x)&&x!=="("){af=x+" "+af}else{if(q&&((/\s/).test(x)||x==="(")){af=x+af}}}return af},N=(/[\w\s:#\-\=\!\(\)"'\[\]\.%-\_\?\/\\]\/\*/),T=function(q){return q.replace(/\s*\/\*/,";/*")};(function(){var ah=function(q){if(q.indexOf("\n")===-1){return q}return q.replace(/\s+/,";")},x=O.length,ai=[],ag=0,af="";for(ae=0;ae<x;ae+=1){ai.push(O.charAt(ae));if(O.charAt(ae)==="{"||O.charAt(ae+1)==="}"){if(ai[0]==="}"){ab.push("}");ai[0]=""}af=ai.join("");if(af.indexOf("{")>-1&&(af.indexOf("\n")>-1||af.indexOf(";")>-1)){ag=Math.max(af.lastIndexOf("\n"),af.lastIndexOf(";"));ab.push(af.substring(0,ag+1).replace(/(\w|\)|"|')\s+/g,ah));ab.push(af.substring(ag+1))}else{ab.push(af.replace(/(\w|\)|"|')\s+/g,ah))}ai=[]}}ab.push("}")}());for(ad=ae-1;ad>0;ad-=1){if(O.charAt(ad)==="/"&&O.charAt(ad-1)&&O.charAt(ad-1)==="*"){for(aa=ad-1;aa>0;aa-=1){if(O.charAt(aa)==="/"&&O.charAt(aa+1)==="*"){ad=aa;break}}}else{if(!/[\}\s]/.test(O.charAt(ad))){break}}}(function(){var al=0,ak=ab.length,aj=0,ah=0,ag=1,af=[],x=[],q=[],ai=false;for(al=0;al<ak;al+=1){if(ab[al]==="}"){ah-=1;if(ah===ag-1&&af.length>0){x=ab.slice(0,al);q=ab.slice(al,ab.length);ab=[].concat(x,af,q);af=[];al=x.length-1;ak=ab.length}}else{if(ab[al].indexOf("{")>-1){ah+=1;if(ah>ag){ai=true;ag=ah-1;af.push(ab[al]);ab[al]="";for(aj=al+1;aj<ak;aj+=1){af.push(ab[aj]);if(ab[aj].indexOf("{")>-1){ah+=1;ab[aj]=""}else{if(ab[aj]==="}"){ah-=1;ab[aj]="";if(ah===ag){break}}else{ab[aj]=""}}}}}}}if(ai){ak=ab.length;af=[];for(al=0;al<ak;al+=1){if(af.length>0&&af[af.length-1].indexOf("{")===-1&&ab[al]!=="}"&&ab[al].indexOf("{")===-1){af[af.length-1]=af[af.length-1]+ab[al]}else{if(ab[al]!==""){af.push(ab[al])}}}ab=[].concat(af)}}());for(ae=ab.length-1;ae>0;ae-=1){if(ab[ae]==="}"){ad+=1}else{break}}ad=ab.length;for(ae=0;ae<ad;ae+=1){if(ab[ae].charAt(ab[ae].length-1)==="{"){ab[ae]=ab[ae].replace(/,\s*/g,",\n").replace(/>/g," > ")}else{if(ab[ae].indexOf("url(")>-1){W=ab[ae].split("");Z=W.length;for(aa=3;aa<Z;aa+=1){if(W[aa-3]==="u"&&W[aa-2]==="r"&&W[aa-1]==="l"&&W[aa]==="("){Y=true}if(Y){if(W[aa-1]!=="\\"&&W[aa]===")"){Y=false}else{if(W[aa]===";"){W[aa]="~PrettyDiffSemi~"}else{if(W[aa]===":"){W[aa]="~PrettyDiffColon~"}}}}}ab[ae]=W.join("")}if(ab[ae].charAt(ab[ae].length-1)===";"){ab[ae]=ab[ae].substr(0,ab[ae].length-1)}Q=ab[ae].replace(N,T);ac=Q.replace(/(\w|\W)?#[a-fA-F0-9]{3,6}(?!(\w*\)))/g,V).replace(/\*\//g,"*/;").replace(/:/g,"~PDCSEP~").split(";");Z=ac.length;W=[];U=[];for(aa=0;aa<Z;aa+=1){if(/^(\/\*)/.test(ac[aa])){W.push(ac[aa].replace(/\/\*\s*/,"/* "))}else{if(ac[aa]!==""){U.push(ac[aa].replace(/^\s*/,""))}}}U=U.sort();Z=U.length;ac=[];for(aa=0;aa<Z;aa+=1){if(U[aa].charAt(0)==="_"){U.push(U[aa]);U.splice(aa,1)}ac.push(U[aa].split("~PDCSEP~"))}ac=W.concat(ac);Z=ac.length;S=0;R=0;X=-1;for(aa=1;aa<Z;aa+=1){if(ac[aa].length>1&&ac[aa][0]===ac[aa-1][0]){ac[aa-1]=["",""]}}for(aa=0;aa<Z;aa+=1){if(ac[aa-1]&&ac[aa-1][0]===ac[aa][0]&&(/\-[a-z]/).test(ac[aa-1][1])===false&&(/\-[a-z]/).test(ac[aa][1])===false){ac[aa-1]=["",""]}if(ac[aa].length>1){ac[aa][1]=ac[aa][1].replace(/\//g," / ").replace(/\*/g,"* ")}if(ac[aa][0]!=="margin"&&ac[aa][0].indexOf("margin")!==-1){S+=1;if(S===4){U=[ac[aa][1]];P=aa;do{P-=1;if(ac[P].length>1&&ac[P][1]!==""){U.push(ac[P][1]);ac[P]=["",""]}}while(U.length<4&&P>0);ac[aa]=["margin",U[0]+" "+U[1]+" "+U[3]+" "+U[2]];S=0}}else{if(ac[aa][0]!=="padding"&&ac[aa][0].indexOf("padding")!==-1){R+=1;if(R===4){U=[ac[aa][1]];P=aa;do{P-=1;if(ac[P].length>1&&ac[P][1]!==""){U.push(ac[P][1]);ac[P]=["",""]}}while(U.length<4&&P>0);ac[aa]=["padding",U[0]+" "+U[1]+" "+U[3]+" "+U[2]];R=0}}}if(X===-1&&ac[aa+1]&&ac[aa][0].charAt(0)!=="-"&&(ac[aa][0].indexOf("cue")!==-1||ac[aa][0].indexOf("list-style")!==-1||ac[aa][0].indexOf("outline")!==-1||ac[aa][0].indexOf("overflow")!==-1||ac[aa][0].indexOf("pause")!==-1)&&(ac[aa][0]===ac[aa+1][0].substring(0,ac[aa+1][0].lastIndexOf("-"))||ac[aa][0].substring(0,ac[aa][0].lastIndexOf("-"))===ac[aa+1][0].substring(0,ac[aa+1][0].lastIndexOf("-")))){X=aa;if(ac[X][0].indexOf("-")!==-1&&ac[X][0]!=="list-style"){ac[X][0]=ac[X][0].substring(0,ac[X][0].lastIndexOf("-"))}}else{if(X!==-1&&ac[X][0]===ac[aa][0].substring(0,ac[aa][0].lastIndexOf("-"))){if(ac[X][0]==="cue"||ac[X][0]==="pause"){ac[X][1]=ac[aa][1]+" "+ac[X][1]}else{ac[X][1]=ac[X][1]+" "+ac[aa][1]}ac[aa]=["",""]}else{if(X!==-1){X=-1}}}}for(aa=0;aa<Z;aa+=1){if(ac[aa].length>1&&ac[aa][0]!==""){for(P=aa+1;P<Z;P+=1){if(ac[P].length>1&&ac[aa][0]===ac[P][0]){ac[aa]=["",""]}}}}W=[];for(aa=0;aa<Z;aa+=1){if(typeof ac[aa]!=="string"&&ac[aa]!==undefined&&ac[aa][0]!==""){W.push(ac[aa].join(": "))}else{if(typeof ac[aa]==="string"){W.push(ac[aa].replace(/~PDCSEP~/g,": "))}}}ab[ae]=(W.join(";")+";").replace(/^;/,"")}}return ab.join("").replace(/\*\/\s*;\s*/g,"*/\n").replace(/(\s*[\w\-]+:)$/g,"\n}").replace(/\s*;$/,"").replace(/PDpoundPD#/g,"#")};(function(){var x,q=[];for(x=0;x<B;x+=1){q.push(n)}t=q.join("")}());if("\n"===A.charAt(0)){A=A.substr(1)}(function(){var O=A.split(""),q=O.length,x=0,N=false;for(x=1;x<q;x+=1){if(O[x]==="*"&&O[x-1]==="/"&&!N){N=true}else{if(N){if(O[x]===","){O[x]="~PrettyDiffComma~"}else{if(O[x]===";"){O[x]="~PrettyDiffSemi~"}else{if(O[x]==="/"&&O[x-1]==="*"){N=false}}}}}}A=O.join("")}());A=A.replace(/[ \t\r\v\f]+/g," ").replace(/\n (?!\*)/g,"\n").replace(/\s?([;:{}+>])\s?/g,"$1").replace(/\{(\.*):(\.*)\}/g,"{$1: $2}").replace(/\b\*/g," *").replace(/\*\/\s?/g,"*/\n").replace(/\d%\.?\d/g,G);if(p===true){A=s(A)}u();if(p===true){J=A.split("*/");K=J.length;for(M=0;M<K;M+=1){if(J[M].search(/\s*\/\*/)!==0){J[M]=J[M].replace(/@charset\s*("|')?[\w\-]+("|')?;?\s*/gi,"").replace(/(\S|\s)0+(%|in|cm|mm|em|ex|pt|pc)?;/g,w).replace(/:[\w\s\!\.\-%]*\d+\.0*(?!\d)/g,z).replace(/:[\w\s\!\.\-%]* \.\d+/g,H).replace(/ \.?0((?=;)|(?= )|%|in|cm|mm|em|ex|pt|pc)/g," 0px");J[M]=J[M].replace(/\w+(\-\w+)*: ((((\-?(\d*\.\d+)|\d+)[a-zA-Z]+)|0) )+(((\-?(\d*\.\d+)|\d+)[a-zA-Z]+)|0)/g,I).replace(/background\-position: 0px;/g,"background-position: 0px 0px;").replace(/\s+\*\//g,"*/");J[M]=J[M].replace(/\s*[\w\-]+\:\s*(\}|;)/g,L).replace(/\{\s+\}/g,"{}").replace(/\}\s*;\s*\}/g,D).replace(/:\s+#/g,": #").replace(/(\s+;+\n)+/g,"\n")}}A=J.join("*/");if(y===null){y=[""]}else{if(y[0].charAt(y[0].length-1)!==";"){y[0]=y[0]+";\n"}else{y[0]=y[0]+"\n"}}A=y[0].replace(/@charset/i,"@charset")+C(A).replace(/~PrettyDiffColon~/g,":").replace(/~PrettyDiffSemi~/g,";").replace(/~PrettyDiffComma~/g,",")}if(r==="noindent"){A=A.replace(/\s+\/\*/g,"\n/*").replace(/\n\s+\*\//g,"\n*/")}(function(){var U=0,T=[],S=A.split("\n"),R=S.length,Q=[],P=F.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),O=A.length.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),N=0,x="",q=0;for(U=0;U<R;U+=1){if(S[U].charAt(0)==="/"&&S[U].charAt(1)==="*"){for(U;U<R;U+=1){if(S[U].charAt(S[U].length-2)==="*"&&S[U].charAt(S[U].length-1)==="/"){break}}}else{if(S[U].indexOf("url")!==-1&&S[U].indexOf('url("")')===-1&&S[U].indexOf("url('')")===-1&&S[U].indexOf("url()")===-1){T.push(S[U])}}}R=T.length;for(U=0;U<R;U+=1){T[U]=T[U].substr(T[U].indexOf('url("')+5,T[U].length);T[U]=T[U].substr(0,T[U].indexOf('")'))}for(U=0;U<R;U+=1){Q[U]=1;for(q=U+1;q<R;q+=1){if(T[U]===T[q]){Q[U]+=1;T[q]=""}}}for(U=0;U<R;U+=1){if(T[U]!==""){N+=1;Q[U]=Q[U]+"x";if(Q[U]==="1x"){Q[U]="<em>"+Q[U]+"</em>"}T[U]="<li>"+Q[U]+" - "+T[U]+"</li>"}}if(R!==0){x="<h4>List of HTTP requests:</h4><ul>"+T.join("")+"</ul>"}j="<p><strong>Total input size:</strong> <em>"+P+"</em> characters</p><p><strong>Total output size:</strong> <em>"+O+"</em> characters</p><p><strong>Number of HTTP requests:</strong> <em>"+N+"</em></p>"+x}());return A},e=function(al){(function(){if(!al.source||typeof al.source!=="string"){al.source=""}else{al.source=al.source.replace(/var /g,"var prettydiffvar,")}if(al.insize===undefined||isNaN(al.insize)){al.insize=4}if(!al.inchar||al.inchar.length<1||typeof al.inchar!=="string"){al.inchar=" "}if(!al.inlevel||isNaN(al.inlevel)){al.inlevel=0}if(typeof al.preserve!=="boolean"){al.preserve=true}if(!al.preserve_max||isNaN(al.preserve_max)){al.preserve_max=0}if(!al.space||al.space!==true){al.space=false}if(!al.braces||typeof al.braces!=="boolean"){if(al.braces==="allman"){al.braces=true}else{al.braces=false}}if(!al.inarray||al.inarray!==true){al.inarray=false}if(!al.content||al.content!==true){al.content=false}if(!al.comments||typeof al.comments!=="boolean"){if(al.comments==="noindent"){al.comments=true}else{al.comments=false}}}());var av=[0,0],au=[0,0],at=[0,0,0],ar=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],aq=[0,0,0,0,0],ap=[0,0],af=[0,0,0,0],aw=0,z=al.insize,r=al.source,H=al.source.length+1,aj=[],O=[],D="",ag="TK_START_EXPR",y="",ad="",x=-1,A="",I="",M="",Z="",G={previous_mode:"BLOCK",mode:"BLOCK",var_line:false,var_line_reindented:false,in_html_comment:false,if_line:false,in_case:false,eat_next_space:false,indentation_baseline:-1,indentation_level:al.inlevel||0},X=0,S=false,az=false,ax=false,E=false,ay=0,s=[G],aA="",an=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_","$"],v=["+","-","*","/","%","&","++","--","=","+=","-=","*=","/=","%=","==","===","!=","!==",">","<",">=","<=",">>","<<",">>>",">>>=",">>=","<<=","&&","&=","|","||","!","!!",",",":","?","^","^=","|=","::"],C=0,ae="",ak="",R=false,ai=false,aC=false,Y="",q=true,W=true,ah=false,Q=0,aB=false,ab=false,ac=function(n){return n==="[EXPRESSION]"||n==="[INDENTED-EXPRESSION]"},p=function(n){return n.replace(/^\s\s*|\s\s*$/,"")},N=function(t){var n=0;G.eat_next_space=false;if(al.inarray&&ac(G.mode)){return}t=(t===undefined)?true:t;G.if_line=false;if(!O.length){return}while(O[O.length-1]===" "||O[O.length-1]===aA){O.pop()}if(O[O.length-1]!=="\n"||!t){aC=true;O.push("\n")}for(n=0;n<G.indentation_level;n+=1){O.push(aA)}if(G.var_line&&G.var_line_reindented){O.push(aA)}},T=function(n){var t=n.split(/\x0a|\x0d\x0a/),w=t.length,aD=0;N();O.push(t[0]);for(aD=1;aD<w;aD+=1){N();if((/\}|((\!|\=)\=)/).test(t[aD])||(/(;|(\)\s*\{\s*))$/).test(t[aD])||((/^(\s*("|'))/).test(t[aD])&&(/(("|')\s*;?)$/).test(t[aD]))){O.push(t[aD])}else{O.push(" ");O.push(p(t[aD]))}}N()},K=function(n){var w=0,t=n.length;for(w=0;w<t;w+=1){if(n.charAt(w)===" "){af[1]+=1}else{if(n.charAt(w)==="\t"){af[2]+=1}else{if(n.charAt(w)==="\n"){af[0]+=1}else{if(al.source.charAt(w)==="\r"||al.source.charAt(w)==="\f"||al.source.charAt(w)==="\v"){af[3]+=1}}}}}},F=function(n){n=(n===undefined)?false:n;while(O.length&&(O[O.length-1]===" "||O[O.length-1]===aA||(n&&(O[O.length-1]==="\n"||O[O.length-1]==="\r")))){O.pop()}},J=function(){var n=" ";if(G.eat_next_space){G.eat_next_space=false;return}if(O.length){n=O[O.length-1]}if(n!==" "&&n!=="\n"&&n!==aA){O.push(" ")}},V=function(){aC=false;G.eat_next_space=false;O.push(D)},B=function(n){s.push(G);G={previous_mode:(G)?G.mode:"BLOCK",mode:n,var_line:false,var_line_reindented:false,in_html_comment:false,if_line:false,in_case:false,eat_next_space:false,indentation_baseline:-1,indentation_level:((G)?G.indentation_level+((G.var_line&&G.var_line_reindented)?1:0):al.inlevel)}},P=function(n){return n==="[EXPRESSION]"||n==="[INDENTED-EXPRESSION]"||n==="(EXPRESSION)"},u=function(){R=(G.mode==="DO_BLOCK");if(s.length>0){G=s.pop()}},aa=function(w,n){var t=0;for(t=0;t<n.length;t+=1){if(n[t]===w){return true}}return false},L=function(){var n=0,w=0,t=0;for(n=O.length-1;n>=0;n-=1){if(O[n]===":"&&w===0){t+=1}else{if(O[n]==="?"&&w===0){if(t===0){return true}t-=1}else{if(O[n]==="{"||O[n]==="("||O[n]==="["){if(O[n]==="{"&&w===0){return false}w-=1}else{if(O[n]===")"||O[n]==="}"||O[n]==="]"){w+=1}}}}}},U=function(){var n=0;for(n=O.length-2;n>0;n-=1){if(/^(\s+)$/.test(O[n])){O[n]=""}else{if(aa(O[n],v)){O[n+1]=" ";break}}}},ao=function(aD){var t=(aD.indexOf("}")-1),n="",w="";if(aD.charAt(0)==="\n"){n="\n";w=aD.substr(1,t)}else{w=aD.substr(0,t)}return n+w+"}\n"+w+"(function"},am=function(){var aG="",w=0,aD="",aH=false,aI=false,aJ="",aF=false,n="",aE=false,t=0;if(C>=H){return["","TK_EOF"]}ai=false;aG=r.charAt(C);C+=1;aI=al.inarray&&ac(G.mode);if(aI){t=0;while(aG==="\n"||aG==="\r"||aG==="\t"||aG===" "){if(aG==="\n"){F();O.push("\n");aC=true;t=0}else{if(aG==="\t"){t+=4}else{if(aG!=="\r"){t+=1}}}if(C>=H){return["","TK_EOF"]}aG=r.charAt(C);C+=1}if(G.indentation_baseline===-1){G.indentation_baseline=t}if(aC){for(w=0;w<G.indentation_level+1;w+=1){O.push(aA)}if(G.indentation_baseline!==-1){for(w=0;w<t-G.indentation_baseline;w+=1){O.push(" ")}}}}else{(function(){var aK=0;while(aG==="\n"||aG==="\r"||aG==="\t"||aG===" "){if(aG==="\n"){aK+=((al.preserve_max)?(aK<=al.preserve_max)?1:0:1)}if(C>=H){return["","TK_EOF"]}aG=r.charAt(C);C+=1}if(al.preserve){if(aK>1){for(w=0;w<aK;w+=1){N(w===0);aC=true}}}ai=aK>0}());if(C>=H){return["","TK_EOF"]}}if(aa(aG,an)){if(C<H){while(aa(r.charAt(C),an)){aG+=r.charAt(C);C+=1;if(C===H){break}}}if(C!==H&&aG.match(/^\d+[Ee]$/)&&(r.charAt(C)==="-"||r.charAt(C)==="+")){return(function(){var aK=[r.charAt(C)],aL=true;while(C<H){C+=1;if(r.charAt(C).match(/\d|\./)){if(r.charAt(C).match(/\./)){if(aL){aL=false}else{aK.push(" ")}}aK.push(r.charAt(C))}else{break}}aG+=aK.join("");return[aG,"TK_WORD"]}())}if(aG==="in"){return[aG,"TK_OPERATOR"]}if(ai&&ag!=="TK_OPERATOR"&&!G.if_line&&(al.preserve||A!=="var")){N()}return[aG,"TK_WORD"]}if(aG==="("||aG==="["){return[aG,"TK_START_EXPR"]}if(aG===")"||aG==="]"){return[aG,"TK_END_EXPR"]}if(aG==="{"){return[aG,"TK_START_BLOCK"]}if(aG==="}"){return[aG,"TK_END_BLOCK"]}if(aG===";"){return[aG,"TK_SEMICOLON"]}if(aG==="/"){aD="";aH=true;if(r.charAt(C)==="*"){C+=1;if(C<H){while(!(r.charAt(C)==="*"&&r.charAt(C+1)&&r.charAt(C+1)==="/")&&C<H){aG=r.charAt(C);aD+=aG;if(aG==="\x0d"||aG==="\x0a"){aH=false}C+=1;if(C>=H){break}}}C+=2;if(aH){return["/*"+aD+"*/","TK_INLINE_COMMENT"]}return["/*"+aD+"*/","TK_BLOCK_COMMENT"]}if(r.charAt(C)==="/"){aD=aG;while(r.charAt(C)!=="\r"&&r.charAt(C)!=="\n"){aD+=r.charAt(C);C+=1;if(C>=H){break}}C+=1;if(ai){N()}return[aD,"TK_COMMENT"]}}if(aG==="'"||aG==='"'||(aG==="/"&&((ag==="TK_WORD"&&(A==="return"||A==="do"))||(ag==="TK_COMMENT"||ag==="TK_START_EXPR"||ag==="TK_START_BLOCK"||ag==="TK_END_BLOCK"||ag==="TK_OPERATOR"||ag==="TK_EQUALS"||ag==="TK_EOF"||ag==="TK_SEMICOLON")))){aJ=aG;aF=false;n=aG;if(C<H){if(aJ==="/"){aE=false;while(aF||aE||r.charAt(C)!==aJ){n+=r.charAt(C);if(!aF){aF=r.charAt(C)==="\\";if(r.charAt(C)==="["){aE=true}else{if(r.charAt(C)==="]"){aE=false}}}else{aF=false}C+=1;if(C>=H){return[n,"TK_STRING"]}}}else{while(aF||r.charAt(C)!==aJ){n+=r.charAt(C);if(!aF){aF=r.charAt(C)==="\\"}else{aF=false}C+=1;if(C>=H){return[n,"TK_STRING"]}}}}C+=1;n+=aJ;if(aJ==="/"){while(C<H&&aa(r.charAt(C),an)){n+=r.charAt(C);C+=1}}return[n,"TK_STRING"]}if(aG==="#"){if(C<H&&(r.charAt(C)==="0"||r.charAt(C)==="1"||r.charAt(C)==="2"||r.charAt(C)==="3"||r.charAt(C)==="4"||r.charAt(C)==="5"||r.charAt(C)==="6"||r.charAt(C)==="7"||r.charAt(C)==="8"||r.charAt(C)==="9")){return(function(){var aK="#";do{aG=r.charAt(C);aK+=aG;C+=1}while(C<H&&aG!=="#"&&aG!=="=");if(aG!=="#"&&r.charAt(C)==="["&&r.charAt(C+1)==="]"){aK+="[]";C+=2}else{if(aG!=="#"&&r.charAt(C)==="{"&&r.charAt(C+1)==="}"){aK+="{}";C+=2}}return[aK,"TK_WORD"]}())}}if(aG==="<"&&r.substring(C-1,C+3)==="<!--"){C+=3;G.in_html_comment=true;return["<!--","TK_COMMENT"]}if(aG==="-"&&G.in_html_comment&&r.substring(C-1,C+2)==="-->"){G.in_html_comment=false;C+=2;if(ai){N()}return["-->","TK_COMMENT"]}if(aa(aG,v)){while(C<H&&aa(aG+r.charAt(C),v)){aG+=r.charAt(C);C+=1;if(C>=H){break}}if(aG==="="){return[aG,"TK_EQUALS"]}return[aG,"TK_OPERATOR"]}return[aG,"TK_UNKNOWN"]};if(al.source===""){return"Error: no source code supplied to js_beautify.js"}while(z>0){aA+=al.inchar;z-=1}C=0;while(true){aj=am(C);D=aj[0];ak=aj[1];if(ak==="TK_EOF"){break}else{if(ak==="TK_START_EXPR"){aq[4]+=1;ah=false;if(D==="["){Q+=1;if(ag==="TK_WORD"||A===")"){if(A==="continue"||A==="try"||A==="throw"||A==="return"||A==="var"||A==="if"||A==="switch"||A==="case"||A==="default"||A==="for"||A==="while"||A==="break"||A==="function"){J()}B("(EXPRESSION)");V()}else{if(G.mode==="[EXPRESSION]"||G.mode==="[INDENTED-EXPRESSION]"){if(I==="]"&&A===","){if(G.mode==="[EXPRESSION]"){G.mode="[INDENTED-EXPRESSION]";if(!al.inarray){G.indentation_level+=1}}B("[EXPRESSION]");if(!al.inarray){N()}}else{if(A==="["||(A===","&&I==="}")){if(G.mode==="[EXPRESSION]"){G.mode="[INDENTED-EXPRESSION]";if(!al.inarray&&A==="["){G.indentation_level+=1}}B("[EXPRESSION]");if(!al.inarray){N()}}else{if(G.var_line_reindented){B("[EXPRESSION]");G.var_line_reindented=true}else{B("[EXPRESSION]")}}}}else{if(G.var_line_reindented){B("[EXPRESSION]");G.var_line_reindented=true}else{B("[EXPRESSION]")}}}}else{if(G.var_line_reindented){B("(EXPRESSION)");G.var_line_reindented=true}else{B("(EXPRESSION)")}}if(D!=="["||(D==="["&&(ag!=="TK_WORD"&&A!==")"))){if(A===";"||ag==="TK_START_BLOCK"){N()}else{if(ag!=="TK_END_EXPR"&&ag!=="TK_START_EXPR"&&ag!=="TK_END_BLOCK"&&A!=="."){if((ag!=="TK_WORD"&&ag!=="TK_OPERATOR")||(M==="function"&&al.space)){J()}else{if(A==="continue"||A==="try"||A==="throw"||A==="return"||A==="var"||A==="if"||A==="switch"||A==="case"||A==="default"||A==="for"||A==="while"||A==="break"||A==="function"||A==="catch"){J()}}}}V()}if(E&&D==="("){ay+=1}}else{if(ak==="TK_END_EXPR"){aq[4]+=1;if(I==="}"){ah=true}if(ab&&D==="]"){G.indentation_level-=3;s[s.length-1].indentation_level=G.indentation_level-1;if(G.var_line_reindented){B("[INDENTED-EXPRESSION]");G.var_line_reindented=true}else{B("[INDENTED-EXPRESSION]")}ab=false}if(D==="]"&&(al.inarray||aB)){if(A==="}"&&I!=="{"){if(O.length&&O[O.length-1]===aA){O.pop()}V();u()}else{V()}}else{if(D==="]"&&(A==="}"||(G.mode==="[INDENTED-EXPRESSION]"&&A==="]"))){if(A==="}"&&Q===0){G.indentation_level-=1;if(G.var_line_reindented){B("[INDENTED-EXPRESSION]");G.var_line_reindented=true}else{B("[INDENTED-EXPRESSION]")}}else{u()}V()}else{u();V()}}if(E&&D===")"){ay-=1;if(ay===0){E=false}}if(D==="]"){Q-=1;if(Q===0){aB=false;ab=false}}}else{if(ak==="TK_START_BLOCK"){aq[4]+=1;ah=false;if(A==="["){if(!aB){G.indentation_level+=1}aB=true}if(M==="do"){B("DO_BLOCK")}else{if(G.var_line_reindented){B("BLOCK");G.var_line_reindented=true}else{B("BLOCK")}}if(ad==="TK_START_BLOCK"&&!isNaN(x)){x+=1}if(al.braces){if(ag!=="TK_OPERATOR"){if(A==="return"){J()}else{N()}}}else{if(X>1){G.indentation_level+=1;S=true;ax=true}if(ag!=="TK_OPERATOR"&&ag!=="TK_START_EXPR"){G.indentation_level+=1;if(ag==="TK_START_BLOCK"){N()}else{J()}}else{if(Q>0){if(!aB&&!ab){if(A===":"){G.indentation_level+=1}else{G.indentation_level+=3}}else{if(ab&&A===","){G.indentation_level+=1}}if(A===","&&O[O.length-1]===aA){do{O.pop()}while(O[O.length-1]!==",");J()}if(G.var_line_reindented){B("BLOCK");G.var_line_reindented=true}else{B("BLOCK")}aB=true}else{G.indentation_level+=1}}}V();E=false;ay=0}else{if(ak==="TK_END_BLOCK"){aq[4]+=1;if(A==="{"&&(I===","||I==="[")){O[O.length-1]="";if(I==="["){N()}O.push("{");V()}else{if(!aB){u()}else{G.indentation_level-=1;s[s.length-1].indentation_level=G.indentation_level-1;if(G.var_line_reindented){B("TK_END_BLOCK");G.var_line_reindented=true}else{B("TK_END_BLOCK")}aB=false;ab=true}X=0;if(S){ah=true}else{ah=false}if(x===0){x="x"}else{if(x===-1&&S&&ax){G.var_line_reindented=true}else{if(ad==="TK_START_BLOCK"&&!isNaN(x)){x-=1}else{if(x==="a"){if(G.var_line&&!G.var_line_reindented){G.var_line_reindented=true;x=-1}}}}}if(al.braces){if(A==="{"&&aa(I,v)){U()}else{if(x==="y"){ad="";x="a"}N();if(x==="x"){if(G.var_line&&!ax&&!S){G.var_line_reindented=true}x="y"}}V()}else{if(ag==="TK_START_BLOCK"){if(aC){if(O.length&&O[O.length-1]===aA){O.pop()}}else{F()}}else{if(ac(G.mode)&&al.inarray){al.inarray=false;N();al.inarray=true}else{if(x==="y"){ad="";x="a"}N();if(x==="x"){if(G.var_line&&!ax&&!S){G.var_line_reindented=true}x="y"}}}if(!ax&&S&&!G.var_line_reindented){if((G.mode==="(EXPRESSION)"&&!G.var_line)||(G.mode==="BLOCK"&&G.var_line)){if(A!=="}"&&x===-1&&G.mode==="(EXPRESSION)"){O.push(aA)}S=false}}V()}if(!aB&&G.var_line_reindented&&Q===0&&I==="]"&&G.indentation_level===1){G.indentation_level=0}}}else{if(ak==="TK_WORD"){if(D==="alert"){ar[0]+=1}else{if(D==="break"){ar[2]+=1}else{if(D==="case"){ar[4]+=1}else{if(D==="catch"){ar[48]+=1}else{if(D==="continue"){ar[6]+=1}else{if(D==="default"){ar[8]+=1}else{if(D==="delete"){ar[10]+=1}else{if(D==="do"){ar[12]+=1}else{if(D==="document"){ar[44]+=1}else{if(D==="else"){ar[14]+=1}else{if(D==="eval"){ar[16]+=1}else{if(D==="for"){ar[18]+=1}else{if(D==="function"){ar[20]+=1}else{if(D==="if"){ar[22]+=1}else{if(D==="in"){ar[24]+=1}else{if(D==="label"){ar[26]+=1}else{if(D==="new"){ar[28]+=1}else{if(D==="return"){ar[30]+=1}else{if(D==="switch"){ar[32]+=1}else{if(D==="this"){ar[34]+=1}else{if(D==="throw"){ar[50]+=1}else{if(D==="try"){ar[52]+=1}else{if(D==="typeof"){ar[36]+=1}else{if(D==="var"){ar[38]+=1}else{if(D==="while"){ar[40]+=1}else{if(D==="with"){ar[42]+=1}else{if(D==="window"){ar[46]+=1}else{if(D!=="prettydiffvar"){ap[0]+=1;ap[1]+=D.length}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(D!=="var"&&A===";"){ax=false}if(A===";"&&I==="}"&&x==="y"){G.indentation_level-=1}if(A==="{"&&((I===":"&&ax)||(I===")"&&y==="TK_START_BLOCK"&&!ax))){O.push(aA);G.indentation_level+=1;if(D!=="var"&&!isNaN(x)){x+=1}}if(R){J();V();J();R=false}else{if(D==="do"){N();V()}else{if(D==="case"||D==="default"){if(A===":"){if(O.length&&O[O.length-1]===aA){O.pop()}}else{G.indentation_level-=1;N();G.indentation_level+=1}V();G.in_case=true}else{if(D==="function"){if(ax&&(G.var_line||(!G.var_line&&Z==="var"))){X+=1}else{if(!ax){X-=1}}if(ax&&G.var_line&&Z==="var"&&!S&&X===0){G.var_line_reindented=true}}ae="NONE";if(ag==="TK_END_BLOCK"){if(al.braces||(D!=="else"&&D!=="catch"&&D!=="finally")){ae="NEWLINE"}else{ae="SPACE";J()}}else{if(ag==="TK_STRING"||ag==="TK_START_BLOCK"||(ag==="TK_SEMICOLON"&&(G.mode==="BLOCK"||G.mode==="DO_BLOCK"))){ae="NEWLINE"}else{if(ag==="TK_WORD"||(ag==="TK_SEMICOLON"&&P(G.mode))){ae="SPACE"}else{if(ag==="TK_END_EXPR"){J();ae="NEWLINE"}}}}if(G.if_line&&ag==="TK_END_EXPR"){G.if_line=false}if(D==="else"||D==="catch"||D==="finally"){if(ag!=="TK_END_BLOCK"||al.braces){N()}else{F(true);J()}}else{if(ag!=="TK_START_EXPR"&&A!=="="&&A!==","&&(D==="continue"||D==="try"||D==="throw"||D==="return"||D==="var"||D==="if"||D==="switch"||D==="case"||D==="default"||D==="for"||D==="while"||D==="break"||D==="function"||ae==="NEWLINE")){if(A==="return"||A==="throw"||(ag!=="TK_END_EXPR"&&A!==":"&&(ag!=="TK_START_EXPR"||D!=="var"))){if((D==="if"&&M==="else"&&A!=="{")||(D==="function"&&(ag==="TK_OPERATOR"||A==="return"))){J()}else{N()}}else{if(A!==")"&&A!==":"&&(D==="continue"||D==="try"||D==="throw"||D==="return"||D==="var"||D==="if"||D==="switch"||D==="case"||D==="default"||D==="for"||D==="while"||D==="break"||D==="function")){N()}}}else{if(ae==="SPACE"||(E&&A===";")){J()}else{if(A===";"||(ac(G.mode)&&A===","&&I==="}")){N()}}}}if(D==="var"){if(!S&&ag==="TK_START_BLOCK"&&ax){if(X>=0){S=true}}else{if(ag==="TK_START_BLOCK"){if(y==="TK_START_BLOCK"){if(ag==="TK_START_BLOCK"){y="";ad="TK_START_BLOCK";x=0}}else{y="TK_START_BLOCK"}}else{if(ag==="TK_START_BLOCK"&&y===""){y="TK_START_BLOCK"}}}G.var_line=true;G.var_line_reindented=false;ax=true}V();if(D==="typeof"){J()}if(D==="if"){G.if_line=true}if(D==="else"){G.if_line=false}if(D==="for"){E=true}}}Z=M;M=D}}else{if(ak==="TK_SEMICOLON"){aq[3]+=1;if(A==="}"){ax=true}V();G.var_line=false;G.var_line_reindented=false;if(X<2){S=false}y=""}else{if(ak==="TK_STRING"){at[0]+=1;if((D.charAt(0)==='"'&&D.charAt(D.length-1)==='"')||(D.charAt(0)==="'"&&D.charAt(D.length-1)==="'")){at[1]+=D.length-2;at[2]+=2}else{at[1]+=D.length}K(D);if(ag==="TK_START_BLOCK"||ag==="TK_END_BLOCK"||ag==="TK_SEMICOLON"){N()}else{if(ag==="TK_WORD"){J()}}if(al.content){O.push(D.charAt(0)+"text"+D.charAt(0))}else{V()}}else{if(ak==="TK_EQUALS"){aq[0]+=1;aq[1]+=1;J();V();J()}else{if(ak==="TK_OPERATOR"){if(D!==","){aq[0]+=1;aq[1]+=D.length}y="";if(D===","){if(x==="y"&&ag!=="TK_END_BLOCK"){G.indentation_level-=1}if(az){az=false;if(A==="}"){G.var_line_reindented=true}}if(A==="}"&&I==="{"&&Z==="var"&&G.var_line){az=true;G.var_line_reindented=true}aq[2]+=1;if(G.mode!=="(EXPRESSION)"&&I!==":"){ax=false}if(G.var_line&&G.mode!=="(EXPRESSION)"){G.var_line_reindented=true;V();if(M!=="prettydiffvar"){N()}}else{if(ag==="TK_END_BLOCK"&&G.mode!=="(EXPRESSION)"){V();if(A==="}"&&(Q===0||aB)){N()}else{J()}}else{if(G.mode!=="(EXPRESSION)"&&(Q===0||(aB&&(G.mode==="BLOCK"||G.mode==="TK_END_BLOCK"||G.mode==="OBJECT"||L())))){V();N()}else{V();J()}}}}else{if(A==="return"||A==="throw"){J();V()}else{if(D==="::"){V()}else{if(D==="--"||D==="++"||D==="!"||((D==="-"||D==="+")&&(ag==="TK_START_BLOCK"||ag==="TK_START_EXPR"||ag==="TK_EQUALS"||ag==="TK_OPERATOR"||A==="continue"||A==="try"||A==="throw"||A==="return"||A==="var"||A==="if"||A==="switch"||A==="case"||A==="default"||A==="for"||A==="while"||A==="break"||A==="function"))){q=false;W=false;if(A===";"&&P(G.mode)){q=true}if(ag==="TK_WORD"&&(A==="continue"||A==="try"||A==="throw"||A==="return"||A==="var"||A==="if"||A==="switch"||A==="case"||A==="default"||A==="for"||A==="while"||A==="break"||A==="function")){q=true}if(G.mode==="BLOCK"&&(A==="{"||A===";")){N()}}else{if(D==="."){q=false}}}}}if(D!==","&&D!==":"&&(D!=="-"||(D==="-"&&A!=="continue"&&A!=="try"&&A!=="throw"&&A!=="return"&&A!=="var"&&A!=="if"&&A!=="switch"&&A!=="case"&&A!=="default"&&A!=="for"&&A!=="while"&&A!=="break"&&A!=="function"))){if(q){J()}V();if(W){J()}}else{if(D===":"){if(G.in_case){V();N();G.in_case=false}else{if(L()){J();V();J();G.mode="OBJECT"}else{if(G.in_case){J();V();J()}else{if(I!=="case"&&I!=="default"&&A!=="case"&&A!=="default"){V();J()}}}}}}q=true;W=true}else{if(ak==="TK_BLOCK_COMMENT"){av[0]+=1;av[1]+=D.length;K(D);if(al.comments){for(aw=O.length-1;aw>0;aw-=1){if(O[aw]===aA||O[aw]===" "){O[aw]=""}else{break}}O.push("\n");V();O.push("\n")}else{T(D)}}else{if(ak==="TK_INLINE_COMMENT"){av[0]+=1;av[1]+=D.length;K(D);V();if(P(G.mode)){J()}else{if(al.comments){O.push("\n")}else{N()}}}else{if(ak==="TK_COMMENT"){au[0]+=1;au[1]+=D.length;K(D);if(al.comments){for(aw=O.length-1;aw>0;aw-=1){if(O[aw]===aA){O[aw]=""}else{break}}}else{if(ai){N()}else{J()}}V();N()}else{if(ak==="TK_UNKNOWN"){aq[0]+=1;aq[1]+=D.length;K(D);if(A==="return"||A==="throw"){J()}V()}}}}}}}}}}}}}}I=A;ag=ak;A=D}Y=O.join("").replace(/var prettydiffvar\,\s*/g,"var ").replace(/^(\s+)/,"").replace(/(\s+)$/,"").replace(/\s*\}\(function/g,ao).replace(/\n( |\t)+\n/g,"\n\n").replace(/ \n/g,"\n");(function(){var aM=0,aL=0,aH=1,aG=1,aF=0,aE=0,aD=0,t=0,n=[],aK=[],w,aI=function(aN,aO){if(aO===0){return"0.00%"}return((aN/aO)*100).toFixed(2)+"%"},aJ=function(aP,aN,aS,aR,aQ){var aO=["<tr><th>Keyword '"];aO.push(aP);aO.push("'</th><td ");aO.push(aN);aO.push(">");aO.push(aS);aO.push("</td><td>");aO.push(aI(aS,ar[54]));aO.push("</td><td>");aO.push(aI(aS,aQ[0]));aO.push("</td><td>");aO.push(aR);aO.push("</td><td>");aO.push(aI(aR,ar[55]));aO.push("</td><td>");aO.push(aI(aR,aQ[1]));aO.push("</td></tr>");return aO.join("")};if(Y.length<=H){aL=H}else{aL=Y.length}for(aM=0;aM<aL;aM+=1){if(al.source.charAt(aM)===" "){aF+=1}else{if(al.source.charAt(aM)==="\t"){aE+=1}else{if(al.source.charAt(aM)==="\n"){aH+=1}else{if(al.source.charAt(aM)==="\r"||al.source.charAt(aM)==="\f"||al.source.charAt(aM)==="\v"){t+=1}}}}if(Y.charAt(aM)==="\n"){aG+=1}}if(ar[0]>0){n[0]=" class='bad'"}else{n[0]=""}if(ar[6]>0){n[1]=" class='bad'"}else{n[1]=""}if(ar[16]>0){n[2]=" class='bad'"}else{n[2]=""}if(ar[42]>0){n[3]=" class='bad'"}else{n[3]=""}aF=aF-af[1];aE=aE-af[2];t=t-af[3];aD=((aH-1-af[0])+aF+aE+t);aq.push(at[2]+aq[0]+aq[2]+aq[3]+aq[4]);aq.push(at[2]+aq[1]+aq[2]+aq[3]+aq[4]);av.push(av[0]+au[0]);av.push(av[1]+au[1]);ar[1]=ar[0]*5;ar[3]=ar[2]*5;ar[5]=ar[4]*4;ar[7]=ar[6]*8;ar[9]=ar[8]*7;ar[11]=ar[10]*6;ar[13]=ar[12]*2;ar[15]=ar[14]*4;ar[17]=ar[16]*4;ar[19]=ar[18]*3;ar[21]=ar[20]*8;ar[23]=ar[22]*2;ar[25]=ar[24]*2;ar[27]=ar[26]*5;ar[29]=ar[28]*3;ar[31]=ar[30]*6;ar[33]=ar[32]*6;ar[35]=ar[34]*4;ar[37]=ar[36]*6;ar[39]=ar[38]*3;ar[41]=ar[40]*5;ar[43]=ar[42]*4;ar[45]=ar[44]*8;ar[47]=ar[46]*6;ar[49]=ar[48]*5;ar[51]=ar[50]*5;ar[53]=ar[52]*3;ar[54]=ar[0]+ar[2]+ar[4]+ar[6]+ar[8]+ar[10]+ar[12]+ar[14]+ar[16]+ar[18]+ar[20]+ar[22]+ar[24]+ar[26]+ar[28]+ar[30]+ar[32]+ar[34]+ar[36]+ar[38]+ar[40]+ar[42]+ar[44]+ar[46]+ar[48]+ar[50]+ar[52];ar[55]=ar[1]+ar[3]+ar[5]+ar[7]+ar[9]+ar[11]+ar[13]+ar[15]+ar[17]+ar[19]+ar[21]+ar[23]+ar[25]+ar[27]+ar[29]+ar[31]+ar[33]+ar[35]+ar[37]+ar[39]+ar[41]+ar[43]+ar[45]+ar[47]+ar[49]+ar[51]+ar[53];aK.push(av[2]+at[0]+aq[5]+ar[54]+ap[0]+aD);aK.push(av[3]+at[1]+aq[6]+ar[55]+ap[1]+aD);w=["<div id='doc'>"];w.push("<table class='analysis' summary='JavaScript character size comparison'><caption>JavaScript data report</caption><thead><tr><th>Data Label</th><th>Input</th><th>Output</th><th>Literal Increase</th><th>Percentage Increase</th></tr>");w.push("</thead><tbody><tr><th>Total Character Size</th><td>");w.push(H);w.push("</td><td>");w.push(Y.length);w.push("</td><td>");w.push(Y.length-H);w.push("</td><td>");w.push((((Y.length-H)/Y.length)*100).toFixed(2));w.push("%</td></tr><tr><th>Total Lines of Code</th><td>");w.push(aH);w.push("</td><td>");w.push(aG);w.push("</td><td>");w.push(aG-aH);w.push("</td><td>");w.push((((aG-aH)/aH)*100).toFixed(2));w.push("%</td></tr></tbody></table>");w.push("<table class='analysis' summary='JavaScript component analysis'><caption>JavaScript component analysis</caption><thead><tr><th>JavaScript Component</th><th>Component Quantity</th><th>Percentage Quantity from Section</th>");w.push("<th>Percentage Qauntity from Total</th><th>Character Length</th><th>Percentage Length from Section</th><th>Percentage Length from Total</th></tr></thead><tbody>");w.push("<tr><th>Total Accounted</th><td>");w.push(aK[0]);w.push("</td><td>100.00%</td><td>100.00%</td><td>");w.push(aK[1]);w.push("</td><td>100.00%</td><td>100.00%</td></tr><tr><th colspan='7'>Comments</th></tr><tr><th>Block Comments</th><td>");w.push(av[0]);w.push("</td><td>");w.push(aI(av[0],av[2]));w.push("</td><td>");w.push(aI(av[0],aK[0]));w.push("</td><td>");w.push(av[1]);w.push("</td><td>");w.push(aI(av[1],av[3]));w.push("</td><td>");w.push(aI(av[1],aK[1]));w.push("</td></tr><tr><th>Inline Comments</th><td>");w.push(au[0]);w.push("</td><td>");w.push(aI(au[0],av[2]));w.push("</td><td>");w.push(aI(au[0],aK[0]));w.push("</td><td>");w.push(au[1]);w.push("</td><td>");w.push(aI(au[1],av[3]));w.push("</td><td>");w.push(aI(au[1],aK[1]));w.push("</td></tr><tr><th>Comment Total</th><td>");w.push(av[2]);w.push("</td><td>100.00%</td><td>");w.push(aI(av[2],aK[0]));w.push("</td><td>");w.push(av[3]);w.push("</td><td>100.00%</td><td>");w.push(aI(av[3],aK[1]));w.push("</td></tr><tr><th colspan='7'>Whitespace Outside of Strings and Comments</th></tr><tr><th>New Lines</th><td>");w.push(aH-1-af[0]);w.push("</td><td>");w.push(aI(aH-1-af[0],aD));w.push("</td><td>");w.push(aI(aH-1-af[0],aK[0]));w.push("</td><td>");w.push(aH-1-af[0]);w.push("</td><td>");w.push(aI(aH-1-af[0],aD));w.push("</td><td>");w.push(aI(aH-1-af[0],aK[1]));w.push("</td></tr><tr><th>Spaces</th><td>");w.push(aF);w.push("</td><td>");w.push(aI(aF,aD));w.push("</td><td>");w.push(aI(aF,aK[0]));w.push("</td><td>");w.push(aF);w.push("</td><td>");w.push(aI(aF,aD));w.push("</td><td>");w.push(aI(aF,aK[1]));w.push("</td></tr><tr><th>Tabs</th><td>");w.push(aE);w.push("</td><td>");w.push(aI(aE,aD));w.push("</td><td>");w.push(aI(aE,aK[0]));w.push("</td><td>");w.push(aE);w.push("</td><td>");w.push(aI(aE,aD));w.push("</td><td>");w.push(aI(aE,aK[1]));w.push("</td></tr><tr><th>Other Whitespace</th><td>");w.push(t);w.push("</td><td>");w.push(aI(t,aD));w.push("</td><td>");w.push(aI(t,aK[0]));w.push("</td><td>");w.push(t);w.push("</td><td>");w.push(aI(t,aD));w.push("</td><td>");w.push(aI(t,aK[1]));w.push("</td></tr><tr><th>Total Whitespace</th><td>");w.push(aD);w.push("</td><td>100.00%</td><td>");w.push(aI(aD,aK[0]));w.push("</td><td>");w.push(aD);w.push("</td><td>100.00%</td><td>");w.push(aI(aD,aK[1]));w.push("</td></tr><tr><th colspan='7'>Strings</th></tr><tr><th>Strings</th><td>");w.push(at[0]);w.push("</td><td>100.00%</td><td>");w.push(aI(at[0],aK[0]));w.push("</td><td>");w.push(at[1]);w.push("</td><td>100.00%</td><td>");w.push(aI(at[1],aK[1]));w.push("</td></tr><tr><th colspan='7'>Syntax Characters</th></tr><tr><th>Quote Characters</th><td>");w.push(at[2]);w.push("</td><td>");w.push(aI(at[2],aq[5]));w.push("</td><td>");w.push(aI(at[2],aK[0]));w.push("</td><td>");w.push(at[2]);w.push("</td><td>");w.push(aI(at[2],aq[6]));w.push("</td><td>");w.push(aI(at[2],aK[1]));w.push("</td></tr><tr><th>Commas</th><td>");w.push(aq[2]);w.push("</td><td>");w.push(aI(aq[2],aq[5]));w.push("</td><td>");w.push(aI(aq[2],aK[0]));w.push("</td><td>");w.push(aq[2]);w.push("</td><td>");w.push(aI(aq[2],aq[6]));w.push("</td><td>");w.push(aI(aq[2],aK[1]));w.push("</td></tr><tr><th>Containment Characters</th><td>");w.push(aq[4]);w.push("</td><td>");w.push(aI(aq[4],aq[5]));w.push("</td><td>");w.push(aI(aq[4],aK[0]));w.push("</td><td>");w.push(aq[4]);w.push("</td><td>");w.push(aI(aq[4],aq[6]));w.push("</td><td>");w.push(aI(aq[4],aK[1]));w.push("</td></tr><tr><th>Semicolons</th><td>");w.push(aq[3]);w.push("</td><td>");w.push(aI(aq[3],aq[5]));w.push("</td><td>");w.push(aI(aq[3],aK[0]));w.push("</td><td>");w.push(aq[3]);w.push("</td><td>");w.push(aI(aq[3],aq[6]));w.push("</td><td>");w.push(aI(aq[3],aK[1]));w.push("</td></tr><tr><th>Operators</th><td>");w.push(aq[0]);w.push("</td><td>");w.push(aI(aq[0],aq[5]));w.push("</td><td>");w.push(aI(aq[0],aK[0]));w.push("</td><td>");w.push(aq[1]);w.push("</td><td>");w.push(aI(aq[1],aq[6]));w.push("</td><td>");w.push(aI(aq[1],aK[1]));w.push("</td></tr><tr><th>Total Syntax Characters</th><td>");w.push(aq[5]);w.push("</td><td>100.00%</td><td>");w.push(aI(aq[5],aK[0]));w.push("</td><td>");w.push(aq[6]);w.push("</td><td>100.00%</td><td>");w.push(aI(aq[6],aK[1]));w.push("</td></tr>");w.push("<tr><th colspan='7'>Keywords</th></tr>");w.push(aJ("alert",n[0],ar[0],ar[1],aK));w.push(aJ("break","",ar[2],ar[3],aK));w.push(aJ("case","",ar[4],ar[5],aK));w.push(aJ("catch","",ar[48],ar[49],aK));w.push(aJ("continue",n[1],ar[6],ar[7],aK));w.push(aJ("default","",ar[8],ar[9],aK));w.push(aJ("delete","",ar[10],ar[11],aK));w.push(aJ("do","",ar[12],ar[13],aK));w.push(aJ("document","",ar[44],ar[45],aK));w.push(aJ("else","",ar[14],ar[15],aK));w.push(aJ("eval",n[2],ar[16],ar[17],aK));w.push(aJ("for","",ar[18],ar[19],aK));w.push(aJ("function","",ar[20],ar[21],aK));w.push(aJ("if","",ar[22],ar[23],aK));w.push(aJ("in","",ar[24],ar[25],aK));w.push(aJ("label","",ar[26],ar[27],aK));w.push(aJ("new","",ar[28],ar[29],aK));w.push(aJ("return","",ar[30],ar[31],aK));w.push(aJ("switch","",ar[32],ar[33],aK));w.push(aJ("this","",ar[34],ar[35],aK));w.push(aJ("throw","",ar[50],ar[51],aK));w.push(aJ("typeof","",ar[36],ar[37],aK));w.push(aJ("var","",ar[38],ar[39],aK));w.push(aJ("while","",ar[40],ar[41],aK));w.push(aJ("with",n[3],ar[42],ar[43],aK));w.push(aJ("window","",ar[46],ar[47],aK));w.push(aJ("try","",ar[52],ar[53],aK));w.push("<tr><th>Total Keywords</th><td>");w.push(ar[54]);w.push("</td><td>100.00%</td><td>");w.push(aI(ar[55],aK[0]));w.push("</td><td>");w.push(ar[55]);w.push("</td><td>100.00%</td><td>");w.push(aI(ar[55],aK[1]));w.push("</td></tr>");w.push("<tr><th colspan='7'>Variables and Other Keywords</th></tr><tr><th>Variable Instances</th><td>");w.push(ap[0]);w.push("</td><td>100.00%</td><td>");w.push(aI(ap[0],aK[0]));w.push("</td><td>");w.push(ap[1]);w.push("</td><td>100.00%</td><td>");w.push(aI(ap[1],aK[1]));w.push("</td></tr></tbody></table></div>");j=w.join("")}());return Y},g=function(u){var r=0,y=(typeof u.source==="string")?u.source.split(""):"Error: no content supplied to markup.",s=(u.comments!=="comments"&&u.comments!=="beautify"&&u.comments!=="diff")?"":u.comments,z=(u.presume_html===true)?true:false,q=(u.top_comments===true)?true:false,p=function(){var x=0,B=[],A=y.length;for(x=r;x<A;x+=1){if(y[x]===">"){break}else{B.push(y[x]);y[x]=""}}r=x;y[r]=B.join("").replace(/\s+/g," ").replace(/\s*,\s+/g,", ").replace(/\s*\/\s*/g,"/").replace(/\s*=\s*/g,"=").replace(/ \="/g,'="').replace(/ \='/g,"='")+">"},n=function(){var A=y.length,x=0,B=[];for(x=r;x<A;x+=1){if(y[x]==="-"&&y[x+1]==="-"&&y[x+2]===">"){y[x]="";y[x+1]="";y[x+2]="";r=x+2;break}else{if(s==="beautify"||s==="comments"){B.push(y[x])}y[x]=""}}if(s==="comments"||s==="beautify"){y[r]=" "+B.join("")+"-->"}},v=function(N){var M=0,L=[],K=0,I="",G="",F="</"+N,D="",A=y.length,x=(/^(\s*\/+<!\[+[A-Z]+\[+)/),E=(/(\/+\]+>\s*)$/),C=(/^(\s*<\!\-\-)/),H=(/(\/+\-\->\s*)$/),J="",B="",O=u.source;if(typeof c!=="function"){return}for(M=r;M<A;M+=1){if((O.slice(M,M+F.length)).toLowerCase()===F){K=M;break}}for(M=r;M<K;M+=1){if(y[M-1]!==">"){L.push(y[M]);y[M]=""}else{break}}D=L[0];L.splice(0,1);if((/\s/).test(L[0])){L.splice(0,1)}for(K;K<A;K+=1){if(y[K]!==">"){G=G+y[K];y[K]=""}else{break}}G=G+">";r=K;if(L.join("")===""){y[r]=D+G;return}I=L.join("");if(s!=="beautify"){if(x.test(I)){J=I.match(x)[0];I=I.replace(x,"")}else{if(C.test(I)){J=I.match(C)[0];I=I.replace(C,"")}}if(E.test(I)){B=I.match(E)[0];I=I.replace(E,"")}else{if(H.test(I)){B=I.match(H)[0];I=I.replace(H,"")}}if(N==="style"){I=J+c({source:I,level:3,type:"css",alter:true,fcomment:q})+B}else{I=J+c({source:I,level:2,type:"javascript",alter:true,fcomment:q})+B}}A=I.length;for(M=0;M<A;M+=1){if((/\s/).test(I.charAt(M))){I=I.substr(M+1)}else{break}}y[r]=D+I+G},w=function(B){var C=y.length,A=0,x=[],D=0;for(D=r;D<C;D+=1){if(y[D-1]+y[D]===B){break}}for(A=r;A<D;A+=1){x.push(y[A]);y[A]=""}y[r]=x.join("");r=D},t=function(){var B=y.length,A=0,x=[];for(A=r;A<B;A+=1){if(y[A]==="<"){break}else{x.push(y[A]);y[A]=""}}r=A-1;y[r]=x.join("").replace(/\s+/g," ")};(function(){var A=[],x=0,D=y.length,B="",C=u.source;for(r=0;r<y.length;r+=1){if((C.slice(r,r+7)).toLowerCase()==="<script"){A=[];for(x=r+8;x<D;x+=1){if(C.charAt(x)===">"){break}A.push(C.charAt(x))}B=A.join("").toLowerCase().replace(/'/g,'"');if(s!=="beautify"&&s!=="diff"){p()}if(B.indexOf('type="')===-1||B.indexOf('type="text/javascript"')!==-1||B.indexOf('type="application/javascript"')!==-1||B.indexOf('type="application/x-javascript"')!==-1||B.indexOf('type="text/ecmascript"')!==-1||B.indexOf('type="application/ecmascript"')!==-1){v("script")}}else{if((C.slice(r,r+6)).toLowerCase()==="<style"){A=[];for(x=r+7;x<D;x+=1){if(C.charAt(x)===">"){break}A.push(C.charAt(x))}B=A.join("").toLowerCase().replace(/'/g,'"');if(s!=="beautify"&&s!=="diff"){p()}if(B.indexOf('type="')===-1||B.indexOf('type="text/css"')!==-1){v("style")}}else{if(C.slice(r,r+4)==="<!--"&&y[r+4]!=="#"){n()}else{if(C.slice(r,r+5)==="<?php"){w("?>")}else{if(C.slice(r,r+2)==="<%"){w("%>")}else{if((y[r]==="<"&&y[r+1]!=="!")||(y[r]==="<"&&y[r+1]==="!"&&y[r+2]!=="-")){p()}else{if(y[r]===undefined){y[r]=""}else{if(y[r-1]!==undefined&&y[r-1].charAt(y[r-1].length-1)===">"){t()}}}}}}}}}}());return(function(){var I=0,H=[],G=false,F=0,D=0,C="",A=[],x=y.length,B=["area","base","basefont","br","col","embed","eventsource","frame","hr","img","input","keygen","link","meta","param","progress","source","wbr"],E=B.length;for(I=0;I<x;I+=1){if(y[I]!==""){A.push(y[I])}}y=[];x=A.length;for(I=0;I<x;I+=1){G=(/^\s+$/).test(A[I]);if(!G||(G&&!(/^\s+$/).test(A[I+1]))){y.push(A[I])}}x=y.length;for(I=2;I<x;I+=1){G=false;if(z===true){H=[];D=y[I].length;for(F=1;F<D;F+=1){if(/[a-z]/i.test(y[I].charAt(F))){H.push(y[I].charAt(F))}else{break}}for(F=0;F<E;F+=1){if(H.join("")===B[F]&&y[I].charAt(0)==="<"){G=true;break}}}if((/^\s+$/).test(y[I-1])){if(!G&&(y[I].charAt(0)==="<"&&y[I].charAt(1)==="/"&&y[I-1]!==" "&&y[I-2].charAt(0)==="<"&&y[I-2].charAt(1)==="/"&&y[I-3].charAt(0)!=="<")&&(y[I].charAt(0)==="<"&&y[I].charAt(y[I].length-2)!=="/")&&(y[I].charAt(0)==="<"&&y[I].charAt(y[I].length-2)!=="/"&&y[I-2].charAt(0)==="<"&&y[I-2].charAt(1)==="/")){y[I-1]=""}}}C=y.join("").replace(/-->\s+/g,"--> ").replace(/\s+<\?php/g," <?php").replace(/\s+<%/g," <%").replace(/\s*>\s+/g,"> ").replace(/\s+<\s*/g," <").replace(/\s+\/>/g,"/>").replace(/\s+>/g,">");if((/\s/).test(C.charAt(0))){C=C.slice(1,C.length)}return C}())},l=function(q){(function(){if(!q.source||typeof q.source!=="string"){q.source=""}if(q.insize===undefined||isNaN(q.insize)){q.insize=4}if(typeof q.inchar!=="string"||q.inchar.length<1){q.inchar=" "}if(!q.mode||q.mode!=="diff"){q.mode="beautify"}if(!q.comments||q.comments!=="indent"){q.comments="noindent"}if(!q.style||q.style!=="indent"){q.style="noindent"}if(typeof q.html!=="boolean"){q.html=false}if(typeof q.content!=="boolean"){q.content=false}if(typeof q.force_indent!=="boolean"){q.force_indent=false}}());var r=[],u=[],t=[],v=[],p=[],s=[],n=q.source;(function(){var x=function(z){z=z.replace(/</g,"\nprettydiffcdatas");return z},w=function(z){z=z.replace(/>/g,"\nprettydiffcdatae");return z};n=n.replace(/\/+<!\[+[A-Z]+\[+/g,x).replace(/\/+\]+>/g,w)}());(function(){var w=(function(){var M=0,L=0,K=q.source.length,J=[],I=0,H=-1,G=0,F=0,E=-1,D=0,C=0,B=false,A=false,z=0,y=[">"],x=false,N=0;for(M=0;M<K;M+=1){if(n.substr(M,7).toLowerCase()==="<script"){for(L=M+7;L<K;L+=1){if(n.charAt(L)+n.charAt(L+1)+n.charAt(L+2).toLowerCase()+n.charAt(L+3).toLowerCase()+n.charAt(L+4).toLowerCase()+n.charAt(L+5).toLowerCase()+n.charAt(L+6).toLowerCase()+n.charAt(L+7).toLowerCase()+n.charAt(L+8)==="<\/script>"){if(/></.test(n.substr(M,L))){H+=2}else{H+=3}M=L+8;break}}}else{if(n.substr(M,6).toLowerCase()==="<style"){for(L=M+6;L<K;L+=1){if(n.charAt(L)+n.charAt(L+1)+n.charAt(L+2).toLowerCase()+n.charAt(L+3).toLowerCase()+n.charAt(L+4).toLowerCase()+n.charAt(L+5).toLowerCase()+n.charAt(L+6).toLowerCase()+n.charAt(L+7)==="</style>"){if(/></.test(n.substr(M,L))){H+=2}else{H+=3}M=L+7;break}}}else{if(n.substr(M,5)==="<?php"){for(L=M+5;L<K;L+=1){if(n.charAt(L-1)==="?"&&n.charAt(L)===">"){M=L;H+=1;break}}}else{if(n.charAt(M)==="<"&&n.charAt(M+1)==="%"){for(L=M+2;L<K;L+=1){if(n.charAt(L-1)==="%"&&n.charAt(L)===">"){M=L;H+=1;break}}}else{if(n.charAt(M)==="<"&&n.charAt(M+1)==="!"&&n.charAt(M+2)==="["){for(L=M+2;L<K;L+=1){if(n.charAt(L-1)==="]"&&n.charAt(L)===">"){M=L;H+=1;break}}}else{if(n.charAt(M)==="<"&&n.charAt(M+1)==="!"&&/[A-Z]|\[/.test(n.charAt(M+2))){for(L=M+3;L<K;L+=1){if(n.charAt(L)==="<"&&K>L+3&&n.charAt(L+1)==="!"&&n.charAt(L+2)==="-"&&n.charAt(L+3)==="-"){for(N=L+4;N<K;N+=1){if(n.charAt(N-2)==="-"&&n.charAt(N-1)==="-"&&n.charAt(N)===">"){L=N;break}}}else{if(n.charAt(L)===">"&&y[y.length-1]===">"&&y.length===1){H+=1;if(x){J.push([M,L,H,M])}x=false;M=L;y=[">"];break}else{if(n.charAt(L)==="<"){y.push(">");x=true}else{if(n.charAt(L)===">"&&y.length>1){y.pop();x=true}else{if(n.charAt(L)==="["){y.push("]")}else{if(n.charAt(L)==="]"){y.pop()}else{if(n.charAt(L)==='"'){if(y[y.length-1]==='"'){y.pop()}else{y.push('"')}}else{if(n.charAt(L)==="'"){if(y[y.length-1]==="'"){y.pop()}else{y.push("'")}}}}}}}}}}}else{if(n.charAt(M)===n.charAt(M+1)&&(n.charAt(M)==='"'||n.charAt(M)==="'")){M+=1}else{if(n.charAt(M-1)==="="&&(n.charAt(M)==='"'||n.charAt(M)==="'")){A=false;for(C=M-1;C>0;C-=1){if((n.charAt(C)==='"'&&n.charAt(M)==='"')||(n.charAt(C)==="'"&&n.charAt(M)==="'")||n.charAt(C)==="<"){break}else{if(n.charAt(C)===">"){A=true;break}}}if(!A){B=false;for(L=M+1;L<K;L+=1){if(n.substr(L,7).toLowerCase()==="<script"){for(z=L+7;z<K;z+=1){if(n.charAt(z)+n.charAt(z+1)+n.charAt(z+2).toLowerCase()+n.charAt(z+3).toLowerCase()+n.charAt(z+4).toLowerCase()+n.charAt(z+5).toLowerCase()+n.charAt(z+6).toLowerCase()+n.charAt(z+7).toLowerCase()+n.charAt(z+8)==="<\/script>"){L=z+8;break}}}else{if(n.substr(L,6).toLowerCase()==="<style"){for(z=L+6;z<K;z+=1){if(n.charAt(z)+n.charAt(z+1)+n.charAt(z+2).toLowerCase()+n.charAt(z+3).toLowerCase()+n.charAt(z+4).toLowerCase()+n.charAt(z+5).toLowerCase()+n.charAt(z+6).toLowerCase()+n.charAt(z+7)==="</style>"){L=z+7;break}}}else{if(n.substr(L,5)==="<?php"){for(z=L+5;z<K;z+=1){if(n.charAt(z-1)==="?"&&n.charAt(z)===">"){L=z;break}}}else{if(n.charAt(L)==="<"&&n.charAt(L+1)==="%"){for(z=L+5;z<K;z+=1){if(n.charAt(z-1)==="%"&&n.charAt(z)===">"){L=z;break}}}else{if(n.charAt(L)===">"||n.charAt(L)==="<"){B=true}else{if((n.charAt(L-1)!=="\\"&&((n.charAt(M)==='"'&&n.charAt(L)==='"')||(n.charAt(M)==="'"&&n.charAt(L)==="'")))||L===K-1){if(E!==H&&D===1){D=0;H-=1;E-=1}else{if(E===H){for(I=G+1;I>M;I+=1){if(!/\s/.test(n.charAt(I))){break}}F=I;if(G<M&&D!==1){D=1;H+=1;E+=1}}}if(B){J.push([M,L,H,F])}M=L;break}}}}}}}}}else{if(n.charAt(M)==="<"){if(n.charAt(M+1)==="!"&&n.charAt(M+2)==="-"&&n.charAt(M+3)==="-"){for(L=M+4;L<n.length;L+=1){if(n.charAt(L)==="-"&&n.charAt(L+1)==="-"&&n.charAt(L+2)===">"){break}}H+=1;M=L+2}else{H+=1;F=M}}else{if(n.charAt(M+1)==="<"&&n.charAt(M)!==">"){for(L=M;L>0;L-=1){if(!/\s/.test(n.charAt(L))&&n.charAt(L)!==">"){H+=1;E+=1;F=M;break}else{if(n.charAt(L)===">"){if(H!==E){E+=1;G=M}break}}}}else{if(n.charAt(M)===">"){E+=1;G=M}}}}}}}}}}}}return J}());(function(){var I=0,H=0,F=w.length,E=0,D=0,C=0,B=0,A=0,z=0,x=0,G=n.split("");for(I=0;I<F;I+=1){A=w[I][0]+1;D=w[I][1];C=w[I][2];z=w[I][3];for(E=A;E<D;E+=1){B=0;if(G[E]==="<"){G[E]="[";for(H=E;H>z;H-=1){B+=1;if(/\s/.test(G[H])){for(x=H-1;x>z;x-=1){if(!/\s/.test(G[x])){if(G[x]!=="="){B+=1}else{if(/\s/.test(G[x-1])){B-=1}}H=x;break}}}}if(/\s/.test(G[A])){B-=1}p.push(["<",B,C])}else{if(G[E]===">"){G[E]="]";for(H=E;H>z;H-=1){B+=1;if(/\s/.test(G[H])){for(x=H-1;x>z;x-=1){if(!/\s/.test(G[x])){if(G[x]!=="="){B+=1}else{if(/\s/.test(G[x-1])){B-=1}}H=x;break}}}}if(/\s/.test(G[A])){B-=1}p.push([">",B,C])}}}}n=G.join("")}())}());(function(){var A=0,D=g({source:n,comments:q.mode,presume_html:q.html}).split(""),z="",w=function(G){var F=[],y=G.length,K=G.split("").reverse(),J=0,I="",H=true,E=D.length;if(A>0&&D[A-1]===" "){I=" "}for(A;A<E;A+=1){F.push(D[A]);if(G==="]>"){if(D[A]==="["){H=false}if(H&&D[A]===">"){K=[">"];y=1}}if(F[F.length-1]===K[0]){if(y===1){return I+F.join("")}for(J=0;J<y;J+=1){if(K[J]!==F[F.length-(J+1)]){break}}if(J===y){return I+F.join("")}}}return I+F.join("")},C=[],B=function(H){var I=0,G="",F=0,E="",y=D.length;for(I=A;I<y;I+=1){if(E===""&&D[I-1]!=="\\"){if(D[I]==="/"&&D[I+1]&&D[I+1]==="/"){E="//"}else{if(D[I]==="/"&&D[I+1]&&D[I+1]==="*"){E="/*"}else{if(D[I]==="'"||D[I]==='"'||D[I]==="/"){if(D[I]==="/"){for(F=I-1;F>0;F-=1){if(!/\s/.test(D[F])){break}}if(D[F]===")"||D[F]==="]"||D[F]==="}"||/\w/.test(D[F])){E=""}else{E="/"}}else{E=D[I]}}}}}else{if(D[I-1]!=="\\"&&((E==="'"&&D[I]==="'")||(E==='"'&&D[I]==='"')||(E==="/"&&D[I]==="/")||(E==="//"&&(D[I]==="\n"||(D[I-4]&&D[I-4]==="/"&&D[I-3]==="/"&&D[I-2]==="-"&&D[I-1]==="-"&&D[I]===">")))||(E==="/*"&&D[I-1]==="*"&&D[I]==="/"))){E=""}}if(((H==="script"&&E==="")||H==="style")&&D[I]==="<"&&D[I+1]==="/"&&D[I+2].toLowerCase()==="s"){if(H==="script"&&(D[I+3].toLowerCase()==="c"&&D[I+4].toLowerCase()==="r"&&D[I+5].toLowerCase()==="i"&&D[I+6].toLowerCase()==="p"&&D[I+7].toLowerCase()==="t")){break}else{if(H==="style"&&(D[I+3].toLowerCase()==="t"&&D[I+4].toLowerCase()==="y"&&D[I+5].toLowerCase()==="l"&&D[I+6].toLowerCase()==="e")){break}}}else{if(H==="other"&&D[I]==="<"){break}else{G=G+D[I]}}}A=I-1;if(q.content){if(G.charAt(0)===" "&&G.charAt(G.length-1)===" "){G=" text "}else{if(G.charAt(0)===" "){G=" text"}else{if(G.charAt(G.length-1)===" "){G="text "}else{G="text"}}}}return G},x=D.length;for(A=0;A<x;A+=1){if(r[r.length-1]==="T_script"&&!(D[A]==="<"&&D[A+1]==="/"&&D[A+2].toLowerCase()==="s"&&D[A+3].toLowerCase()==="c"&&D[A+4].toLowerCase()==="r"&&D[A+5].toLowerCase()==="i"&&D[A+6].toLowerCase()==="p"&&D[A+7].toLowerCase()==="t")){u.push(B("script"));r.push("T_content")}else{if(r[r.length-1]==="T_style"&&!(D[A]==="<"&&D[A+1]==="/"&&D[A+2].toLowerCase()==="s"&&D[A+3].toLowerCase()==="t"&&D[A+4].toLowerCase()==="y"&&D[A+5].toLowerCase()==="l"&&D[A+6].toLowerCase()==="e")){u.push(B("style"));r.push("T_content")}else{if(D[A]==="<"&&D[A+1]==="!"&&D[A+2]==="-"&&D[A+3]==="-"&&D[A+4]!=="#"&&r[r.length-1]!=="T_style"){u.push(w("-->"));r.push("T_comment")}else{if(D[A]==="<"&&D[A+1]==="!"&&D[A+2]==="-"&&D[A+3]==="-"&&D[A+4]==="#"){u.push(w("-->"));r.push("T_ssi")}else{if(D[A]==="<"&&D[A+1]==="!"&&D[A+2]!=="-"){u.push(w("]>"));r.push("T_sgml")}else{if(D[A]==="<"&&D[A+1]==="?"&&D[A+2].toLowerCase()==="x"&&D[A+3].toLowerCase()==="m"&&D[A+4].toLowerCase()==="l"){u.push(w("?>"));r.push("T_xml")}else{if(D[A]==="<"&&D[A+1]==="?"&&D[A+2].toLowerCase()==="p"&&D[A+3].toLowerCase()==="h"&&D[A+4].toLowerCase()==="p"){u.push(w("?>"));r.push("T_php")}else{if(D[A]==="<"&&D[A+1].toLowerCase()==="s"&&D[A+2].toLowerCase()==="c"&&D[A+3].toLowerCase()==="r"&&D[A+4].toLowerCase()==="i"&&D[A+5].toLowerCase()==="p"&&D[A+6].toLowerCase()==="t"){u.push(w(">"));z=u[u.length-1].toLowerCase().replace(/'/g,'"');if(z.charAt(z.length-2)==="/"){r.push("T_singleton")}else{if(z.indexOf(' type="')===-1||z.indexOf(' type="text/javascript"')!==-1||z.indexOf(' type="application/javascript"')!==-1||z.indexOf(' type="application/x-javascript"')!==-1||z.indexOf(' type="text/ecmascript"')!==-1||z.indexOf(' type="application/ecmascript"')!==-1){r.push("T_script")}else{r.push("T_tag_start")}}}else{if(D[A]==="<"&&D[A+1].toLowerCase()==="s"&&D[A+2].toLowerCase()==="t"&&D[A+3].toLowerCase()==="y"&&D[A+4].toLowerCase()==="l"&&D[A+5].toLowerCase()==="e"){u.push(w(">"));z=u[u.length-1].toLowerCase().replace(/'/g,'"');if(z.indexOf(' type="')===-1||z.indexOf(' type="text/css"')!==-1){r.push("T_style")}else{r.push("T_tag_start")}}else{if(D[A]==="<"&&D[A+1]==="%"){u.push(w("%>"));r.push("T_asp")}else{if(D[A]==="<"&&D[A+1]==="/"){u.push(w(">"));r.push("T_tag_end")}else{if(D[A]==="<"&&r[r.length-1]!=="T_script"&&r[r.length-1]!=="T_style"&&(D[A+1]!=="!"||D[A+1]!=="?"||D[A+1]!=="/"||D[A+1]!=="%")){for(C=A;C<x;C+=1){if(D[C]!=="?"&&D[C]!=="%"){if(D[C]==="/"&&D[C+1]===">"){u.push(w("/>"));r.push("T_singleton");break}else{if(D[C+1]===">"){u.push(w(">"));r.push("T_tag_start");break}}}}}else{if(D[A-1]===">"&&(D[A]!=="<"||(D[A]!==" "&&D[A+1]!=="<"))){if(r[r.length-1]==="T_script"){u.push(B("script"));r.push("T_content")}else{if(r[r.length-1]==="T_style"){u.push(B("style"));r.push("T_content")}else{if(D[A-1]+D[A]+D[A+1]!=="> <"){u.push(B("other"));r.push("T_content")}}}}}}}}}}}}}}}}}}());(function(){var w=0,x=r.length;for(w=0;w<x;w+=1){u[w]=u[w].replace(/\s*prettydiffcdatas/g,"<").replace(/\s*prettydiffcdatae/g,">");if(r[w]==="T_sgml"||r[w]==="T_xml"){t.push("parse")}else{if(r[w]==="T_asp"||r[w]==="T_php"||r[w]==="T_ssi"){t.push("singleton")}else{if(r[w]==="T_comment"){t.push("comment")}else{if((r[w]==="T_content"&&u[w]!==" ")&&r[w-1]==="T_script"){t.push("external")}else{if(r[w]==="T_content"&&r[w-1]==="T_style"){t.push("external")}else{if(r[w]==="T_content"&&u[w].charAt(0)===" "&&u[w].charAt(u[w].length-1)===" "){t.push("mixed_both")}else{if(r[w]==="T_content"&&u[w].charAt(0)===" "&&u[w].charAt(u[w].length-1)!==" "){t.push("mixed_start")}else{if(r[w]==="T_content"&&u[w].charAt(0)!==" "&&u[w].charAt(u[w].length-1)===" "){t.push("mixed_end")}else{if(r[w]==="T_content"){t.push("content")}else{if(r[w]==="T_tag_start"){t.push("start")}else{if(r[w]==="T_style"){u[w]=u[w].replace(/\s+/g," ");t.push("start")}else{if(r[w]==="T_script"){u[w]=u[w].replace(/\s+/g," ");t.push("start")}else{if(r[w]==="T_singleton"){t.push("singleton")}else{if(r[w]==="T_tag_end"){t.push("end")}}}}}}}}}}}}}}}s=[].concat(u)}());(function(){var y=0,w="",z=0,x=0;if(!q.html){return}x=t.length;for(z=0;z<x;z+=1){if(t[z]==="start"){y=u[z].indexOf(" ");if(u[z].length===3){w=u[z].charAt(1).toLowerCase()}else{if(y===-1){w=u[z].slice(1,u[z].length-1).toLowerCase()}else{if(y===0){w=u[z].slice(1,u[z].length);y=w.indexOf(" ");w=w.slice(1,y).toLowerCase()}else{w=u[z].slice(1,y).toLowerCase()}}}if(w==="area"||w==="base"||w==="basefont"||w==="br"||w==="col"||w==="embed"||w==="eventsource"||w==="frame"||w==="hr"||w==="img"||w==="input"||w==="keygen"||w==="link"||w==="meta"||w==="param"||w==="progress"||w==="source"||w==="wbr"){t[z]="singleton";r[z]="T_singleton"}}}}());(function(){var w=0,A=function(C){var D=0,B=0;if(C==="start"){B+=1}for(D=w-1;D>-1;D-=1){if(t[D]==="start"&&v[D]==="x"){B+=1}else{if(t[D]==="end"){B-=1}else{if(t[D]==="start"&&v[D]!=="x"){return v.push(v[D]+B)}}}if(D===0){if(t[D]!=="start"){return v.push(0)}if(t[w]==="mixed_start"||t[w]==="content"||(t[w]==="singleton"&&u[w].charAt(0)!==" ")){return v.push("x")}return v.push(1)}}},z=function(){var C=function(D){for(D;D>0;D-=1){if(v[D]!=="x"){return v.push(v[D]+1)}}},B=function(){var D=0,G=false,E=function(){var I=0,H=function(){var K=0,L=0,J=0;for(L=w-1;L>0;L-=1){if((t[L]==="start"&&t[L+1]==="start"&&v[L]===v[L+1]-1)||(t[L]==="start"&&t[L-1]!=="start"&&v[L]===v[L-1])){break}}for(K=L+1;K<w;K+=1){if(t[K]==="mixed_start"&&t[K+1]==="end"){J+=1}}if(t[L-1]==="end"&&v[L-1]!=="x"&&J===0){J+=1}if(J!==0){if(v[w-1]==="x"){return J-1}return J}for(L;L<w;L+=1){if(t[L]==="start"){J+=1}else{if(t[L]==="end"){J-=1}}}return J};for(I=w-1;I>0;I-=1){if(t[I]!=="mixed_end"||(t[I]==="start"&&v[I]!=="x")){if(t[I-1]==="end"){G=true;if(t[w-1]==="mixed_both"&&v[w-1]===v[I]-H()){return v.push(v[I]-(H()+1))}if(t[w-2]==="start"&&(t[w-1]==="mixed_end"||t[w-1]==="mixed_both")){return v.push(v[I])}if(v[I]!=="x"){if(t[I]==="mixed_both"&&I!==w-H()){if(I===w-1){return v.push(v[I]-1)}return v.push(v[I]+H())}if(t[w-1]==="mixed_end"&&H()===0){return v.push(v[I]-1)}if(v[w-1]==="x"&&(t[w-2]!=="end"||(t[w-2]==="end"&&v[w-2]!=="x"))){return v.push(v[I]+H())}return v.push(v[I]-H())}}else{G=false;return}}}},F=function(){var H=0,I=0;for(I=w;I>0;I-=1){if(t[I]==="end"){H+=1}else{if(t[I]==="start"){H-=1}}if(H===0){return I}}};if(t[w-1]==="end"&&v[w-1]!=="x"){if(t[w-2]==="start"&&v[w-2]==="x"){for(D=w-2;D>0;D-=1){if(v[D]!=="x"){break}}if(t[D]==="start"){return A("end")}return v.push(v[D]-1)}if(t[w-2]==="start"&&v[w-2]!=="x"){return v.push(v[w-2]-1)}return v.push(v[w-1]-1)}E();if(G){return}return(function(){var I=0,H=0;for(H=F();H>0;H-=1){if(t[H]==="start"){I+=1}else{if(t[H]==="end"){I-=1}}if(v[H]!=="x"){if(t[H]==="end"&&t[H-1]==="start"&&v[H-1]!=="x"){return v.push(v[H])}if(v[w-1]==="x"&&u[w].charAt(0)!==" "&&t[w-1]!=="mixed_end"&&(t[w-2]!=="end"||v[w-2]!=="x")&&(t[w-3]!=="end"||v[w-3]!=="x")){return v.push("x")}return v.push(v[H]+(I-1))}}I=0;for(H=w;H>-1;H-=1){if(t[H]==="start"){I+=1}else{if(t[H]==="end"){I-=1}}}return v.push(I)}())};if(t[w-1]==="end"||t[w-1]==="mixed_both"||t[w-1]==="mixed_end"){return B()}if(t[w-1]==="mixed_start"||t[w-1]==="content"){return v.push("x")}if(t[w-1]==="external"){return(function(){var D=0,E=-1;for(D=w-2;D>0;D-=1){if(t[D]==="start"){E+=1}else{if(t[D]==="end"){E-=1}}if(v[D]!=="x"){break}}if(t[D]==="end"){E+=1}return v.push(v[D]+E)}())}if(u[w].charAt(0)!==" "){if(t[w-1]==="singleton"||t[w-1]==="content"){return v.push("x")}return(function(){var D=0,E=0;for(D=w-1;D>0;D-=1){if(t[D]==="singleton"&&v[D]==="x"&&((t[D-1]==="singleton"&&v[D-1]!=="x")||t[D-1]!=="singleton")){E+=1}if(v[D]!==0&&v[D]!=="x"&&t[w-1]!=="start"){if(t[D]==="mixed_both"||t[D]==="mixed_start"){return v.push(v[D]-E)}if(v[D]===E||(t[D]==="singleton"&&(t[D-1]==="content"||t[D-1]==="mixed_start"))){return v.push(v[D])}return v.push(v[D]-1)}if(t[D]==="start"&&v[D]==="x"){return C(D)}if(t[w-1]==="start"){return v.push(v[D])}}return v.push(0)}())}return A("end")},y=function(F){var D=0,C=0,B=0,E=function(){var I=0,G=1,H=-1;for(I=D;I>0;I-=1){if(t[I]==="start"){H-=1;if(v[I]==="x"){G+=1}}else{if(t[I]==="end"){H+=1;G-=1}}if(v[I]===0){D=0;for(C=w-1;C>I;C-=1){if(t[C]==="start"){D+=1}else{if(t[C]==="end"){D-=1}}}if(D>0){if(v[I+1]==="x"){return v.push(((H)*-1)-1)}if(t[I]!=="external"&&(q.comments!=="noindent"||(q.comments==="noindent"&&t[I]!=="comment"))){return v.push((H+1)*-1)}}else{for(D=w-1;D>0;D-=1){if(v[D]!=="x"){return v.push(v[D])}}}}if(v[I]!=="x"&&v[w-1]!=="x"){if(t[I]==="start"||t[I]==="end"){return v.push(v[I]+G)}return v.push(v[I]+G-1)}if(H===-1&&v[I]==="x"){break}else{if(H===1&&v[I]!=="x"&&t[I]!=="mixed_start"&&t[I]!=="content"){if(t[I-1]==="mixed_end"||(v[w-1]==="x"&&t[w-1]==="end"&&t[I]!=="end")){return v.push(v[I]-H-1)}return v.push(v[I]-H)}}if(H===0&&v[I]!=="x"){return A("start")}}return A("start")};(function(){var G=0;if(F===1){D=0;C=0;B=0}else{for(G=F-1;G>0;G-=1){if(t[G]!=="comment"){D=G;break}}if(D===1){C=0;B=0}else{for(G=D-1;G>0;G-=1){if(t[G]!=="comment"){C=G;break}}if(C===1){B=0}else{for(G=C-1;G>0;G-=1){if(t[G]!=="comment"){B=G;break}}}}}}());if(w-1===0&&t[0]==="start"){return v.push(1)}if(t[D]==="mixed_start"||t[D]==="content"||t[w-1]==="mixed_start"||t[w-1]==="content"||(t[w]==="singleton"&&(t[w-1]==="start"||t[w-1]==="singleton"||t[w-1]==="end")&&u[w].charAt(0)!==" ")){return v.push("x")}if((t[w-1]==="comment"&&v[w-1]===0)||((t[B]==="mixed_start"||t[B]==="content")&&t[C]==="end"&&(t[D]==="mixed_end"||t[D]==="mixed_both"))){return A("start")}if(t[w-1]==="comment"&&v[w-1]!=="x"){return v.push(v[w-1])}if((t[D]==="start"&&v[D]==="x")||(t[D]!=="mixed_end"&&t[D]!=="mixed_both"&&v[D]==="x")){if(v[w-1]==="x"&&u[w].charAt(0)!==" "&&t[w-1]!=="start"&&u[w-1].charAt(u[w-1].length-1)!==" "){if((t[w-1]==="end"&&t[w-2]==="end")||(t[w-1]==="end"&&t[w]!=="end"&&t[w+1]!=="mixed_start"&&t[w+1]!=="content")){return A("start")}return v.push("x")}return E()}if(t[D]==="end"&&v[D]!=="x"&&(t[D-1]!=="start"||(t[D-1]==="start"&&v[D-1]!=="x"))){if(v[D]<0){return A("start")}return v.push(v[D])}if(t[B]!=="mixed_start"&&t[B]!=="content"&&(t[D]==="mixed_end"||t[D]==="mixed_both")){return(function(){var I=0,H=0,J=0,G=0;for(I=D;I>0;I-=1){if(t[I]==="end"){H+=1}if(t[I]==="start"){J+=1}if(v[I]===0&&I!==0){G=I}if(t[D]==="mixed_both"&&v[I]!=="x"){return v.push(v[I])}if(t[I]!=="comment"&&t[I]!=="content"&&t[I]!=="external"&&t[I]!=="mixed_end"&&v[I]!=="x"){if(t[I]==="start"&&v[I]!=="x"){if(t[w-1]!=="end"){return v.push(v[I]+(J-H))}if((v[I]===v[I-1]&&t[I-1]!=="end"&&v[I+1]!=="x")||(t[w-2]==="start"&&v[w-2]!=="x"&&v[w-1]==="x")){return v.push(v[I]+1)}if(J<=1){return v.push(v[I])}}else{if(H>0){if(J>1){if(G!==0){return A("start")}return v.push(v[I]+1)}return v.push(v[I]-H+1)}}return v.push(v[I]+J)}}return A("start")}())}if(t[D]==="start"&&v[D]!=="x"){return(function(){var G=0;for(G=w-1;G>-1;G-=1){if(t[G]!=="comment"&&t[G]!=="content"&&t[G]!=="external"&&t[G]!=="mixed_end"){if(t[w+1]&&u[w].charAt(0)!==" "&&(t[w+1]==="mixed_end"||t[w+1]==="content"||(u[w+1].charAt(0)!==" "&&t[w+1]==="singleton"))){return v.push("x")}return v.push(v[G]+1)}}return v.push(0)}())}if(u[w].charAt(0)!==" "&&(t[w-1]==="singleton"||t[w-1]==="content"||t[w-1]==="mixed_start")){return v.push("x")}return A("start")},x=function(){var B;if(t[w]!=="start"&&v[w-1]==="x"&&t[w-1]!=="content"&&u[w].charAt(0)!==" "&&t[w-1]!=="mixed_start"&&t[w-1]!=="mixed_end"){return v.push("x")}if(t[w]!=="start"&&u[w]===" "){u[w]="";return v.push("x")}if(t[w-1]!=="comment"){y(w)}else{for(B=w-1;B>0;B-=1){if(t[B]!=="comment"){break}}y(B+1)}};(function(){var C=0,B="",G=0,F=0,E=p.length,D=[];for(C=0;C<E;C+=1){B=p[C][0];G=p[C][1];F=p[C][2];if(typeof u[F]==="string"){if(u[F].charAt(0)===" "){G+=1}D=u[F].split("");if(B==="<"&&D[G]==="["){D[G]="<"}else{if(B===">"&&D[G]==="]"){D[G]=">"}}u[F]=D.join("")}}}());(function(){var H=false,C=false,J=[],I=[],B=(/^(\s*\/*<\!\[+[A-Z]+\[+)/),E=(/(\/*\]+>\s*)$/),D=(/^(\s*<\!\-\-)/),G=(/(\-\->\s*)$/),F=t.length;for(w=0;w<F;w+=1){H=false;C=false;J=[""];I=[""];if(w===0){v.push(0)}else{if(q.force_indent){if(t[w]==="end"){if(t[w-1]==="start"){v.push(v[w-1])}else{v.push(v[w-1]-1)}}else{if(t[w-1]==="start"){v.push(v[w-1]+1)}else{v.push(v[w-1])}if(t[w]==="mixed_end"){u[w]=u[w].slice(0,u[w].length-1)}}}else{if(t[w]==="external"){if(/\s*<\!\-\-\s*\-\->\s*/.test(u[w])){if(u[w].charAt(0)===" "){u[w]=u[w].substr(1)}if(u[w].charAt(u[w].length-1)===" "){u[w]=u[w].substr(0,u[w].length-1)}t[w]="comment";r[w]="T_comment";if(q.comments!=="noindent"){x()}else{v.push(0)}}else{if(r[w-1]==="T_script"){v.push(0);if(D.test(u[w])){H=true;u[w]=u[w].replace(D,"")}else{if(B.test(u[w])){J=B.exec(u[w]);u[w]=u[w].replace(B,"")}}if(G.test(u[w])&&!/(\/\/\-\->\s*)$/.test(u[w])){C=true;u[w]=u[w].replace(G,"")}else{if(E.test(u[w])){I=E.exec(u[w]);u[w]=u[w].replace(E,"")}}if(typeof e==="function"){u[w]=e({source:u[w],insize:i.insize,inchar:i.inchar,preserve:true,preserve_max:1,inlevel:0,space:true,braces:q.indent,inarray:false,comments:q.comments})}if(H){u[w]="<!--\n"+u[w]}else{if(J[0]!==""){u[w]=J[0]+"\n"+u[w]}}if(C){u[w]=u[w]+"\n-->"}else{if(I[0]!==""){u[w]=u[w]+"\n"+I[0]}}u[w]=u[w].replace(/(\/\/(\s)+\-\->(\s)*)$/,"//-->").replace(/^(\s*)/,"").replace(/(\s*)$/,"")}else{if(r[w-1]==="T_style"){v.push(0);if(D.test(u[w])){H=true;u[w]=u[w].replace(D,"")}else{if(B.test(u[w])){J=B.exec(u[w]);u[w]=u[w].replace(B,"")}}if(G.test(u[w])&&!/(\/\/\-\->\s*)$/.test(u[w])){C=true;u[w].replace(G,"")}else{if(E.test(u[w])){I=E.exec(u[w]);u[w]=u[w].replace(E,"")}}if(typeof k==="function"){u[w]=k({source:u[w],size:q.insize,character:q.inchar,comment:q.comments,alter:true})}if(H){u[w]="<!--\n"+u[w]}else{if(J[0]!==""){u[w]=J[0]+"\n"+u[w]}}if(C){u[w]=u[w]+"\n-->"}else{if(I[0]!==""){u[w]=u[w]+"\n"+I[0]}}u[w]=u[w].replace(/^(\s*)/,"").replace(/(\s*)$/,"")}}}}else{if(t[w]==="comment"&&q.comments!=="noindent"){x()}else{if(t[w]==="comment"&&q.comments==="noindent"){v.push(0)}else{if(t[w]==="content"){v.push("x")}else{if(t[w]==="parse"){x()}else{if(t[w]==="mixed_both"){x()}else{if(t[w]==="mixed_start"){x()}else{if(t[w]==="mixed_end"){u[w]=u[w].slice(0,u[w].length-1);v.push("x")}else{if(t[w]==="start"){x()}else{if(t[w]==="end"){z()}else{if(t[w]==="singleton"){x()}}}}}}}}}}}}}}}())}());(function(){var A=(function(){var D=0,C=q.insize,F=q.inchar,E=[];for(D=0;D<C;D+=1){E.push(F)}return E.join("")}()),z=0,w=u.length,B=function(K){var J=0,I=(typeof v[z]==="number")?v[z]:0,H=0,G=0,D=[],C="",F=[],E=function(){var M=C,L=H;if(L===0){return M}do{M+=A;L-=1}while(L>0);return M};for(J=0;J<I;J+=1){D.push(A)}if(t[z]==="mixed_both"){K=K.slice(0,K.length-1)}C=D.join("");K="\n"+C+K;if(t[z]==="parse"&&/\[\s*</.test(u[z])){u[z]=u[z].replace(/\[\s+</g,"[<");F=u[z].split("");I=F.length;for(J=0;J<I;J+=1){if(F[J]==="["){H+=1;F[J]="[\n"+E()}else{if(F[J]==="]"){H-=1;F[J]="\n"+E()+"]"}else{if(F[J]==="<"&&I>J+3&&F[J+1]==="!"&&F[J+2]==="-"&&F[J+3]==="-"){if(J===0||F[J-1].charAt(0)!=="["){F[J]="\n"+E()+"<"}for(G=J+4;G<I;G+=1){if(F[G-2]==="-"&&F[G-1]==="-"&&F[G]===">"){J=G;break}}}else{if(F[J]==="<"&&(J===0||F[J-1].charAt(0)!=="[")){F[J]="\n"+E()+"<"}}}}}K=F.join("").replace(/\s>/g,">")}return K},y=function(E){var F=0,D=0,C=[];for(D=z;D>0;D-=1){if(v[D]!=="x"){break}}for(F=0;F<v[D];F+=1){C.push(A)}E="\n"+C.join("")+E;return E},x=function(E){var F=0,D=0,H=0,G="",C=[];if(v[z-1]==="x"){for(D=z-1;D>0;D-=1){if(t[D]==="start"){F+=1}else{if(t[D]==="end"){F-=1}}if(v[D]!=="x"){break}}if(t[D]==="end"){F+=1}for(H=0;H<v[D]+F;H+=1){C.push(A)}}else{for(H=0;H<v[z-1]+1;H+=1){C.push(A)}}G=C.join("");return"\n"+G+E.replace(/\n/g,"\n"+G)};for(z=0;z<w;z+=1){if(t[z]==="end"&&(q.force_indent||(t[z-1]!=="content"&&t[z-1]!=="mixed_start"))){if(u[z].charAt(0)===" "){u[z]=u[z].substr(1)}if(v[z]!=="x"&&t[z-1]!=="start"){u[z]=y(u[z])}}else{if(t[z]==="external"&&q.style==="indent"){u[z]=x(u[z])}else{if(v[z]!=="x"&&(t[z-1]!=="content"&&(t[z-1]!=="mixed_start"||q.force_indent))){if(u[z].charAt(0)===" "){u[z]=u[z].substr(1)}u[z]=B(u[z])}}}}}());(function(){var A=[],B=t.length,C=s.join("").length,D=(function(){var G=0,F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],K=[],J=[],I=[],H=[];for(G=0;G<B;G+=1){switch(t[G]){case"end":F[1]+=1;L[1]+=s[G].length;if(s[G].charAt(0)===" "&&t[G-1]==="singleton"){L[1]-=1;L[2]+=1}break;case"singleton":F[2]+=1;L[2]+=s[G].length;if(((u[G].indexOf("<embed ")!==-1||u[G].indexOf("<img ")!==-1||u[G].indexOf("<iframe ")!==-1)&&(u[G].indexOf("src")!==-1&&u[G].indexOf('src=""')===-1&&u[G].indexOf("src=''")===-1))||(u[G].indexOf("<link ")!==-1&&u[G].indexOf("rel")!==-1&&u[G].indexOf("canonical")===-1)){A.push(u[G])}break;case"comment":F[3]+=1;L[3]+=s[G].length;break;case"content":F[4]+=1;L[4]+=s[G].length;break;case"mixed_start":F[5]+=1;L[5]+=(s[G].length-1);break;case"mixed_end":F[6]+=1;L[6]+=(s[G].length-1);break;case"mixed_both":F[7]+=1;L[7]+=(s[G].length-2);break;case"parse":F[10]+=1;L[10]+=s[G].length;break;case"external":F[17]+=1;L[17]+=s[G].length;if(((u[G].indexOf("<script")!==-1||u[G].indexOf("<embed ")!==-1||u[G].indexOf("<img ")!==-1||u[G].indexOf("<iframe ")!==-1)&&(u[G].indexOf("src")!==-1&&u[G].indexOf('src=""')===-1&&u[G].indexOf("src=''")===-1))||(u[G].indexOf("<link ")!==-1&&u[G].indexOf("rel")!==-1&&u[G].indexOf("canonical")===-1)){A.push(u[G])}break;default:switch(r[G]){case"T_tag_start":F[0]+=1;L[0]+=s[G].length;if(((u[G].indexOf("<embed ")!==-1||u[G].indexOf("<img ")!==-1||u[G].indexOf("<iframe ")!==-1)&&(u[G].indexOf("src")!==-1&&u[G].indexOf('src=""')===-1&&u[G].indexOf("src=''")===-1))||(u[G].indexOf("<link ")!==-1&&u[G].indexOf("rel")!==-1&&u[G].indexOf("canonical")===-1)){A.push(u[G])}break;case"T_sgml":F[8]+=1;L[8]+=s[G].length;break;case"T_xml":F[9]+=1;L[9]+=s[G].length;break;case"T_ssi":F[11]+=1;L[11]+=s[G].length;break;case"T_asp":F[12]+=1;L[12]+=s[G].length;break;case"T_php":F[13]+=1;L[13]+=s[G].length;break;case"T_script":F[15]+=1;L[15]+=s[G].length;if(u[G].indexOf(" src")!==-1){A.push(u[G])}break;case"T_style":F[16]+=1;L[16]+=s[G].length;break}}}K=[F[0]+F[1]+F[2]+F[3],F[4]+F[5]+F[6]+F[7],F[15]+F[16]+F[17],F[11]+F[12]+F[13]];J=[L[0]+L[1]+L[2]+L[3],L[4]+L[5]+L[6]+L[7],L[15]+L[16]+L[17],L[11]+L[12]+L[13]];I=[K[0],K[0],K[0],K[0],K[1],K[1],K[1],K[1],F[10],F[10],F[10],K[3],K[3],K[3],K[3],K[2],K[2],K[2]];H=[J[0],J[0],J[0],J[0],J[1],J[1],J[1],J[1],L[10],L[10],L[10],J[3],J[3],J[3],J[3],J[2],J[2],J[2]];F[2]=F[2]-K[3];L[2]=L[2]-J[3];return[F,L,K,J,I,H]}()),x=function(F){var I=function(L){if(D[3][L]===0){return"0.00%"}return"100.00%"},H=function(L){if(D[2][L]===0){return"0.00%"}return"100.00%"},G=[],K="",J="";switch(F){case 0:if((D[2][F]/B)<0.7){K="bad"}else{K="good"}if((D[3][F]/C)>0.4){J="bad"}else{J="good"}break;case 1:if((D[2][F]/B)<0.25){K="bad"}else{K="good"}if((D[3][F]/C)<0.6){J="bad"}else{J="good"}break;case 2:if((D[2][F]/B)>0.05){K="bad"}else{K="good"}if((D[3][F]/C)>0.05){J="bad"}else{J="good"}break}G=["</th><td>"];G.push(D[2][F]);G.push("</td><td>");G.push(H(F));G.push("</td><td class='");G.push(K);G.push("'>");G.push(((D[2][F]/B)*100).toFixed(2));G.push("%</td><td>");G.push(D[3][F]);G.push("</td><td>");G.push(I(F));G.push("</td><td class='");G.push(J);G.push("'>");G.push(((D[3][F]/C)*100).toFixed(2));G.push("%</td></tr>");return G.join("")},y=(function(){var F=0,L="",K=[],I=[],H=(function(){var N=0,R=["*** Start Tags","End Tags","Singleton Tags","Comments","Flat String","String with Space at Start","String with Space at End","String with Space at Start and End","SGML","XML","Total Parsing Declarations","SSI","ASP","PHP","Total Server Side Tags","*** Script Tags","*** Style Tags","JavaScript/CSS Code"],Q=[],O="",M="",P=D[0].length;for(N=0;N<P;N+=1){if(D[4][N]===0){O="0.00%"}else{if(D[0][N]===D[4][N]){O="100.00%"}else{O=((D[0][N]/D[4][N])*100).toFixed(2)+"%"}}if(D[5][N]===0){M="0.00%"}else{if(D[1][N]===D[5][N]){M="100.00%"}else{M=((D[1][N]/D[5][N])*100).toFixed(2)+"%"}}Q=["<tr><th>"+R[N]];Q.push("</th><td>");Q.push(D[0][N]);Q.push("</td><td>");Q.push(O);Q.push("</td><td>");Q.push(((D[0][N]/B)*100).toFixed(2));Q.push("%</td><td>");Q.push(D[1][N]);Q.push("</td><td>");Q.push(M);Q.push("</td><td>");Q.push(((D[1][N]/C)*100).toFixed(2));Q.push("%</td></tr>");if(N===3){Q.push("<tr><th>Total Common Tags");Q.push(x(0));Q.push("<tr><th colspan='7'>Content</th></tr>")}else{if(N===7){Q.push("<tr><th>Total Content");Q.push(x(1));Q.push("<tr><th colspan='7'>Parsing Declarations</th></tr>")}else{if(N===10){Q.push("<tr><th colspan='7'>Server Side Tags</th></tr>")}else{if(N===14){Q.push("<tr><th colspan='7'>Style and Script Code/Tags</th></tr>")}else{if(N===17){Q.push("<tr><th>Total Script and Style Tags/Code");Q.push(x(2))}}}}}R[N]=Q.join("")}return R.join("")}()),G=["<div id='doc'>"],J=A.length;G.push((function(){var Z=0,X=0,W=B,V=[],U=[],T=0,S=0,R=[],Q=[],P=[],O="",N=[],aa=[],Y="",M=function(ab){return ab.replace(/(\,|\.|\?|\!|\:) /," ")};for(Z=0;Z<W;Z+=1){if(t[Z]==="content"){R.push(" ");R.push(u[Z])}else{if(t[Z]==="mixed_start"){R.push(u[Z])}else{if(t[Z]==="mixed_both"){R.push(u[Z].substr(0,u[Z].length))}else{if(t[Z]==="mixed_end"){R.push(" ");R.push(u[Z].substr(0,u[Z].length))}}}}}Y=R.join("");if(Y.length===0){return""}Y=Y.substr(1,Y.length).toLowerCase();aa=Y.replace(/\&nbsp;?/gi," ").replace(/[a-z](\,|\.|\?|\!|\:) /gi,M).replace(/(\(|\)|"|\{|\}|\[|\])/g,"").replace(/\s+/g," ").split(" ");W=aa.length;for(Z=0;Z<W;Z+=1){if(aa[Z]!==""){V.push([1,aa[Z]]);T+=1;for(X=Z+1;X<W;X+=1){if(aa[X]===aa[Z]){V[V.length-1][0]+=1;aa[X]="";T+=1}}}}W=V.length;for(Z=0;Z<W;Z+=1){S=Z;for(X=Z+1;X<W;X+=1){if(V[X][0]>V[S][0]&&V[X][1]!==""){S=X}}O=V[S][1];if(O.length<3||O.length>30||!(/[a-zA-Z]/).test(O)||(/&\#?\w+;/).test(O)||O==="the"||O==="and"||O==="for"||O==="are"||O==="this"||O==="from"||O==="with"||O==="that"){Q.push(V[S])}else{Q.push(V[S]);P.push(V[S])}if(V[S]!==V[Z]){V[S]=V[Z]}else{V[S]=[0,""]}if(P.length===11){break}}if(Q.length<2){return""}X=Q.length;for(Z=0;Z<X;Z+=1){if(Z>9){Q[Z]=""}else{N[Z]=(Q[Z+1])?(Q[Z][0]/Q[Z+1][0]).toFixed(2):"1.00";Q[Z]="<tr><th>"+(Z+1)+"</th><td>"+Q[Z][1].replace(/&/g,"&amp;")+"</td><td>"+Q[Z][0]+"</td><td>"+N[Z]+"</td><td>"+((Q[Z][0]/T)*100).toFixed(2)+"%</td></tr>"}}if(Q[10]){Q[10]=""}if(P.length>10){X=10}else{X=P.length}N=[];for(Z=0;Z<X;Z+=1){N[Z]=(P[Z+1])?(P[Z][0]/P[Z+1][0]).toFixed(2):"1.00";P[Z]="<tr><th>"+(Z+1)+"</th><td>"+P[Z][1].replace(/&/g,"&amp;")+"</td><td>"+P[Z][0]+"</td><td>"+N[Z]+"</td><td>"+((P[Z][0]/T)*100).toFixed(2)+"%</td></tr>"}if(P[10]){P[10]=""}if(X>10){P[P.length-1]=""}U.push("<table class='analysis' summary='Zipf&#39;s Law'><caption>This table demonstrates <em>Zipf&#39;s Law</em> by listing the 10 most occuring words in the content and the number of times they occurred.</caption>");U.push("<thead><tr><th>Word Rank</th><th>Most Occurring Word by Rank</th><th>Number of Instances</th><th>Ratio Increased Over Next Most Frequence Occurance</th><th>Percentage from ");U.push(T.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));if(T>1){U.push(" Total")}U.push(" Word");if(T>1){U.push("s")}O=Q.join("");Y=P.join("");U.push("</th></tr></thead><tbody><tr><th colspan='5'>Unfiltered Word Set</th></tr>");U.push(O);if(O!==Y&&P.length>2){U.push("<tr><th colspan='5'>Filtered Word Set</th></tr>");U.push(Y)}U.push("</tbody></table>");return U.join("")}()));G.push("<table class='analysis' summary='Analysis of markup pieces.'><caption>Analysis of markup pieces.</caption><thead><tr><th>Type</th><th>Quantity of Tags/Content</th><th>Percentage Quantity in Section</th><th>Percentage Quantity of Total</th><th>** Character Size</th><th>Percentage Size in Section</th><th>Percentage Size of Total</th></tr></thead><tbody><tr><th>Total Pieces</th><td>");G.push(B);G.push("</td><td>100.00%</td><td>100.00%</td><td>");G.push(C);G.push("</td><td>100.00%</td><td>100.00%</td></tr><tr><th colspan='7'>Common Tags</th></tr>");G.push(H);K=[];for(F=0;F<J;F+=1){if(A[F]){I=["<li>"];I.push(A[F].replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;"));I.push("</li>");K[F]=I.join("")}}if(K.length>0){L="<h4>HTML elements making HTTP requests:</h4><ul>"+K.join("")+"</ul>"}else{L=""}G.push("</tbody></table></div><p>* The number of requests is determined from the input submitted only and does not count the additional HTTP requests supplied from dynamically executed code, frames, iframes, css, or other external entities.</p><p>**");G.push("Character size is measured from the individual pieces of tags and content specifically between minification and beautification.</p><p>*** The number of starting &lt;script&gt; and &lt;style&gt; tags is subtracted from the total number of start tags.");G.push("The combination of those three values from the table above should equal the number of end tags or the code is in error.</p>");G.push(L);return G.join("")}()),w=function(F,G){return(((D[3][0]+F)/C)/((D[3][1]*G)/C))},z=(function(){var M="",L=C/7500,K=u.join("").length,J=q.source.length,I=0,H=["<p>If the input is content it receives an efficiency score of <strong>"],G="",F="",O="",N="";M=L.toFixed(0);if(L>0){L=(A.length-M)*4}else{L=0}if(D[3][1]===0){D[2][1]=1e-8;D[3][1]=1e-8}I=(((D[2][0]+D[2][2]-L)/B)/(D[2][1]/B));G=(I/w(D[3][2],1)).toPrecision(2);F=(I/w(D[1][15],1)).toPrecision(2);O=(I/w(D[3][2],4)).toPrecision(2);N=(I/w(D[1][15],4)).toPrecision(2);if(G===F){F="";N=""}else{F=", or <strong>"+F+"</strong> if inline script code and style tags are removed";N=", or <strong>"+N+"</strong> if inline script code and style tags are removed"}H.push(G);H.push("</strong>");H.push(F);H.push(". The efficiency score if this input is a large form or application is <strong>");H.push(O);H.push("</strong>");H.push(N);H.push(". Efficient markup achieves scores higher than 2.00 and excellent markup achieves scores higher than 4.00. The score reflects the highest number of tags to pieces of content where the weight of those tags is as small as possible compared to the weight of the content.");H.push("The score is a performance metric only and is not associated with validity or well-formedness, but semantic code typically achieves the highest scores. All values are rounded to the nearest hundreth.</p><p><strong>Total input size:</strong> <em>");H.push(J.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));H.push("</em> characters</p><p><strong>Total output size:</strong> <em>");H.push(K.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","));H.push("</em> characters</p><p><strong>* Total number of HTTP requests in supplied HTML:</strong> <em>");H.push(A.length);H.push("</em></p>");return H.join("")}()),E=(function(){var F=0,H=["<p><strong>"],G="";if(D[0][0]+D[0][15]+D[0][16]!==D[0][1]){G="s";F=(D[0][0]+D[0][15]+D[0][16])-D[0][1];if(F>0){if(F===1){G=""}H.push(F);H.push(" more start tag");H.push(G);H.push(" than end tag");H.push(G);H.push("!")}else{if(F===-1){G=""}H.push(F*-1);H.push(" more end tag");H.push(G);H.push(" than start tag");H.push(G);H.push("!")}H.push("</strong> The combined total number of start tags, script tags, and style tags should equal the number of end tags. For HTML this problem may be solved by selecting the '<em>Presume SGML type HTML</em>' option.</p>")}else{return""}return H.join("")}());j=E+z+y}());return u.join("").replace(/\n(\s)+\n/g,"\n\n").replace(/^\s+/,"")},a=function(y){(function(){if(typeof y.baseTextLines!=="string"){y.baseTextLines="Error: Cannot build diff view; baseTextLines is not defined."}if(typeof y.newTextLines!=="string"){y.newTextLines="Error: Cannot build diff view; newTextLines is not defined."}if(y.inline!==true){y.inline=false}if(isNaN(Number(y.contextSize))){y.contextSize=""}if(typeof y.baseTextName!=="string"){y.baseTextName="Base Source"}if(typeof y.newTextName!=="string"){y.newTextName="New Source"}if(typeof y.tchar!=="string"){y.tchar=""}if(isNaN(Number(y.tsize))){if(y.tchar===""){y.tsize=0}else{y.tsize=1}}}());var x=0,t=0,r=(function(){var B=Number(y.tsize),A=0,C=[];if(y.tchar===""){return""}for(A=0;A<B;A+=1){C.push(y.tchar)}return C.join("")}()),w=y.inline,p=(y.contextSize==="")?-1:Number(y.contextSize),s=function(E){var A=E.indexOf("\n"),D=E.indexOf("\r"),C=((A>-1&&D>-1)||D<0)?"\n":"\r",B=E.replace(/\&/g,"&amp;").replace(/\$#lt;/g,"%#lt;").replace(/\$#gt;/g,"%#gt;").replace(/</g,"$#lt;").replace(/>/g,"$#gt;");if(C==="\n"){E=E.replace(/\r/g,"")}else{E=E.replace(/\n/g,"")}return B.split(C)},z=s(y.baseTextLines),u=s(y.newTextLines),n=y.baseTextName,q=y.newTextName,v=(function(){var A={},D=function(J){if(A.hasOwnProperty(J)){return A[J]}},G=[],F=[],E=false,C=[],H=[],I=[],B=function(){var ae=0,ac=0,L=0,ab=0,S=0,Q=0,M=[],aa=0,Z=0,Y=0,R=[],X=0,U=0,K=0,J=0,P=0,O=0,W=G.length,T=F.length,V=[[0,W,0,T]],N=[],ad=function(ag,aj){var ai=0,ah=Math.max(ag.length,aj.length);for(ai=0;ai<ah;ai+=1){if(ag[ai]<aj[ai]){return -1}if(ag[ai]>aj[ai]){return 1}}return(ag.length===aj.length)?0:((ag.length<aj.length)?-1:1)},af=function(ar,al,at,ao){var aq=0,ap=H.length,an=0,am=0,ak=0,aj=[0,0],ah=ar,ag=at,ai=0;for(an=ar;an<al;an+=1){for(aq=0;aq<ap;aq+=1){if(H[aq][1]===G[an]&&(G[an]!==F[an]||an===al-1||G[an+1]===F[an+1])){am=H[aq][0];break}}if(aq!==ap){if(am>=at){if(am>=ao){break}if(aj[0]===am-1){ak=aj[1]+1}else{ak=1}if(ak>ai){ah=an-ak+1;ag=am-ak+1;ai=ak}}aj=[am,ak]}}while(ah>ar&&ag>at&&!D(F[ag-1])&&G[ah-1]===F[ag-1]){ah-=1;ag-=1;ai+=1}while(ah+ai<al&&ag+ai<ao&&!D(F[ag+ai])&&G[ah+ai]===F[ag+ai]){ai+=1}while(ah>ar&&ag>at&&D(F[ag-1])&&G[ah-1]===F[ag-1]){ah-=1;ag-=1;ai+=1}while(ah+ai<al&&ag+ai<ao&&D(F[ag+ai])&&G[ah+ai]===F[ag+ai]){ai+=1}return[ah,ag,ai]};while(V.length){M=V.pop();L=M[0];ab=M[1];S=M[2];Q=M[3];R=af(L,ab,S,Q);aa=R[0];Z=R[1];Y=R[2];if(Y>0){C.push(R);if(L<aa&&S<Z){V.push([L,aa,S,Z])}if(aa+Y<ab&&Z+Y<Q){V.push([aa+Y,ab,Z+Y,Q])}}}C.sort(ad);ac=C.length;for(ae=0;ae<ac;ae+=1){U=C[ae][0];J=C[ae][1];O=C[ae][2];if(X+P===U&&K+P===J){P+=O}else{if(P){N.push([X,K,P])}X=U;K=J;P=O}}if(P){N.push([X,K,P])}N.push([W,T,0]);return N};(function(){(function(){if(z.length>u.length){E=true;G=u;F=z}else{G=z;F=u}}());(function(){var K=0,M=0,J="",L=F.length;for(K=0;K<L;K+=1){J=F[K];for(M=H.length-1;M>-1;M-=1){if(H[M][1]===J){break}}if(M>-1){if(L>=200&&100>L){H.splice(M,1)}}else{H.push([K,J])}}}());(function(){var P=0,K=0,R=0,S="",O=0,M=0,L=0,J=B(),N=J.length,Q=function(U,Y,W){var V=function(aa,Z){var ad=aa.replace(/^(\s+)/,"").split(""),ac=Math.min(ad.length,Z.length),ab=0;for(ab=0;ab<ac;ab+=1){if(ad[ab]!==Z[ab]){return ab}}return ab},T=W.replace(/^(\s+)/,"").split(""),X=V(Y,T)-V(U,T);if(X>0){return true}return false};for(O=0;O<N;O+=1){P=J[O][0];K=J[O][1];R=J[O][2];S="";if(M<P&&L<K){if(M-L!==P-K&&L-K<3&&M-P<3){if(E&&M-P>L-K){if(Q(F[L],F[L+1],G[M])){I.push(["delete",L,L+1,M,M]);I.push(["replace",L+1,K,M,P])}else{I.push(["replace",L,K,M,P])}}else{if(!E&&K-L>P-M){if(Q(F[L],F[L+1],G[M])){I.push(["insert",M,M,L,L+1]);I.push(["replace",M,P,L+1,K])}else{I.push(["replace",M,P,L,K])}}else{S="replace"}}}else{S="replace"}}else{if(M<P){if(E){S="insert"}else{S="delete"}}else{if(L<K){if(E){S="delete"}else{S="insert"}}}}if(S!==""){if(E){I.push([S,L,K,M,P])}else{I.push([S,M,P,L,K])}}M=P+R;L=K+R;if(R>0){if(E){I.push(["equal",K,L,P,M])}else{I.push(["equal",P,M,K,L])}}}}())}());return I}());return(function(){var L=["<table class='diff'><thead><tr>"],J=0,S=0,B=0,K=0,D=0,U=0,O=0,C=0,G=(r==="")?"":new RegExp("^(("+r.replace(/\\/g,"\\")+")+)"),Q=function(X){var W=0,V=X.length,Y=[];for(W=0;W<V;W+=1){Y.push(X[W].replace(G,""))}return Y},M=(r==="")?[]:Q(z),I=(r==="")?[]:Q(u),T=v.length,H="",E=false,N=false,R=true,A=[],F=[],P=function(ae,ad){var Z=false,ab=0,Y=0,W=0,V=[],af=[],aa=0,ac=function(){return},X=function(){return},ah=function(){x-=1;return""},ai=ae.replace(/\'/g,"$#39;").replace(/\"/g,"$#34;").replace(/\&nbsp;/g," ").replace(/\&#160;/g," "),ag=ad.replace(/\'/g,"$#39;").replace(/\"/g,"$#34;").replace(/\&nbsp;/g," ").replace(/\&#160;/g," ");if(ai===ag){return[ae,ad]}if(G!==""&&ai.length!==ag.length&&ai.replace(G,"")===ag.replace(G,"")){return(function(){var am=ai.split(r),ao=ag.split(r),al=0,ak=am.length,aj=ao.length,an=0;for(al=0;al<ak;al+=1){if(am[al].length===0){am[al]=r}else{break}}for(an=0;an<aj;an+=1){if(ao[an].length===0){ao[an]=r}else{break}}if(ak>aj){W=ak-aj;aa=al-W;am[aa]="<em>"+am[aa];am[aa+W]="</em>"+am[aa+W];ao[an]="<em></em>"+ao[an]}else{W=aj-ak;aa=an-W;am[al]="<em></em>"+am[al];ao[aa]="<em>"+ao[aa];ao[aa+W]="</em>"+ao[aa+W]}ae=am.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'");ad=ao.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'");return[ae,ad]}())}x-=1;V=ai.split("");af=ag.split("");aa=Math.max(V.length,af.length);ac=function(al){var ak=al.length,aj=[];for(Z=0;Z<ak;Z+=1){if(al[Z]+al[Z+1]+al[Z+2]+al[Z+3]+al[Z+4]==="$#gt;"){al[Z]="$#gt;";al[Z+1]="";al[Z+2]="";al[Z+3]="";al[Z+4]=""}else{if(al[Z]+al[Z+1]+al[Z+2]+al[Z+3]+al[Z+4]==="$#lt;"){al[Z]="$#lt;";al[Z+1]="";al[Z+2]="";al[Z+3]="";al[Z+4]=""}else{if(al[Z]+al[Z+1]+al[Z+2]+al[Z+3]+al[Z+4]==="&amp;"){al[Z]="&amp;";al[Z+1]="";al[Z+2]="";al[Z+3]="";al[Z+4]=""}else{if(al[Z]+al[Z+1]+al[Z+2]+al[Z+3]+al[Z+4]==="$#34;"){al[Z]="&#34;";al[Z+1]="";al[Z+2]="";al[Z+3]="";al[Z+4]=""}else{if(al[Z]+al[Z+1]+al[Z+2]+al[Z+3]+al[Z+4]==="$#39;"){al[Z]="&#39;";al[Z+1]="";al[Z+2]="";al[Z+3]="";al[Z+4]=""}}}}}}for(Z=0;Z<ak;Z+=1){if(al[Z]!==""&&al[Z]!==undefined){aj.push(al[Z])}}return aj};V=ac(V);af=ac(af);Z=false;X=function(){var al=/<em>/g,ak=0,aj=0,ap=0,ao=[],an=false,am=0;for(ak=ab;ak<aa;ak+=1){if(V[ak]===af[ak]){am=ak}else{if(!Z&&V[ak]!==af[ak]&&!al.test(V[ak])&&!al.test(af[ak])&&!al.test(V[ak-1])&&!al.test(af[ak-1])){if(ak===0||(typeof V[ak-1]==="string"&&typeof af[ak-1]==="string")){if(ak===0){V[ak]="<em>"+V[ak];af[ak]="<em>"+af[ak]}else{V[ak-1]=V[ak-1]+"<em>";af[ak-1]=af[ak-1]+"<em>"}x+=1;Z=true;break}else{if(typeof V[ak-1]!=="string"&&typeof af[ak-1]==="string"){V[ak-1]="<em>";af[ak-1]=af[ak]+"<em>";x+=1;Z=true;break}else{if(typeof V[ak-1]==="string"&&typeof af[ak-1]!=="string"){V[ak-1]=V[ak]+"<em>";af[ak-1]="<em>";x+=1;Z=true;break}}}}else{if(V[ak]===undefined&&(af[ak]===""||af[ak]===" ")){V[ak]=""}else{if(af[ak]===undefined&&(V[ak]===""||V[ak]===" ")){af[ak]=""}}}}}for(aj=ak;aj<aa;aj+=1){if(typeof V[aj]==="string"&&typeof af[aj]!=="string"){af[aj]=""}else{if(typeof V[aj]!=="string"&&typeof af[aj]==="string"){V[aj]=""}else{if(Z){for(ap=aj;ap<aa;ap+=1){for(am=ap-1;am>aj;am-=1){if(V[am]===af[ap]){if(am>V.length-1){do{V.push("")}while(am>V.length-1)}V[am-1]=V[am-1]+"</em>";af[ap-1]=af[ap-1]+"</em>";ab=ap;ao=[];do{ao.push("");ap-=1}while(ap>am);V=ao.concat(V);Z=false;break}else{if(af[am]===V[ap]){if(am>af.length-1){do{af.push("")}while(am>af.length-1)}af[am-1]=af[am-1]+"</em>";V[ap-1]=V[ap-1]+"</em>";ab=ap;ao=[];do{ao.push("");ap-=1}while(ap>am);af=ao.concat(af);Z=false;break}}}if(!Z){break}else{if(V[ap]===af[ap]&&typeof V[ap]==="string"){V[ap-1]=V[ap-1]+"</em>";af[ap-1]=af[ap-1]+"</em>";ab=ap;Z=false;break}else{if(V[aj-1]==="<em>"+af[ap]&&al.test(af[aj-1])&&(aj-2<0||V[aj-2]!==af[ap+1])){V[aj-1]=V[aj-1].replace(al,"");V.splice(aj-1,0,"<em></em>");af[ap-1]=af[ap-1]+"</em>";ab=ap;if(ap-aj>0){ao=[];for(ap;ap>aj;ap-=1){ao.push("")}V=ao.concat(V)}Z=false;break}else{if(af[aj-1]==="<em>"+V[ap]&&al.test(V[aj-1])&&(aj-2<0||af[aj-2]!==V[ap+1])){af[aj-1]=af[aj-1].replace(al,"");af.splice(aj-1,0,"<em></em>");V[ap-1]=V[ap-1]+"</em>";ab=ap;if(ap-aj>0){ao=[];for(ap;ap>aj;ap-=1){ao.push("")}af=ao.concat(af)}Z=false;break}else{if(af[aj]===V[ap]&&((V[ap-1]!==")"&&V[ap-1]!=="}"&&V[ap-1]!=="]"&&V[ap-1]!==">"&&af[aj-1]!==")"&&af[aj-1]!=="}"&&af[aj-1]!=="]"&&af[aj-1]!==">")||(ap===aa-1||af[aj+1]===V[ap+1]))){if(af[aj-1]==="<em>"+V[ap-1]){af[aj-1]=af[aj-1].replace(/<em>/,"<em></em>");V[ap-1]=V[ap-1]+"</em>";ab=aj;Z=false;break}if(V.length>af.length&&V[ap-1].substr(4)===af[aj-1]){V[ap-2]=V[ap-2]+"</em>";af[aj-2]=af[aj-2]+"<em></em>";af[aj-1]=af[aj-1].replace(/<em>/,"")}else{if(V[ap-1]!==af[aj-1]&&!al.test(V[ap-1])){V[ap-1]=V[ap-1]+"</em>";if(typeof af[aj-1]==="string"){af[aj-1]=af[aj-1]+"</em>"}else{af[aj-1]="</em>"}}else{if(ap===1){V[ap-1]=V[ap-1]+"</em>"}else{V[ap-1]="</em>"+V[ap-1]}if(aj===1){af[aj-1]=af[aj-1]+"</em>"}else{af[aj-1]="</em>"+af[aj-1]}}}ab=ap;if(ap-aj>0){ao=[];for(ap;ap>aj;ap-=1){ao.push("")}af=ao.concat(af)}Z=false;break}else{if(V[aj]===af[ap]&&((af[ap-1]!==")"&&af[ap-1]!=="}"&&af[ap-1]!=="]"&&af[ap-1]!==">"&&V[aj-1]!==")"&&V[aj-1]!=="}"&&V[aj-1]!=="]"&&V[aj-1]!==">")||(ap===aa-1||V[aj+1]===af[ap+1]))){if(V[aj-1]==="<em>"+af[ap-1]){V[aj-1]=V[aj-1].replace(/<em>/,"<em></em>");af[ap-1]=af[ap-1]+"</em>";ab=aj;Z=false;break}if(af.length>V.length&&af[ap-1].substr(4)===V[aj-1]){af[ap-2]=af[ap-2]+"</em>";V[aj-2]=V[aj-2]+"<em></em>";V[aj-1]=V[aj-1].replace(/<em>/,"")}else{if(af[ap-1]!==V[aj-1]&&!al.test(af[ap-1])){af[ap-1]=af[ap-1]+"</em>";if(typeof V[aj-1]==="string"){V[aj-1]=V[aj-1]+"</em>"}else{V[aj-1]="</em>"}}else{if(ap===1){af[ap-1]=af[ap-1]+"</em>"}else{af[ap-1]="</em>"+af[ap-1]}if(aj===1){V[aj-1]=V[aj-1]+"</em>"}else{V[aj-1]="</em>"+V[aj-1]}}}ab=ap;if(ap-aj>0){ao=[];for(ap;ap>aj;ap-=1){ao.push("")}V=ao.concat(V)}Z=false;break}}}}}}}if(Z){for(ap=aj+1;ap<aa-1;ap+=1){if(typeof V[ap]!=="string"){V.push("")}else{if(typeof af[ap]!=="string"){af.push("")}else{if(V[ap]===af[ap]&&typeof V[ap-1]==="string"&&typeof af[ap-1]==="string"){V[ap-1]=V[ap-1]+"</em>";af[ap-1]=af[ap-1]+"</em>";ab=ap;Z=false;an=true;break}}}}if(an){an=false;break}}}}}aa=Math.max(V.length,af.length)}};for(Y=0;Y<aa;Y+=1){if(W+1!==aa){X()}else{break}}ae=V.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'").replace(/<\/em><em>/g,ah);ad=af.join("").replace(/\$#34;/g,'"').replace(/\$#39;/g,"'").replace(/<\/em><em>/g,"");if(Z){if(ae.split("<em>").length>ae.split("</em>").length){ae+="</em>"}if(ad.split("<em>").length>ad.split("</em>").length){ad+="</em>"}}return[ae,ad]};if(w){L.push("<th class='texttitle' colspan='3'>");L.push(n);L.push(" vs. ");L.push(q);L.push("</th></tr></thead><tbody>")}else{L.push("<th class='texttitle' colspan='2'>");L.push(n);L.push("</th><th class='texttitle' colspan='2'>");L.push(q);L.push("</th></tr></thead><tbody>")}for(J=0;J<T;J+=1){A=v[J];H=A[0];S=A[1];B=A[2];K=A[3];D=A[4];U=Math.max(B-S,D-K);R=true;for(O=0;O<U;O+=1){if(!isNaN(p)&&p>-1&&v.length>1&&((J>0&&O===p)||(J===0&&O===0))&&H==="equal"){R=false;C=U-((J===0?1:2)*p);if(C>1){L.push("<tr><th>...</th>");if(!w){L.push("<td class='skip'></td>")}L.push("<th>...</th><td class='skip'></td></tr>");S+=C;K+=C;O+=C-1;if(J+1===v.length){break}}}if(H!=="equal"){t+=1}L.push("<tr>");if(r!==""){if(!E&&z[B]!==u[D]&&typeof z[S+1]==="string"&&typeof u[K]==="string"&&M[S+1]===I[K]&&M[S]!==I[K]&&(typeof u[K-1]!=="string"||M[S]!==I[K-1])){E=true}else{if(!N&&z[B]!==u[D]&&typeof u[K+1]==="string"&&typeof z[S]==="string"&&I[K+1]===M[S]&&I[K]!==M[S]&&(typeof z[S-1]!=="string"||I[K]!==M[S-1])){N=true}}}if(w){if(N||H==="insert"){L.push("<th></th><th>");L.push(K+1);L.push("</th><td class='insert'>");L.push(u[K]);L.push("</td></tr>")}else{if(E||H==="delete"){L.push("<th>");L.push(S+1);L.push("</th><th></th><td class='delete'>");L.push(z[S]);L.push("</td></tr>")}else{if(H==="replace"){if(S<B&&K<D&&z[S]!==u[K]){F=P(z[S],u[K])}if(S<B){L.push("<th>");L.push(S+1);L.push("</th><th></th><td class='delete'>");if(K<D){L.push(F[0])}else{L.push(z[S])}L.push("</td></tr>")}if(S<B&&K<D){L.push("<tr>")}if(K<D){L.push("<th></th><th>");L.push(K+1);L.push("</th><td class='insert'>");if(S<B){L.push(F[1])}else{L.push(u[K])}L.push("</td></tr>")}}else{if(S<B||K<D){L.push("<th>");L.push(S+1);L.push("</th><th>");L.push(K+1);L.push("</th><td class='");L.push(H);L.push("'>");L.push(z[S]);L.push("</td></tr>")}}}}if(E){S+=1;E=false}else{if(N){K+=1;N=false}else{S+=1;K+=1}}}else{if(!E&&!N&&typeof z[S]==="string"&&typeof u[K]==="string"){if(H==="replace"&&S<B&&K<D&&z[S]!==u[K]){F=P(z[S],u[K])}else{F=[]}if(S<B){L.push("<th>");L.push(S+1);L.push("</th><td class='");if(K>=D){L.push("delete")}else{L.push(H)}L.push("'>");if(F.length===2){L.push(F[0])}else{L.push(z[S])}L.push("</td>")}else{if(R){L.push("<th></th><td class='empty'></td>")}}if(K<D){L.push("<th>");L.push(K+1);L.push("</th><td class='");if(S>=B){L.push("insert")}else{L.push(H)}L.push("'>");if(F.length===2){L.push(F[1])}else{L.push(u[K])}L.push("</td>")}else{if(R){L.push("<th></th><td class='empty'></td>")}}if(S<B){S+=1}if(K<D){K+=1}}else{if(E||(typeof z[S]==="string"&&typeof u[K]!=="string")){L.push("<th>");L.push(S+1);L.push("</th><td class='delete'>");L.push(z[S]);L.push("</td>");L.push("<th></th><td class='empty'></td>");E=false;S+=1}else{if(N||(typeof z[S]!=="string"&&typeof u[K]==="string")){L.push("<th></th><td class='empty'></td>");L.push("<th>");L.push(K+1);L.push("</th><td class='insert'>");L.push(u[K]);L.push("</td>");N=false;K+=1}}}L.push("</tr>")}}}L.push("</tbody><tfoot><tr><th class='author' colspan='");if(w){L.push("3")}else{L.push("4")}L.push("'>Original diff view created by <a href='https://github.com/cemerick/jsdifflib'>jsdifflib</a>. Diff view rewritten by <a href='http://prettydiff.com/'>Austin Cheney</a>.</th></tr></tfoot></table>");return[L.join("").replace(/\$#gt;/g,"&gt;").replace(/\$#lt;/g,"&lt;").replace(/\%#lt;/g,"$#lt;").replace(/\%#gt;/g,"$#gt;"),x,t]}())},f=function(s){(function(){if(!s.source||s.source===""){s.source="Source sample is missing."}if(!s.mode||s.mode===""||(s.mode!=="minify"&&s.mode!=="diff")){s.mode="beautify"}if(s.mode==="diff"&&(!s.diff||s.diff==="")){s.diff="Diff sample is missing."}if(!s.lang||s.lang===""||(s.lang!=="javascript"&&s.lang!=="css"&&s.lang!=="markup"&&s.lang!=="html"&&s.lang!=="csv"&&s.lang!=="text")){s.lang="auto"}else{if(s.lang==="html"){s.lang="markup";s.html=true}}if(typeof s.topcoms!=="boolean"){s.topcoms=false}if(!s.csvchar||typeof s.csvchar!=="string"||s.csvchar===""){s.csvchar=","}if(!s.comments||s.comments!=="noindent"){s.comments="indent"}if(typeof s.content!=="boolean"){s.content=false}if(typeof s.force_indent!=="boolean"){s.force_indent=false}if(typeof s.context!=="number"||isNaN(s.context)){s.context=""}if(!s.diffview||s.diffview!=="inline"){s.diffview="sidebyside"}if(!s.html||typeof s.html!=="boolean"){if(s.html==="html-yes"){s.html=true}else{s.html=false}}if(s.insize===undefined||isNaN(s.insize)){s.insize=4}if(typeof s.inchar!=="string"){s.inchar=" "}if(!s.indent||s.indent!=="allman"){s.indent=""}if(typeof s.quote!=="boolean"){s.quote=false}if(typeof s.semicolon!=="boolean"){s.semicolon=false}if(!s.style||s.style!=="noindent"){s.style="indent"}if(typeof s.content!=="boolean"){s.content=false}if(typeof s.sourcelabel!=="string"||s.sourcelabel.length<1){s.sourcelabel="base"}if(typeof s.difflabel!=="string"||s.difflabel.length<1){s.difflabel="base"}}());var v="",u=false,p=(/^\s+$/g),r="",n="",q=function(){var B="",A="",z=0,x=0,y=new Date(),D=((y.getTime()-d)/1000),C=D.toFixed(3),E=function(F,H){var G="";if(F>1){G=F+H+"s "}else{G=F+H+" "}return G},w=function(){B=(D/60).toFixed(1);z=Number(B.toString().split(".")[0]);C=(D-(z*60)).toFixed(3);B=E(B," minute")};if(D>=60&&D<3600){w()}else{if(D>=3600){A=(D/3600).toFixed(1);x=Number(A.toString().split(".")[0]);D=D-(x*3600);A=E(A," hour");w()}}return"<p><strong>Execution time:</strong> <em>"+A+B+C+"</em> seconds</p>"},t=function(){var E="",D=s.source.length,C=s.source.indexOf("/*prettydiff.com")+16,B=true,A=[],z=-1,y=0,x=[],w="";if(s.source.indexOf("/*prettydiff.com")===-1&&s.diff.indexOf("/*prettydiff.com")===-1){return}if(C===15&&typeof s.diff==="string"){C=s.diff.indexOf("/*prettydiff.com")+16;B=false}else{if(C===15){return}}for(C;C<D;C+=1){if(B){if(s.source.charAt(C)==="*"&&s.source.charAt(C+1)&&s.source.charAt(C+1)==="/"){break}x.push(s.source.charAt(C))}else{if(s.diff.charAt(C)==="*"&&s.diff.charAt(C+1)&&s.diff.charAt(C+1)==="/"){break}x.push(s.diff.charAt(C))}}E=x.join("").toLowerCase();D=E.length;for(C=0;C<D;C+=1){if((!E.charAt(C-1)||E.charAt(C-1)!=="\\")&&(E.charAt(C)==='"'||E.charAt(C)==="'")){if(w===""){w=E.charAt(C)}else{w=""}}if(w===""){if(E.charAt(C)===","){y=z+1;z=C;A.push(E.substring(y,z).replace(/^(\s*)/,"").replace(/(\s*)$/,""))}}}y=z+1;z=E.length;A.push(E.substring(y,z).replace(/^(\s*)/,"").replace(/(\s*)$/,""));w="";D=A.length;x=[];for(C=0;C<D;C+=1){E=A[C].length;for(y=0;y<E;y+=1){if(A[C].indexOf(":")===-1){A[C]="";break}else{x=[]}if((!A[C].charAt(y-1)||A[C].charAt(y-1)!=="\\")&&(A[C].charAt(y)==='"'||A[C].charAt(y)==="'")){if(w===""){w=A[C].charAt(y)}else{w=""}}if(w===""){if(A[C].charAt(y)===":"){x.push(A[C].substring(0,y).replace(/(\s*)$/,""));x.push(A[C].substring(y+1).replace(/^(\s*)/,""));if(x[1].charAt(0)===x[1].charAt(x[1].length-1)&&x[1].charAt(x[1].length-2)!=="\\"&&(x[1].charAt(0)==='"'||x[1].charAt(0)==="'")){x[1]=x[1].substring(1,x[1].length-1)}A[C]=x;break}}}}for(C=0;C<D;C+=1){if(A[C][1]){if(A[C][0]==="api.mode"){if(A[C][1]==="beautify"){s.mode="beautify"}else{if(A[C][1]==="minify"){s.mode="minify"}else{if(A[C][1]==="diff"){s.mode="diff"}}}}else{if(A[C][0]==="api.lang"){if(A[C][1]==="auto"){s.lang="auto"}else{if(A[C][1]==="javascript"){s.lang="javascript"}else{if(A[C][1]==="css"){s.lang="csv"}else{if(A[C][1]==="csv"){s.lang="csv"}else{if(A[C][1]==="markup"){s.lang="markup"}else{if(A[C][1]==="text"){s.lang="text"}}}}}}}else{if(A[C][0]==="api.csvchar"){s.csvchar=A[C][1]}else{if(A[C][0]==="api.insize"&&!/\D/.test(A[C][1])){s.insize=A[C][1]}else{if(A[C][0]==="api.inchar"){s.inchar=A[C][1]}else{if(A[C][0]==="api.comments"){if(A[C][1]==="indent"){s.comments="indent"}else{if(A[C][1]==="noindent"){s.comments="noindent"}}}else{if(A[C][0]==="api.indent"){if(A[C][1]==="knr"){s.indent="knr"}else{if(A[C][1]==="allman"){s.indent="allman"}}}else{if(A[C][0]==="api.style"){if(A[C][1]==="indent"){s.style="indent"}else{if(A[C][1]==="noindent"){s.style="noindent"}}}else{if(A[C][0]==="api.html"){if(A[C][1]==="html-no"){s.html="html-no"}else{if(A[C][1]==="html-yes"){s.html="html-yes"}}}else{if(A[C][0]==="api.context"&&(!/\D/.test(A[C][1])||A[C][1]==="")){s.context=A[C][1]}else{if(A[C][0]==="api.content"){if(A[C][1]==="true"){s.content=true}else{if(A[C][1]==="false"){s.content=false}}}else{if(A[C][0]==="api.quote"){if(A[C][1]==="true"){s.quote=true}else{if(A[C][1]==="false"){s.quote=false}}}else{if(A[C][0]==="api.semicolon"){if(A[C][1]==="true"){s.semicolon=true}else{if(A[C][1]==="false"){s.semicolon=false}}}else{if(A[C][0]==="api.diffview"){if(A[C][1]==="sidebyside"){s.diffview="sidebyside"}else{if(A[C][1]==="inline"){s.diffview="inline"}}}else{if(A[C][0]==="api.sourcelabel"){s.sourcelabel=A[C][1]}else{if(A[C][0]==="api.difflabel"){s.difflabel=A[C][1]}else{if(A[C][0]==="api.topcoms"){if(A[C][1]==="true"){s.topcoms=true}else{if(A[C][1]==="false"){s.topcoms=false}}}else{if(A[C][0]==="api.force_indent"){if(A[C][1]==="true"){s.force_indent=true}else{if(A[C][1]==="false"){s.force_indent=false}}}}}}}}}}}}}}}}}}}}}}};if(s.source==="Source sample is missing."){return["Error: Source sample is missing.",""]}if(s.diff==="Diff sample is missing."&&s.mode==="diff"){return["Error: Diff sample is missing.",""]}if(s.lang==="auto"){(function(){var x=s.source,w=x.replace(/\[[a-zA-Z][\w\-]*\=("|')?[a-zA-Z][\w\-]*("|')?\]/g,"").split(""),C=w.length,B=0,A=false,z="",y=false;u=true;if(!/^(\s*<)/.test(x)&&!/(>\s*)$/.test(x)){for(B=1;B<C;B+=1){if(!A){if(w[B]==="*"&&w[B-1]==="/"){w[B-1]="";A=true}else{if(!y&&w[B]==="f"&&B<C-6&&w[B+1]==="i"&&w[B+2]==="l"&&w[B+3]==="t"&&w[B+4]==="e"&&w[B+5]==="r"&&w[B+6]===":"){y=true}}}else{if(A&&w[B]==="*"&&B!==C-1&&w[B+1]==="/"){A=false;w[B]="";w[B+1]=""}else{if(y&&w[B]===";"){y=false;w[B]=""}}}if(A||y){w[B]=""}}z=w.join("");if(/^(\s*\{)/.test(x)&&/(\}\s*)$/.test(x)&&x.indexOf(",")!==-1){s.lang="javascript";v="JSON"}else{if(/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(x)&&(/var\s+[a-z]+[a-zA-Z0-9]*/.test(x)||/(\=\s*function)|(\s*function\s+(\w*\s+)?\()/.test(x)||x.indexOf("{")===-1||(/^(\s*if\s+\()/).test(x))){if(s.mode==="diff"&&(x.indexOf("(")===-1||x.indexOf("=")===-1||(x.indexOf(";")===-1&&x.indexOf("{")===-1))){s.lang="text";v="Plain Text"}else{s.lang="javascript";v="JavaScript"}}else{if(/^(\s*[\$\.#@a-z0-9])|^(\s*\/\*)|^(\s*\*\s*\{)/i.test(x)&&!/^(\s*if\s*\()/.test(x)&&x.indexOf("{")!==-1&&!(/\=\s*(\{|\[|\()/).test(z)&&!(/(\+|\-|\=|\*|\?)\=/).test(z)&&!(/function(\s+\w+)*\s*\(/).test(z)){s.lang="css";v="CSS"}else{if(s.mode==="diff"){s.lang="text";v="unknown"}else{s.lang="javascript";v="JavaScript"}}}}}else{if((/(>[\w\s:]*)?<(\/|\!)?[\w\s:\-\[]+/.test(x)&&/^(\s*<)/.test(x)&&/(>\s*)$/.test(x))||(/^(\s*<s((cript)|(tyle)))/i.test(x)&&/(<\/s((cript)|(tyle))>\s*)$/i.test(x))){s.lang="markup";if(/^(\s*<\?xml)/.test(x)){if(/XHTML\s+1\.1/.test(x)||/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(x)){v="XHTML"}else{v="XML"}}else{if(/<[a-zA-Z]/.test(x)===false&&/<\![A-Z]/.test(x)){v="SGML"}else{if(s.html===true||/^(\s*<\!doctype html>)/i.test(x)||(/^(\s*<\!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(x)&&/XHTML\s+1\.1/.test(x)===false&&/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(x)===false)){v="HTML"}else{v="markup"}}}}else{if(s.mode==="diff"){s.lang="text";v="unknown"}else{s.lang="javascript";v="JavaScript"}}}if(v==="unknown"){if(s.mode==="diff"){v="Plain Text"}else{v="JavaScript"}v="<p>Language set to <strong>auto</strong>, but language could not be determined. Language defaulted to <em>"+v+"</em>.</p>"}else{v="<p>Language set to <strong>auto</strong>. Presumed language is <em>"+v+"</em>.</p>"}}())}t();if(s.mode==="minify"){if(s.lang==="css"){r=c({source:s.source,level:3,type:"css",alter:true,fcomment:s.topcoms})}else{if(s.lang==="csv"){r=m(s.source,s.csvchar)}else{if(s.lang==="markup"){r=g({source:s.source,comments:"",presume_html:s.html,top_comments:s.topcoms})}else{if(s.lang==="text"){r=s.source}else{r=c({source:s.source,level:2,type:"javascript",alter:true,fcomment:s.topcoms})}}}}return(function(){var w=function(){var H=0,G=0,F=s.source,E=F.length,D=0,C=r.length,B=E-C,A=0,z=0,y=((B/E)*100).toFixed(2)+"%",x="";for(H=0;H<E;H+=1){if(F.charAt(H)==="\n"){G+=1}}D=s.source.length+G;A=D-C;z=D-E+1;x=((A/D)*100).toFixed(2)+"%";return"<div id='doc'><table class='analysis' summary='Minification efficiency report'><caption>Minification efficiency report</caption><thead><tr><th colspan='2'>Output Size</th><th colspan='2'>Number of Lines From Input</th></tr></thead><tbody><tr><td colspan='2'>"+C+"</td><td colspan='2'>"+(G+1)+"</td></tr><tr><th>Operating System</th><th>Input Size</th><th>Size Difference</th><th>Percentage of Decrease</th></tr><tr><th>Unix/Linux</th><td>"+E+"</td><td>"+B+"</td><td>"+y+"</td></tr><tr><th>Windows</th><td>"+D+"</td><td>"+A+"</td><td>"+x+"</td></tr></tbody></table></div>"};if(u===true){return[r,q()+v+w()]}return[r,q()+w()]}())}if(s.mode==="beautify"){if(s.lang==="css"){r=k({source:s.source,size:s.insize,character:s.inchar,comment:s.comments,alter:true});n=j}else{if(s.lang==="csv"){r=b(s.source,s.csvchar);n=""}else{if(s.lang==="markup"){r=l({source:s.source,insize:s.insize,inchar:s.inchar,mode:"beautify",comments:s.comments,style:s.style,html:s.html,force_indent:s.force_indent});n=j;if(s.inchar!=="\t"){r=r.replace(/\n[\t]* \/>/g,"")}}else{if(s.lang==="text"){r=s.source;n=""}else{r=e({source:s.source,insize:s.insize,inchar:s.inchar,preserve:true,preserve_max:1,inlevel:0,space:true,braces:s.indent,inarray:false,comments:s.comments});n=j}}}}if(!n){n=""}if(u===true&&s.lang!=="csv"&&s.lang!=="text"){return[r,q()+v+n]}return[r,q()+n]}if(s.mode==="diff"){if(s.lang==="css"){r=c({source:s.source,level:3,type:"css",alter:false,fcomment:s.topcoms});r=k({source:r,size:s.insize,character:s.inchar,comment:s.comments,alter:false});n=c({source:s.diff,level:3,type:"css",alter:false,fcomment:false});n=k({source:n,size:s.insize,character:s.inchar,comment:s.comments,alter:false})}else{if(s.lang==="csv"){r=b(s.source,s.csvchar);n=b(s.diff,s.csvchar)}else{if(s.lang==="markup"){r=l({source:s.source,insize:s.insize,inchar:s.inchar,mode:"diff",comments:s.comments,style:s.style,html:s.html,content:s.content,force_indent:s.force_indent}).replace(/\n[\t]* \/>/g,"");n=l({source:s.diff,insize:s.insize,inchar:s.inchar,mode:"diff",comments:s.comments,style:s.style,html:s.html,content:s.content,force_indent:s.force_indent}).replace(/\n[\t]* \/>/g,"")}else{if(s.lang==="text"){r=s.source;n=s.diff}else{r=c({source:s.source,level:3,type:"javascript",alter:false,fcomments:false});r=e({source:r,insize:s.insize,inchar:s.inchar,preserve:true,preserve_max:1,inlevel:0,space:true,braces:s.indent,inarray:false,comments:s.comments,content:s.content});n=c({source:s.diff,level:3,type:"javascript",alter:false,fcomments:false});n=e({source:n,insize:s.insize,inchar:s.inchar,preserve:true,preserve_max:1,inlevel:0,space:true,braces:s.indent,inarray:false,comments:s.comments,content:s.content})}}}}if(s.quote===true){r=r.replace(/'/g,'"');n=n.replace(/'/g,'"')}if(s.semicolon===true){r=r.replace(/;\n/g,"\n");n=n.replace(/;\n/g,"\n")}if(s.sourcelabel===""||p.test(s.sourcelabel)){s.sourcelabel="Base Text"}if(s.difflabel===""||p.test(s.difflabel)){s.difflabel="New Text"}if(s.diffview==="inline"){s.diffview=true}return(function(){var w=[],z="s",y="s",x="";if(r==="Error: This does not appear to be JavaScript."||n==="Error: This does not appear to be JavaScript."){w[1]=["<p><strong>Error:</strong> Please try using the option labeled <em>Plain Text (diff only)</em>. <span style='display:block'>The input does not appear to be markup, CSS, or JavaScript.</span></p>",0,0]}else{if(s.lang!=="text"){x=s.inchar}w[1]=a({baseTextLines:r,newTextLines:n,baseTextName:s.sourcelabel,newTextName:s.difflabel,contextSize:s.context,inline:s.diffview,tchar:x,tsize:s.insize});if(w[1][2]===1){y="";if(w[1][1]===0){z=""}}}w[0]="<p><strong>Number of differences:</strong> <em>"+(w[1][1]+w[1][2])+"</em> difference"+z+" from <em>"+w[1][2]+"</em> line"+y+" of code.</p>";if(u===true){return[w[1][0],q()+v+w[0]]}return[w[1][0],q()+w[0]]}())}};return f(i)};if(typeof exports==="object"&&exports!==undefined){exports.api=function(a){return prettydiff(a)}};
	}

	// include jQuery UI
	if (!$.ui || !$.ui.mouse) {
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.ui.core.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.22",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.ui.widget.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.ui.mouse.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);;
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.ui.position.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);;
	}
	// include draggable from jQuery UI
	if (!$.ui.draggable) {
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.ui.draggable.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);var d=this.element[0],e=!1;while(d&&(d=d.parentNode))d==document&&(e=!0);if(!e&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.22"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);;
	}
	// include resizable from jQuery UI
	if (!$.ui.resizable) {
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.ui.resizable.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){if(c.disabled)return;a(this).removeClass("ui-resizable-autohide"),b._handles.show()},function(){if(c.disabled)return;b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",i=="auto"?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);return l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=this.options,c,e,f,g,h;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:Infinity,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,e=this.position,f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),g=="sw"&&(a.left=e.left+(f.width-a.width),a.top=null),g=="nw"&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var c=this.helper,e=this._vBoundaries,f=this._aspectRatio||b.shiftKey,g=this.axis,h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var b=this.options;if(!this._proportionallyResizeElements.length)return;var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0});else continue}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.22"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!i)return;e.containerElement=a(i);if(/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}})(jQuery);;
	}
	// include effects core from jQuery UI
	if (!$.effects) {
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.effects.core.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=(a.curCSS||a.css)(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.22",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery);;
	}
	// include $.effects.drop from jQuery UI
	if (!$.effects.drop) {
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.effects.drop.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight(!0)/2:c.outerWidth(!0)/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);;
	}
	// include $.effects.explode from jQuery UI
	if (!$.effects.explode) {
		/*! jQuery UI - v1.8.22 - 2012-07-24
		* https://github.com/jquery/jquery-ui
		* Includes: jquery.effects.explode.js
		* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
		(function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(!0),h=e.outerHeight(!0);for(var i=0;i<c;i++)for(var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",'z-index':1000000,left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",'z-index':1000000,overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);;
	}

	// ---------------- jQuery UI is now available for use ----------------
	// ---------------- jQuery UI is now available for use ----------------
	// ---------------- jQuery UI is now available for use ----------------

	// initializes Portable CSS Pad when called
	function init() {
		// safe to reinsert
		$('#PortableCSSPad-container').remove();

		var urlclose = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAB3RJTUUH3AgMADgMzadyXQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAARnQU1BAACxjwv8YQUAAAJuSURBVHjaY2AYBZQCRmyC2v6hivJKSjIfX736xP7o5kU3bz+G379/M7CxsTGcO3mE4eY3Ng0OAQmRe5fO3Xp17fgrZL0s2AzkkZDWNI5I6hTg5OI8tXxBblCA/3ZZBUWGj+/fMTx6+1lLUD9gxaNHT16fOLgvE6gcxUBmbAa+Onvi9j95NQEBfevQb4LSVk8PbN9qaaT3bsPmLcJbGHRXvv/No//64IoSd22poxcvnifs5YrycobP79+wrVN1W2hq4Rbx+crpHSqn5gffEvea8IpHJ/X6jElV6yZ6tkvIqDJYmRui6MXqZSUVFQY314xfX1raS3axCqvpSKh6PNSMP/j1p7DR9V1blzalSPf6+PozXLh0E0MvEzYDv3z+zCApKcVQUZj3VHTT9Lwzlx68ufNN0uTM9VtX4xRuFWdm5/9iZWUDRxRRBoLA379/GeSBEWGjI//856dv3169+goU5BASEJIR4+Bghyj6z0CcgSwsLAyMjIwMmzZv5Jr7y3iKMCOXBNvTi6elOQWkJ52VmbJixUo+sGZmJuIMZGZmZti3ZydD3Y43rRK8Kp6Pz++Y8G5jps/Te1eOiIop2qW23+06eGAvAwszZiLBmmwYf39g2HmPM/6rhH3H/TPHdpeZf8ibOHHiu7uHV1268lrYl0FEweHZ2UPPPr27de7w4UMMBIGqe1qgUtbWVwwhi6+7efqrPnzwgOH///8Me/bsAsq6R3Eaz/rOoDHxJQODdzBRLuQWU1b4+vblw2+nt8wy0eA9y8XNy3Dp0iWG16/fMJw+Ne3m90+/H/L8f3OFh+fz4++f790h7MRRQAoAAPJx+xzHC08HAAAAAElFTkSuQmCC',
			urlminimize = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAALHRFWHRDcmVhdGlvbiBUaW1lAFN1biAxMiBBdWcgMjAxMiAyMDo0MToxNSAtMDgwMMTklPcAAAAHdElNRQfcCA0DKjlZGh+RAAAACXBIWXMAAB7CAAAewgFu0HU+AAAABGdBTUEAALGPC/xhBQAAAUVJREFUeNrtkjtPAkEUhb+ZfbALrDx8gbG1s9JfYKytrf2h1poYCwtLEyMaY0BkYZd9wMx6gV9gZcNJ7uRmZu6Zc04Gttjiz1Cr5frppmrbLgf6kKbbIvAimt4OgQ6p6Rq+DuSmwtiSwhRkJiE1KXmZMDMxUzPhs/ySesddEe61e9zf3vH48QzdY2jtEjb26YRddoIOdT9Ca022SJhmE8bZkHQew2wE8TdM3jjpnXJ+ebYhrLshnpHGzpAx0Bmlk5I4IcprgA+OVqR2Se7kFFLamYk9IbXJWrkuEWfhhnCUD5mrAioPu6hAWiUnlTLitMSW6dqyMtLnBmeuMZkr+/KSceQi5CLiJx1tMrx4uKr6bo8jv0/kdYncjmQZEaiGZBiKuhqOTFlRWNpM8stIxE2yHJMuJcNFzGA+4CV5/e8/scUWa/wCesmLgiahhgUAAAAASUVORK5CYII=',
			urlbeautify = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAIXRFWHRDb3B5cmlnaHQASnVsaWFuIEFkZGluZ3Rvbi1CYXJrZXKLx1i7AAAAB3RJTUUH3AgLCC0WlLQEMgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAQvSURBVHjatVRtTFNnFH56+0Vb2tIPSqG3LR8rEwJUgzJARbMM0Fl+yMJ0M9v8q8NkyeIfHBu4BM32Y9nMnBs6s4VoZqToHNuCugDO0DkHUiCAQgH5LpRWSr97e3cpCFsWl2myk5z3zb05eXKe87znAf6PoGn6qTISCWfREUpA0+Hod3dXT2V19Qfjdzu7GjnP0gCLhQnm9AMErL3dR+vrvz3a3t4aTxAEudphZDX/a5crtQMDAyeKdhTRyxC5uXl0VdWxJdZjyk8bYw/H9nzx+elLoCmhWCrGufMN+Ojkye+ilDs6LEeYdlkymdyn0ST+IhKJhp8ERFEUQqGQ0txormkxtwhF4nQQsfMwZhuHk5NTTq3pIhSooq3X1Z0YsVgsX/r9/q1Pomyx3DnLg4EuyTxGm8jTtEH2Mv125WFrX19/FnsZ7cPa43ttI8Pq/LzN0On0cV9/U587MTb6ljopUaRUKG+sDIQGi0mvx5t77syl6sDtfImKTUJO6UDNMxKljc4VFe1sigKarzRZeDH8HPeCSzs768D4FTXMrf1EX3fvJjJdRuq12gcEi3As13ZZre9/ctD2olqigZgVB4JBYPtC4GRNukqKixuJ5aI4qfTea6+UV3g9vvHLF38EmZqNMu1+cG5tF1Zuaz90+eK1Tq8nWOjzeNNv3+yt4EMJUqgGn8WB0z+EfuoOTLv3/KzX6R6svcOI3zOVlCC+GsB8pZ9ygk9LEaviI8ezAZ8dGBW5TjVWRdgOWYv5oUws0GIgcA12/wAEvgSwyckwI9Z0wB8IRynX1NSAH8NHKODr6u7vKROOJCufExnBozggOAwdLoGPmxrSI6H72kfecdaSfQlycQrEXBI6GEFGNhLNHVfzEw3CdUA2lwe5RLIU9LrDN9vumdzUNAZD7RiifkMgNIcNQgP8sXbQi0rowtshCZAQSgi442wQeBPgnfHx0kr5Is6KfoxKTKq0GpSZdp+5bxviWXs6jxvdr0rDbg4koiR4KS9mB2lw3YzaYuYtCqbgXnRCxDMgzA0inDnpTVAVmaOisNaWlIesTXl4ff+bzWqFfolaiINAEouwYI4ZMg2FTAFpziK4iY5IrEcIDTsVMcw+D9k7UbLv+Z+2FhR8+g9z4PDFyMsvmEpNbZlytdEatkAIJ3sR/AUCxpfImYxdmguORddMX4Oz0n43oPsdrQgl20bKK36oVSjig38DfExdppD7iksLv3rv/IXNW/z7WAKhDEEsIDVDf33X3sJ3w4xtdWd1tt24/mutyknOHXijui4jI2PgL3647jSR6B2CbdCKdw4fOmLU5/m2GErpF7Sm4B+3LOXrKxjCI5cDLvsE6FBw9V8YxOrw1r0uehLQ6PTYsXPbqcyNCd/T3GmYDhrPpmWnNEff7MpwIJHKIY3XgOZwGXbL/NjPYq//Hn8C2kYoZTy94hkAAAAASUVORK5CYII=',
			urlminify = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAALHRFWHRDcmVhdGlvbiBUaW1lAFNhdCAxMSBBdWcgMjAxMiAwMjoyNjo0OSAtMDgwMDEvyr4AAAAHdElNRQfcCAsJMh8h8Ng/AAAACXBIWXMAAB7CAAAewgFu0HU+AAAABGdBTUEAALGPC/xhBQAAAPFJREFUeNqtVLENg0AMfCQaygyQBhZIm4YFMkF65mCGUIQV0qNMEykNBUrLBB8f8icP8Ut8zElH4Tenk+WzMTIqomWWXEsCvQezElcW7IlFoKcmNmsFgQuLvoi5IIa3kfggPomnGKeDJ5oS795YHM9apx3xRtwR98QMxSpypr5TCByXjZabtTOdCVpuXoNWcDoD9qzf2mnBjzFOpZkmnw8XB4VTcflzhdPefGP6I+qctpFObahB43QGLGmmmOkUEgggNogPYtQpnU6BXoYcwU//dYqTg9ODEzTyj/UGM53QCGIO2LPYRAXPuVv+0huLeKXeGFRg5Tjvfi8AAAAASUVORK5CYII=',
			urlimportant = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAALHRFWHRDcmVhdGlvbiBUaW1lAFN1biAxMiBBdWcgMjAxMiAyMDo1ODoxMiAtMDgwMDzYXnMAAAAHdElNRQfcCA0EAhUz0MtdAAAACXBIWXMAAB7CAAAewgFu0HU+AAAABGdBTUEAALGPC/xhBQAAAT1JREFUeNpjYKAn+P//PxOIfnH3qltrWfw1tYDcfXeevOGlyNAbl875+Rlr/AeZz8Ag///K1ZsR+NQzETLwLwvXGSdX668gtrKPLwMrjxALxV6/d3zRO5ALa2asOPLx339hilwIAn/+QWgjacHjfIwM3yk28NvLp0BSmEFYXhcUlpMoNvDhvVeMElaGn/W1JWuA3Nv41BIVwNcfPmLQVTBmEWBm/AXkdlLswrt3HrC4BXgfI0YtXgBM2Iwg2lRN7teFG3dcidGD14WMjIz//359Ysyi6sLKzyPITbGBIPDx2ZNsB0edW6LSQnuoYuC9+0+YxJjYXvMwMn6hOAxB4PObFxK37j7RpYphv75/Vbx29XIeVQwDgSn1+Q+B1P9la7ZMppaZ4GJr4pS5O6limpemINjA87cfe1DN26QCAPkZbYRQcJ1jAAAAAElFTkSuQmCC',
			urlnonimportant = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAALHRFWHRDcmVhdGlvbiBUaW1lAFN1biAxMiBBdWcgMjAxMiAyMDo1ODoxMiAtMDgwMDzYXnMAAAAHdElNRQfcCA0ECiXd0HH5AAAACXBIWXMAAB7CAAAewgFu0HU+AAAABGdBTUEAALGPC/xhBQAAAitJREFUeNq9VE1oE1EQ/mazTUuTWmpy8IdUSjHUS5FEvSj401aL2Fo9eVO8ivXQWgWlCqJePCgtIkIPIkgV0YOCeNBT8WJQUVPamhJtoo1xDandrTZkd5yNRsTfDQYHHm9m9u233zczb4H/acys2HtqMrr5ZN/u0WDX/vuxpFbzT6BjTx91doab2MYHlvHz6PiuP51Xfky8J7rIqrqxGJtqdWRT21rD9hu3daDCu1AtidENoCXh91u62x0RSuE0sCW5t2uuVxgevTA8MmOxrySGO4F7AU1TrplmE4gilcAJS/LzslrfTEzmaxfsKQnQtjTRjG6a1T3ie1R1VbZl5fwAfKjxBWAaxhlhHX0LeB3LzgCXksAO2z9CZM0ROLhmw2zWZLd0/tA0cEsAOxwDZl0uS1g0FuODRCw15WIsYC55ftax5E/McAGBbx9oD+nH83noIvVriqXV6x0zfE00lSF6KPLIjlcH63NPxmJt5wHrA9FNO6cpiq3iJ0K/ZLiUuT4nI6MRDZlGMqwub62o9dZ54oD7AfP2WUXpVyzLnnS/c5ZyWBhY6VBzvP/U6QmdudBV6fyi+BemLBeg0jFg0VLyoqaqLODD0oy+lAz+YanhiKwsUSwBNPxV8vfmeTe9ODP+slmG+7KES6So3fuAO+sAusrsc1VVhRyzy300Gkajz7pLlvU7Gzx24JVsfOX67YFyYRZ+W+cGh+6WBW3riroC4OMXifayyS7VPgNC5M/cbeX8ZAAAAABJRU5ErkJggg==';

		var vertical = '';
		var horizontal = '';
		if (window.sessionStorage) {
			var width = sessionStorage.getItem('PortableCSSPad-width');
			if (width) P.width = width;
			var height = sessionStorage.getItem('PortableCSSPad-height');
			if (height) P.height = height;
			var top = sessionStorage.getItem('PortableCSSPad-top');
			if (top) P.top = top;
			var left = sessionStorage.getItem('PortableCSSPad-left');
			if (left) P.left = left;
		}
		if (P.top == -1) {
			vertical = 'bottom:' + P.bottom + 'px;';
		} else {
			vertical = 'top:' + P.top + 'px;';
		}
		if (P.left == -1) {
			horizontal = ' right:' + P.right + 'px;';
		} else {
			horizontal = ' left:' + P.left + 'px;';
		}
		var htmlbase = '<div id="PortableCSSPad-container" style="' + vertical + horizontal + '"><table><tr><td colspan="2"><div id="PortableCSSPad-topbar"><span id="PortableCSSPad-label">Portable CSS Pad</span><span id="PortableCSSPad-top-icons"><img id="PortableCSSPad-icon-minimize" title="Minimize the pad with CSS changes still in effect" src="' + urlminimize + '"><img id="PortableCSSPad-icon-close" title="Close the pad and disable CSS changes" src="' + urlclose + '"></span></div></td></tr><tr><td><div id="PortableCSSPad-left-icons" style="padding-right:4px;"><img id="PortableCSSPad-icon-beautify" title="Beautify CSS to make it well-formatted and readable" src="' + urlbeautify +'"><br /><img id="PortableCSSPad-icon-minify" title="Minify CSS to decrease file size" src="' + urlminify + '"><br /><img id="PortableCSSPad-icon-important" title="Add !important to all rules (test specificity)" src="' + urlimportant + '"><br /><img id="PortableCSSPad-icon-nonimportant" title="Remove !important from all rules" src="' + urlnonimportant + '"></div></td><td style="text-align:center; padding:0;"><textarea id="PortableCSSPad-textarea" placeholder="CSS placed in this text box will be immediately applied to the webpage." style="width: ' + P.width + 'px; height: ' + P.height + 'px;"></textarea></td></tr></table></div>';

		// insert html base for the pad
		$(document.body).append(htmlbase);

		// val:     set css rules saved in sessionStorage
		// keydown: insert \t character when pressing tab instead of switching focus
		// keyup:   apply style changes when the textarea contents change
		if (window.sessionStorage) {
			var text = sessionStorage.getItem('PortableCSSPad-css');
		}
		if ("string" != typeof text) {
			text = "";
		}
		$('#PortableCSSPad-textarea')
		.keydown(function (e) {
			if (9 == e.which) return false;
		}).keyup(function (e) {
			updateStyle($('#PortableCSSPad-textarea').val());
		})
		.val(text);
		updateStyle(text);

		// make pad draggable and resizable
		var computedStyle = getComputedStyleCBJC($('#PortableCSSPad-container'));
		$('#PortableCSSPad-container')
		.css({width: computedStyle.width, height: computedStyle.height})
		.draggable({
			containment: 'window',
			scroll: false,
			stop: function (event, ui) {
				$(this).css('position', 'fixed'); // restore position: scroll;
				P.top = parseInt($('#PortableCSSPad-container').css('top'));
				P.left = parseInt($('#PortableCSSPad-container').css('left'));
				if (window.sessionStorage) {
					sessionStorage.setItem('PortableCSSPad-top', P.top);
					sessionStorage.setItem('PortableCSSPad-left', P.left);
				}
			}
		})
		.resizable({
			minWidth: 288,
			minHeight: 152,
			handles: 'se',
			alsoResize: '#PortableCSSPad-textarea',
			stop: function (event, ui) {
				$(this).css('position', 'fixed'); // restore position: scroll;
				P.width = parseInt($('#PortableCSSPad-textarea').css('width'));
				P.height = parseInt($('#PortableCSSPad-textarea').css('height'));
				if (window.sessionStorage) {
					sessionStorage.setItem('PortableCSSPad-width', P.width);
					sessionStorage.setItem('PortableCSSPad-height', P.height);
				}
			}
		});

		// close event
		$('#PortableCSSPad-icon-close').click(function () {
			updateStyle();
			if (window.sessionStorage) {
				sessionStorage.setItem('PortableCSSPad-css', $('#PortableCSSPad-textarea').val());
			}
			$(document).off('keypress', keypressEventHandler);
			$('#PortableCSSPad-container').hide('explode', { pieces:15 }, 1000, function () {
				$(document).on('keypress', keypressEventHandler);
			});
		});
		
		// minimize event
		$('#PortableCSSPad-icon-minimize').click(function () {
			if (window.sessionStorage) {
				sessionStorage.setItem('PortableCSSPad-css', $('#PortableCSSPad-textarea').val());
			}
			$(document).off('keypress', keypressEventHandler);
			$('#PortableCSSPad-container').hide('drop', 1000, function () {
				$(document).on('keypress', keypressEventHandler);
			});
		});
		
		// beautify event
		$('#PortableCSSPad-icon-beautify').click(function () {
			$('#PortableCSSPad-textarea').val(prettydiff({
				comments: "indent",
				content: false,
				context: "",
				csvchar: ",",
				diff: "",
				difflabel: "base",
				diffview: "sidebyside",
				force_indent: false,
				html: false,
				inchar: " ",
				indent: "",
				insize: 4,
				lang: "auto",
				mode: "beautify",
				quote: false,
				semicolon: false,
				source: $('#PortableCSSPad-textarea').val(),
				sourcelabel: "base",
				style: "indent",
				topcoms: false
			})[0]);
		});
		
		// minify event
		$('#PortableCSSPad-icon-minify').click(function () {
			$('#PortableCSSPad-textarea').val(prettydiff({
				comments: "indent",
				content: false,
				context: "",
				csvchar: ",",
				diff: "",
				difflabel: "base",
				diffview: "sidebyside",
				force_indent: false,
				html: false,
				inchar: " ",
				indent: "",
				insize: 4,
				lang: "auto",
				mode: "minify",
				quote: false,
				semicolon: false,
				source: $('#PortableCSSPad-textarea').val(),
				sourcelabel: "base",
				style: "indent",
				topcoms: false
			})[0]);
		});
		
		// important event
		$('#PortableCSSPad-icon-important').click(function () {
			var text = $('#PortableCSSPad-textarea').val();
			text = text.replace(/;/g, " !important;");
			$('#PortableCSSPad-textarea').val(text);
			updateStyle(text);
		});

		// nonimportant event
		$('#PortableCSSPad-icon-nonimportant').click(function () {
			var text = $('#PortableCSSPad-textarea').val();
			text = text.replace(/ !important;/g, ";");
			$('#PortableCSSPad-textarea').val(text);
			updateStyle(text);
		});
	}

	// keypress handling for initialization
	var pressed = "";
	P.timeout = function () {
		pressed = "";
	}
	function keypressEventHandler(e) {
		if ($('#PortableCSSPad-textarea:focus').length) {
			return;
		}

		var n = pressed.length; // position of character in key
		if (e.which != P.key.charCodeAt(n)) {
			// reset and return if wrong character
			pressed = "";
			return;
		}
		pressed += P.key[n]; // which character was typed

		// reset keypress timeout
		clearTimeout(P.timeout);
		setTimeout(P.timeout, 1000);

		// initialize if key has been matched
		if (pressed.length == P.key.length) {
			pressed = "";
			init();
		}
	}

	/**
	 * Gets the computed style (CSSStyleDeclaration) of a single HTMLElement.
	 * Cross-browser and jQuery support. By - User:Mathmagician
	 * @param selection Possible values: an HTMLElement, an array of
	 * HTMLElements, a jQuery object, a string containing a selector to use to
	 * create a jQuery object, or any function that returns one of the above
	 * @returns CSSStyleDeclaration the set of computed CSS styles for the given element
	 */
	function getComputedStyleCBJC (selection) {
		var elem;
		if ("function" == typeof selection) {
			selection = selection();
		}
		if (selection instanceof HTMLElement) {
			elem = selection;
		} else if (selection.hasOwnProperty(0) && selection[0] instanceof HTMLElement) {
			elem = selection[0];
		} else if (!("string" == typeof selection && (elem = $(selection).get(0)) instanceof HTMLElement)) {
			return 'Invalid selection passed to getComputedStyle';
		}
		if (window.getComputedStyle) { // chrome, firefox
			return window.getComputedStyle(elem);
		} else if ('undefined' != typeof elem.currentStyle) { // internet explorer 8-
			return elem.currentStyle;
		} else if ('undefined' != typeof document.defaultView
				&& 'function' == typeof document.defaultView.getComputedStyle) { // oldschool fallback
			return document.defaultView.getComputedStyle(elem, null);
		} else {
			return 'Your browser doesn\'t appear to be supported.';
		}
	}

	// updates a style (pass in the css rules as a string parameter)
	function updateStyle(css) {
		if ("string" != typeof css) css = '';
		$('#PortableCSSPad-live-style').replaceWith('<style id="PortableCSSPad-live-style">' + css + '</style>');
	}

	// attach keypress handler and initialize on pageload
	$(document).on('keypress', keypressEventHandler);
	if (P.autoinit) {
		init();
	}
}(jQuery, window.PortableCSSPad = window.PortableCSSPad || {}));